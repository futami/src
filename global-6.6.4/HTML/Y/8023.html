<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>zMaster</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/185.html#L9013'>zMaster</a>          9013 libdb/sqlite3.c SQLITE_PRIVATE int sqlite3BtreeCommitPhaseOne(Btree*, const char *zMaster);</span>
<span class='curline'><a href='../S/185.html#L9828'>zMaster</a>          9828 libdb/sqlite3.c SQLITE_PRIVATE int sqlite3PagerCommitPhaseOne(Pager*,const char *zMaster, int);</span>
<span class='curline'><a href='../S/185.html#L9830'>zMaster</a>          9830 libdb/sqlite3.c SQLITE_PRIVATE int sqlite3PagerSync(Pager *pPager, const char *zMaster);</span>
<span class='curline'><a href='../S/185.html#L42098'>zMaster</a>          42098 libdb/sqlite3.c static int readMasterJournal(sqlite3_file *pJrnl, char *zMaster, u32 nMaster){</span>
<span class='curline'><a href='../S/185.html#L42105'>zMaster</a>          42105 libdb/sqlite3.c   zMaster[0] = '\0';</span>
<span class='curline'><a href='../S/185.html#L42115'>zMaster</a>          42115 libdb/sqlite3.c    || SQLITE_OK!=(rc = sqlite3OsRead(pJrnl, zMaster, len, szJ-16-len))</span>
<span class='curline'><a href='../S/185.html#L42122'>zMaster</a>          42122 libdb/sqlite3.c     cksum -= zMaster[u];</span>
<span class='curline'><a href='../S/185.html#L42132'>zMaster</a>          42132 libdb/sqlite3.c   zMaster[len] = '\0';</span>
<span class='curline'><a href='../S/185.html#L42477'>zMaster</a>          42477 libdb/sqlite3.c static int writeMasterJournal(Pager *pPager, const char *zMaster){</span>
<span class='curline'><a href='../S/185.html#L42487'>zMaster</a>          42487 libdb/sqlite3.c   if( !zMaster </span>
<span class='curline'><a href='../S/185.html#L42497'>zMaster</a>          42497 libdb/sqlite3.c   for(nMaster=0; zMaster[nMaster]; nMaster++){</span>
<span class='curline'><a href='../S/185.html#L42498'>zMaster</a>          42498 libdb/sqlite3.c     cksum += zMaster[nMaster];</span>
<span class='curline'><a href='../S/185.html#L42514'>zMaster</a>          42514 libdb/sqlite3.c    || (0 != (rc = sqlite3OsWrite(pPager-&gt;jfd, zMaster, nMaster, iHdrOff+4)))</span>
<span class='curline'><a href='../S/185.html#L43268'>zMaster</a>          43268 libdb/sqlite3.c static int pager_delmaster(Pager *pPager, const char *zMaster){</span>
<span class='curline'><a href='../S/185.html#L43288'>zMaster</a>          43288 libdb/sqlite3.c     rc = sqlite3OsOpen(pVfs, zMaster, pMaster, flags, 0);</span>
<span class='curline'><a href='../S/185.html#L43335'>zMaster</a>          43335 libdb/sqlite3.c       c = zMasterPtr[0]!=0 &amp;&amp; strcmp(zMasterPtr, zMaster)==0;</span>
<span class='curline'><a href='../S/185.html#L43345'>zMaster</a>          43345 libdb/sqlite3.c   rc = sqlite3OsDelete(pVfs, zMaster, 0);</span>
<span class='curline'><a href='../S/185.html#L43529'>zMaster</a>          43529 libdb/sqlite3.c   char *zMaster = 0;       /* Name of master journal file if any */</span>
<span class='curline'><a href='../S/185.html#L43553'>zMaster</a>          43553 libdb/sqlite3.c   zMaster = pPager-&gt;pTmpSpace;</span>
<span class='curline'><a href='../S/185.html#L43554'>zMaster</a>          43554 libdb/sqlite3.c   rc = readMasterJournal(pPager-&gt;jfd, zMaster, pPager-&gt;pVfs-&gt;mxPathname+1);</span>
<span class='curline'><a href='../S/185.html#L43555'>zMaster</a>          43555 libdb/sqlite3.c   if( rc==SQLITE_OK &amp;&amp; zMaster[0] ){</span>
<span class='curline'><a href='../S/185.html#L43556'>zMaster</a>          43556 libdb/sqlite3.c     rc = sqlite3OsAccess(pVfs, zMaster, SQLITE_ACCESS_EXISTS, &amp;res);</span>
<span class='curline'><a href='../S/185.html#L43558'>zMaster</a>          43558 libdb/sqlite3.c   zMaster = 0;</span>
<span class='curline'><a href='../S/185.html#L43684'>zMaster</a>          43684 libdb/sqlite3.c     zMaster = pPager-&gt;pTmpSpace;</span>
<span class='curline'><a href='../S/185.html#L43685'>zMaster</a>          43685 libdb/sqlite3.c     rc = readMasterJournal(pPager-&gt;jfd, zMaster, pPager-&gt;pVfs-&gt;mxPathname+1);</span>
<span class='curline'><a href='../S/185.html#L43694'>zMaster</a>          43694 libdb/sqlite3.c     rc = pager_end_transaction(pPager, zMaster[0]!='\0', 0);</span>
<span class='curline'><a href='../S/185.html#L43697'>zMaster</a>          43697 libdb/sqlite3.c   if( rc==SQLITE_OK &amp;&amp; zMaster[0] &amp;&amp; res ){</span>
<span class='curline'><a href='../S/185.html#L43701'>zMaster</a>          43701 libdb/sqlite3.c     rc = pager_delmaster(pPager, zMaster);</span>
<span class='curline'><a href='../S/185.html#L46898'>zMaster</a>          46898 libdb/sqlite3.c SQLITE_PRIVATE int sqlite3PagerSync(Pager *pPager, const char *zMaster){</span>
<span class='curline'><a href='../S/185.html#L46902'>zMaster</a>          46902 libdb/sqlite3.c     void *pArg = (void*)zMaster;</span>
<span class='curline'><a href='../S/185.html#L46965'>zMaster</a>          46965 libdb/sqlite3.c   const char *zMaster,            /* If not NULL, the master journal name */</span>
<span class='curline'><a href='../S/185.html#L46981'>zMaster</a>          46981 libdb/sqlite3.c       pPager-&gt;zFilename, zMaster, pPager-&gt;dbSize));</span>
<span class='curline'><a href='../S/185.html#L47041'>zMaster</a>          47041 libdb/sqlite3.c       if( !zMaster &amp;&amp; isOpen(pPager-&gt;jfd) </span>
<span class='curline'><a href='../S/185.html#L47068'>zMaster</a>          47068 libdb/sqlite3.c       rc = writeMasterJournal(pPager, zMaster);</span>
<span class='curline'><a href='../S/185.html#L47107'>zMaster</a>          47107 libdb/sqlite3.c         rc = sqlite3PagerSync(pPager, zMaster);</span>
<span class='curline'><a href='../S/185.html#L55518'>zMaster</a>          55518 libdb/sqlite3.c SQLITE_PRIVATE int sqlite3BtreeCommitPhaseOne(Btree *p, const char *zMaster){</span>
<span class='curline'><a href='../S/185.html#L55535'>zMaster</a>          55535 libdb/sqlite3.c     rc = sqlite3PagerCommitPhaseOne(pBt-&gt;pPager, zMaster, 0);</span>
<span class='curline'><a href='../S/185.html#L65189'>zMaster</a>          65189 libdb/sqlite3.c     char *zMaster = 0;   /* File-name for the master journal */</span>
<span class='curline'><a href='../S/185.html#L65199'>zMaster</a>          65199 libdb/sqlite3.c     zMaster = sqlite3MPrintf(db, "%s-mjXXXXXX9XXz", zMainFile);</span>
<span class='curline'><a href='../S/185.html#L65200'>zMaster</a>          65200 libdb/sqlite3.c     if( zMaster==0 ) return SQLITE_NOMEM;</span>
<span class='curline'><a href='../S/185.html#L65205'>zMaster</a>          65205 libdb/sqlite3.c           sqlite3_log(SQLITE_FULL, "MJ delete: %s", zMaster);</span>
<span class='curline'><a href='../S/185.html#L65206'>zMaster</a>          65206 libdb/sqlite3.c           sqlite3OsDelete(pVfs, zMaster, 0);</span>
<span class='curline'><a href='../S/185.html#L65209'>zMaster</a>          65209 libdb/sqlite3.c           sqlite3_log(SQLITE_FULL, "MJ collide: %s", zMaster);</span>
<span class='curline'><a href='../S/185.html#L65214'>zMaster</a>          65214 libdb/sqlite3.c       sqlite3_snprintf(13, &amp;zMaster[nMainFile], "-mj%06X9%02X",</span>
<span class='curline'><a href='../S/185.html#L65218'>zMaster</a>          65218 libdb/sqlite3.c       assert( zMaster[sqlite3Strlen30(zMaster)-3]=='9' );</span>
<span class='curline'><a href='../S/185.html#L65219'>zMaster</a>          65219 libdb/sqlite3.c       sqlite3FileSuffix3(zMainFile, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65220'>zMaster</a>          65220 libdb/sqlite3.c       rc = sqlite3OsAccess(pVfs, zMaster, SQLITE_ACCESS_EXISTS, &amp;res);</span>
<span class='curline'><a href='../S/185.html#L65224'>zMaster</a>          65224 libdb/sqlite3.c       rc = sqlite3OsOpenMalloc(pVfs, zMaster, &amp;pMaster, </span>
<span class='curline'><a href='../S/185.html#L65230'>zMaster</a>          65230 libdb/sqlite3.c       sqlite3DbFree(db, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65255'>zMaster</a>          65255 libdb/sqlite3.c           sqlite3OsDelete(pVfs, zMaster, 0);</span>
<span class='curline'><a href='../S/185.html#L65256'>zMaster</a>          65256 libdb/sqlite3.c           sqlite3DbFree(db, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65270'>zMaster</a>          65270 libdb/sqlite3.c       sqlite3OsDelete(pVfs, zMaster, 0);</span>
<span class='curline'><a href='../S/185.html#L65271'>zMaster</a>          65271 libdb/sqlite3.c       sqlite3DbFree(db, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65288'>zMaster</a>          65288 libdb/sqlite3.c         rc = sqlite3BtreeCommitPhaseOne(pBt, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65294'>zMaster</a>          65294 libdb/sqlite3.c       sqlite3DbFree(db, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65302'>zMaster</a>          65302 libdb/sqlite3.c     rc = sqlite3OsDelete(pVfs, zMaster, 1);</span>
<span class='curline'><a href='../S/185.html#L65303'>zMaster</a>          65303 libdb/sqlite3.c     sqlite3DbFree(db, zMaster);</span>
<span class='curline'><a href='../S/185.html#L65304'>zMaster</a>          65304 libdb/sqlite3.c     zMaster = 0;</span>
<span class='curline'><a href='../S/185.html#L74059'>zMaster</a>          74059 libdb/sqlite3.c   const char *zMaster;</span>
<span class='curline'><a href='../S/185.html#L74077'>zMaster</a>          74077 libdb/sqlite3.c     zMaster = SCHEMA_TABLE(iDb);</span>
<span class='curline'><a href='../S/185.html#L74083'>zMaster</a>          74083 libdb/sqlite3.c        db-&gt;aDb[iDb].zName, zMaster, pOp-&gt;p4.z);</span>
</pre>
</body>
</html>
