<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>hdr</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/185.html#L17353'>hdr</a>              17353 libdb/sqlite3.c     } hdr;</span>
<span class='curline'><a href='../S/185.html#L17437'>hdr</a>              17437 libdb/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x &amp; 1)==0 );</span>
<span class='curline'><a href='../S/185.html#L17439'>hdr</a>              17439 libdb/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/185.html#L17440'>hdr</a>              17440 libdb/sqlite3.c   assert( size==mem3.aPool[i+size-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/185.html#L17472'>hdr</a>              17472 libdb/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x &amp; 1)==0 );</span>
<span class='curline'><a href='../S/185.html#L17473'>hdr</a>              17473 libdb/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/185.html#L17474'>hdr</a>              17474 libdb/sqlite3.c   assert( size==mem3.aPool[i+size-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/185.html#L17523'>hdr</a>              17523 libdb/sqlite3.c   assert( mem3.aPool[i-1].u.hdr.size4x/4==nBlock );</span>
<span class='curline'><a href='../S/185.html#L17524'>hdr</a>              17524 libdb/sqlite3.c   assert( mem3.aPool[i+nBlock-1].u.hdr.prevSize==nBlock );</span>
<span class='curline'><a href='../S/185.html#L17525'>hdr</a>              17525 libdb/sqlite3.c   x = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/185.html#L17526'>hdr</a>              17526 libdb/sqlite3.c   mem3.aPool[i-1].u.hdr.size4x = nBlock*4 | 1 | (x&amp;2);</span>
<span class='curline'><a href='../S/185.html#L17527'>hdr</a>              17527 libdb/sqlite3.c   mem3.aPool[i+nBlock-1].u.hdr.prevSize = nBlock;</span>
<span class='curline'><a href='../S/185.html#L17528'>hdr</a>              17528 libdb/sqlite3.c   mem3.aPool[i+nBlock-1].u.hdr.size4x |= 2;</span>
<span class='curline'><a href='../S/185.html#L17552'>hdr</a>              17552 libdb/sqlite3.c     mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = nBlock;</span>
<span class='curline'><a href='../S/185.html#L17553'>hdr</a>              17553 libdb/sqlite3.c     mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x |= 2;</span>
<span class='curline'><a href='../S/185.html#L17554'>hdr</a>              17554 libdb/sqlite3.c     mem3.aPool[newi-1].u.hdr.size4x = nBlock*4 + 1;</span>
<span class='curline'><a href='../S/185.html#L17556'>hdr</a>              17556 libdb/sqlite3.c     mem3.aPool[newi-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/185.html#L17557'>hdr</a>              17557 libdb/sqlite3.c     x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/185.html#L17558'>hdr</a>              17558 libdb/sqlite3.c     mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/185.html#L17588'>hdr</a>              17588 libdb/sqlite3.c     size = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/185.html#L17592'>hdr</a>              17592 libdb/sqlite3.c       assert( i &gt; mem3.aPool[i-1].u.hdr.prevSize );</span>
<span class='curline'><a href='../S/185.html#L17593'>hdr</a>              17593 libdb/sqlite3.c       prev = i - mem3.aPool[i-1].u.hdr.prevSize;</span>
<span class='curline'><a href='../S/185.html#L17599'>hdr</a>              17599 libdb/sqlite3.c       x = mem3.aPool[prev-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/185.html#L17600'>hdr</a>              17600 libdb/sqlite3.c       mem3.aPool[prev-1].u.hdr.size4x = size*4 | x;</span>
<span class='curline'><a href='../S/185.html#L17601'>hdr</a>              17601 libdb/sqlite3.c       mem3.aPool[prev+size-1].u.hdr.prevSize = size;</span>
<span class='curline'><a href='../S/185.html#L17649'>hdr</a>              17649 libdb/sqlite3.c       if( mem3.aPool[i-1].u.hdr.size4x/4==nBlock ){</span>
<span class='curline'><a href='../S/185.html#L17710'>hdr</a>              17710 libdb/sqlite3.c   assert( (mem3.aPool[i-1].u.hdr.size4x&amp;1)==1 );</span>
<span class='curline'><a href='../S/185.html#L17711'>hdr</a>              17711 libdb/sqlite3.c   size = mem3.aPool[i-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/185.html#L17713'>hdr</a>              17713 libdb/sqlite3.c   mem3.aPool[i-1].u.hdr.size4x &amp;= ~1;</span>
<span class='curline'><a href='../S/185.html#L17714'>hdr</a>              17714 libdb/sqlite3.c   mem3.aPool[i+size-1].u.hdr.prevSize = size;</span>
<span class='curline'><a href='../S/185.html#L17715'>hdr</a>              17715 libdb/sqlite3.c   mem3.aPool[i+size-1].u.hdr.size4x &amp;= ~2;</span>
<span class='curline'><a href='../S/185.html#L17720'>hdr</a>              17720 libdb/sqlite3.c     while( (mem3.aPool[mem3.iMaster-1].u.hdr.size4x&amp;2)==0 ){</span>
<span class='curline'><a href='../S/185.html#L17721'>hdr</a>              17721 libdb/sqlite3.c       size = mem3.aPool[mem3.iMaster-1].u.hdr.prevSize;</span>
<span class='curline'><a href='../S/185.html#L17725'>hdr</a>              17725 libdb/sqlite3.c       x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/185.html#L17726'>hdr</a>              17726 libdb/sqlite3.c       mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/185.html#L17727'>hdr</a>              17727 libdb/sqlite3.c       mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/185.html#L17729'>hdr</a>              17729 libdb/sqlite3.c     x = mem3.aPool[mem3.iMaster-1].u.hdr.size4x &amp; 2;</span>
<span class='curline'><a href='../S/185.html#L17730'>hdr</a>              17730 libdb/sqlite3.c     while( (mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x&amp;1)==0 ){</span>
<span class='curline'><a href='../S/185.html#L17732'>hdr</a>              17732 libdb/sqlite3.c       mem3.szMaster += mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.size4x/4;</span>
<span class='curline'><a href='../S/185.html#L17733'>hdr</a>              17733 libdb/sqlite3.c       mem3.aPool[mem3.iMaster-1].u.hdr.size4x = mem3.szMaster*4 | x;</span>
<span class='curline'><a href='../S/185.html#L17734'>hdr</a>              17734 libdb/sqlite3.c       mem3.aPool[mem3.iMaster+mem3.szMaster-1].u.hdr.prevSize = mem3.szMaster;</span>
<span class='curline'><a href='../S/185.html#L17748'>hdr</a>              17748 libdb/sqlite3.c   assert( (pBlock[-1].u.hdr.size4x&amp;1)!=0 );</span>
<span class='curline'><a href='../S/185.html#L17749'>hdr</a>              17749 libdb/sqlite3.c   return (pBlock[-1].u.hdr.size4x&amp;~3)*2 - 4;</span>
<span class='curline'><a href='../S/185.html#L17834'>hdr</a>              17834 libdb/sqlite3.c   mem3.aPool[0].u.hdr.size4x = (mem3.szMaster&lt;&lt;2) + 2;</span>
<span class='curline'><a href='../S/185.html#L17835'>hdr</a>              17835 libdb/sqlite3.c   mem3.aPool[mem3.nPool].u.hdr.prevSize = mem3.nPool;</span>
<span class='curline'><a href='../S/185.html#L17836'>hdr</a>              17836 libdb/sqlite3.c   mem3.aPool[mem3.nPool].u.hdr.size4x = 1;</span>
<span class='curline'><a href='../S/185.html#L17874'>hdr</a>              17874 libdb/sqlite3.c     size = mem3.aPool[i-1].u.hdr.size4x;</span>
<span class='curline'><a href='../S/185.html#L17880'>hdr</a>              17880 libdb/sqlite3.c     if( (size&amp;1)==0 &amp;&amp; mem3.aPool[i+size/4-1].u.hdr.prevSize!=size/4 ){</span>
<span class='curline'><a href='../S/185.html#L17885'>hdr</a>              17885 libdb/sqlite3.c     if( ((mem3.aPool[i+size/4-1].u.hdr.size4x&amp;2)&gt;&gt;1)!=(size&amp;1) ){</span>
<span class='curline'><a href='../S/185.html#L17902'>hdr</a>              17902 libdb/sqlite3.c               (mem3.aPool[j-1].u.hdr.size4x/4)*8-8);</span>
<span class='curline'><a href='../S/185.html#L17911'>hdr</a>              17911 libdb/sqlite3.c               (mem3.aPool[j-1].u.hdr.size4x/4)*8-8);</span>
<span class='curline'><a href='../S/185.html#L48541'>hdr</a>              48541 libdb/sqlite3.c   WalIndexHdr hdr;           /* Wal-index header for current transaction */</span>
<span class='curline'><a href='../S/185.html#L48759'>hdr</a>              48759 libdb/sqlite3.c   pWal-&gt;hdr.isInit = 1;</span>
<span class='curline'><a href='../S/185.html#L48760'>hdr</a>              48760 libdb/sqlite3.c   pWal-&gt;hdr.iVersion = WALINDEX_MAX_VERSION;</span>
<span class='curline'><a href='../S/185.html#L48761'>hdr</a>              48761 libdb/sqlite3.c   walChecksumBytes(1, (u8*)&amp;pWal-&gt;hdr, nCksum, 0, pWal-&gt;hdr.aCksum);</span>
<span class='curline'><a href='../S/185.html#L48762'>hdr</a>              48762 libdb/sqlite3.c   memcpy((void *)&amp;aHdr[1], (void *)&amp;pWal-&gt;hdr, sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L48764'>hdr</a>              48764 libdb/sqlite3.c   memcpy((void *)&amp;aHdr[0], (void *)&amp;pWal-&gt;hdr, sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L48788'>hdr</a>              48788 libdb/sqlite3.c   u32 *aCksum = pWal-&gt;hdr.aFrameCksum;</span>
<span class='curline'><a href='../S/185.html#L48792'>hdr</a>              48792 libdb/sqlite3.c   memcpy(&amp;aFrame[8], pWal-&gt;hdr.aSalt, 8);</span>
<span class='curline'><a href='../S/185.html#L48794'>hdr</a>              48794 libdb/sqlite3.c   nativeCksum = (pWal-&gt;hdr.bigEndCksum==SQLITE_BIGENDIAN);</span>
<span class='curline'><a href='../S/185.html#L48815'>hdr</a>              48815 libdb/sqlite3.c   u32 *aCksum = pWal-&gt;hdr.aFrameCksum;</span>
<span class='curline'><a href='../S/185.html#L48822'>hdr</a>              48822 libdb/sqlite3.c   if( memcmp(&amp;pWal-&gt;hdr.aSalt, &amp;aFrame[8], 8)!=0 ){</span>
<span class='curline'><a href='../S/185.html#L48838'>hdr</a>              48838 libdb/sqlite3.c   nativeCksum = (pWal-&gt;hdr.bigEndCksum==SQLITE_BIGENDIAN);</span>
<span class='curline'><a href='../S/185.html#L49029'>hdr</a>              49029 libdb/sqlite3.c   testcase( pWal-&gt;hdr.mxFrame==HASHTABLE_NPAGE_ONE-1 );</span>
<span class='curline'><a href='../S/185.html#L49030'>hdr</a>              49030 libdb/sqlite3.c   testcase( pWal-&gt;hdr.mxFrame==HASHTABLE_NPAGE_ONE );</span>
<span class='curline'><a href='../S/185.html#L49031'>hdr</a>              49031 libdb/sqlite3.c   testcase( pWal-&gt;hdr.mxFrame==HASHTABLE_NPAGE_ONE+1 );</span>
<span class='curline'><a href='../S/185.html#L49033'>hdr</a>              49033 libdb/sqlite3.c   if( pWal-&gt;hdr.mxFrame==0 ) return;</span>
<span class='curline'><a href='../S/185.html#L49039'>hdr</a>              49039 libdb/sqlite3.c   assert( pWal-&gt;nWiData&gt;walFramePage(pWal-&gt;hdr.mxFrame) );</span>
<span class='curline'><a href='../S/185.html#L49040'>hdr</a>              49040 libdb/sqlite3.c   assert( pWal-&gt;apWiData[walFramePage(pWal-&gt;hdr.mxFrame)] );</span>
<span class='curline'><a href='../S/185.html#L49041'>hdr</a>              49041 libdb/sqlite3.c   walHashGet(pWal, walFramePage(pWal-&gt;hdr.mxFrame), &amp;aHash, &amp;aPgno, &amp;iZero);</span>
<span class='curline'><a href='../S/185.html#L49046'>hdr</a>              49046 libdb/sqlite3.c   iLimit = pWal-&gt;hdr.mxFrame - iZero;</span>
<span class='curline'><a href='../S/185.html#L49196'>hdr</a>              49196 libdb/sqlite3.c   memset(&amp;pWal-&gt;hdr, 0, sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L49235'>hdr</a>              49235 libdb/sqlite3.c     pWal-&gt;hdr.bigEndCksum = (u8)(magic&amp;0x00000001);</span>
<span class='curline'><a href='../S/185.html#L49238'>hdr</a>              49238 libdb/sqlite3.c     memcpy(&amp;pWal-&gt;hdr.aSalt, &amp;aBuf[16], 8);</span>
<span class='curline'><a href='../S/185.html#L49241'>hdr</a>              49241 libdb/sqlite3.c     walChecksumBytes(pWal-&gt;hdr.bigEndCksum==SQLITE_BIGENDIAN, </span>
<span class='curline'><a href='../S/185.html#L49242'>hdr</a>              49242 libdb/sqlite3.c         aBuf, WAL_HDRSIZE-2*4, 0, pWal-&gt;hdr.aFrameCksum</span>
<span class='curline'><a href='../S/185.html#L49244'>hdr</a>              49244 libdb/sqlite3.c     if( pWal-&gt;hdr.aFrameCksum[0]!=sqlite3Get4byte(&amp;aBuf[24])</span>
<span class='curline'><a href='../S/185.html#L49245'>hdr</a>              49245 libdb/sqlite3.c      || pWal-&gt;hdr.aFrameCksum[1]!=sqlite3Get4byte(&amp;aBuf[28])</span>
<span class='curline'><a href='../S/185.html#L49284'>hdr</a>              49284 libdb/sqlite3.c         pWal-&gt;hdr.mxFrame = iFrame;</span>
<span class='curline'><a href='../S/185.html#L49285'>hdr</a>              49285 libdb/sqlite3.c         pWal-&gt;hdr.nPage = nTruncate;</span>
<span class='curline'><a href='../S/185.html#L49286'>hdr</a>              49286 libdb/sqlite3.c         pWal-&gt;hdr.szPage = (u16)((szPage&amp;0xff00) | (szPage&gt;&gt;16));</span>
<span class='curline'><a href='../S/185.html#L49289'>hdr</a>              49289 libdb/sqlite3.c         aFrameCksum[0] = pWal-&gt;hdr.aFrameCksum[0];</span>
<span class='curline'><a href='../S/185.html#L49290'>hdr</a>              49290 libdb/sqlite3.c         aFrameCksum[1] = pWal-&gt;hdr.aFrameCksum[1];</span>
<span class='curline'><a href='../S/185.html#L49301'>hdr</a>              49301 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[0] = aFrameCksum[0];</span>
<span class='curline'><a href='../S/185.html#L49302'>hdr</a>              49302 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[1] = aFrameCksum[1];</span>
<span class='curline'><a href='../S/185.html#L49313'>hdr</a>              49313 libdb/sqlite3.c     if( pWal-&gt;hdr.mxFrame ) pInfo-&gt;aReadMark[1] = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L49320'>hdr</a>              49320 libdb/sqlite3.c     if( pWal-&gt;hdr.nPage ){</span>
<span class='curline'><a href='../S/185.html#L49323'>hdr</a>              49323 libdb/sqlite3.c           pWal-&gt;hdr.mxFrame, pWal-&gt;zWalName</span>
<span class='curline'><a href='../S/185.html#L49645'>hdr</a>              49645 libdb/sqlite3.c   assert( pWal-&gt;ckptLock &amp;&amp; pWal-&gt;hdr.mxFrame&gt;0 );</span>
<span class='curline'><a href='../S/185.html#L49646'>hdr</a>              49646 libdb/sqlite3.c   iLast = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L49734'>hdr</a>              49734 libdb/sqlite3.c   return (pWal-&gt;hdr.szPage&amp;0xfe00) + ((pWal-&gt;hdr.szPage&amp;0x0001)&lt;&lt;16);</span>
<span class='curline'><a href='../S/185.html#L49791'>hdr</a>              49791 libdb/sqlite3.c   if( pInfo-&gt;nBackfill&gt;=pWal-&gt;hdr.mxFrame ) return SQLITE_OK;</span>
<span class='curline'><a href='../S/185.html#L49807'>hdr</a>              49807 libdb/sqlite3.c   mxSafeFrame = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L49808'>hdr</a>              49808 libdb/sqlite3.c   mxPage = pWal-&gt;hdr.nPage;</span>
<span class='curline'><a href='../S/185.html#L49812'>hdr</a>              49812 libdb/sqlite3.c       assert( y&lt;=pWal-&gt;hdr.mxFrame );</span>
<span class='curline'><a href='../S/185.html#L49867'>hdr</a>              49867 libdb/sqlite3.c         i64 szDb = pWal-&gt;hdr.nPage*(i64)szPage;</span>
<span class='curline'><a href='../S/185.html#L49896'>hdr</a>              49896 libdb/sqlite3.c     if( pInfo-&gt;nBackfill&lt;pWal-&gt;hdr.mxFrame ){</span>
<span class='curline'><a href='../S/185.html#L49899'>hdr</a>              49899 libdb/sqlite3.c       assert( mxSafeFrame==pWal-&gt;hdr.mxFrame );</span>
<span class='curline'><a href='../S/185.html#L50046'>hdr</a>              50046 libdb/sqlite3.c   if( memcmp(&amp;pWal-&gt;hdr, &amp;h1, sizeof(WalIndexHdr)) ){</span>
<span class='curline'><a href='../S/185.html#L50048'>hdr</a>              50048 libdb/sqlite3.c     memcpy(&amp;pWal-&gt;hdr, &amp;h1, sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L50049'>hdr</a>              50049 libdb/sqlite3.c     pWal-&gt;szPage = (pWal-&gt;hdr.szPage&amp;0xfe00) + ((pWal-&gt;hdr.szPage&amp;0x0001)&lt;&lt;16);</span>
<span class='curline'><a href='../S/185.html#L50124'>hdr</a>              50124 libdb/sqlite3.c   if( badHdr==0 &amp;&amp; pWal-&gt;hdr.iVersion!=WALINDEX_MAX_VERSION ){</span>
<span class='curline'><a href='../S/185.html#L50256'>hdr</a>              50256 libdb/sqlite3.c   if( !useWal &amp;&amp; pInfo-&gt;nBackfill==pWal-&gt;hdr.mxFrame ){</span>
<span class='curline'><a href='../S/185.html#L50263'>hdr</a>              50263 libdb/sqlite3.c       if( memcmp((void *)walIndexHdr(pWal), &amp;pWal-&gt;hdr, sizeof(WalIndexHdr)) ){</span>
<span class='curline'><a href='../S/185.html#L50296'>hdr</a>              50296 libdb/sqlite3.c     if( mxReadMark&lt;=thisMark &amp;&amp; thisMark&lt;=pWal-&gt;hdr.mxFrame ){</span>
<span class='curline'><a href='../S/185.html#L50305'>hdr</a>              50305 libdb/sqlite3.c      &amp;&amp; (mxReadMark&lt;pWal-&gt;hdr.mxFrame || mxI==0)</span>
<span class='curline'><a href='../S/185.html#L50310'>hdr</a>              50310 libdb/sqlite3.c           mxReadMark = pInfo-&gt;aReadMark[i] = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L50350'>hdr</a>              50350 libdb/sqlite3.c      || memcmp((void *)walIndexHdr(pWal), &amp;pWal-&gt;hdr, sizeof(WalIndexHdr))</span>
<span class='curline'><a href='../S/185.html#L50355'>hdr</a>              50355 libdb/sqlite3.c       assert( mxReadMark&lt;=pWal-&gt;hdr.mxFrame );</span>
<span class='curline'><a href='../S/185.html#L50416'>hdr</a>              50416 libdb/sqlite3.c   u32 iLast = pWal-&gt;hdr.mxFrame;  /* Last page in WAL for this reader */</span>
<span class='curline'><a href='../S/185.html#L50517'>hdr</a>              50517 libdb/sqlite3.c   sz = pWal-&gt;hdr.szPage;</span>
<span class='curline'><a href='../S/185.html#L50531'>hdr</a>              50531 libdb/sqlite3.c     return pWal-&gt;hdr.nPage;</span>
<span class='curline'><a href='../S/185.html#L50574'>hdr</a>              50574 libdb/sqlite3.c   if( memcmp(&amp;pWal-&gt;hdr, (void *)walIndexHdr(pWal), sizeof(WalIndexHdr))!=0 ){</span>
<span class='curline'><a href='../S/185.html#L50611'>hdr</a>              50611 libdb/sqlite3.c     Pgno iMax = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L50617'>hdr</a>              50617 libdb/sqlite3.c     memcpy(&amp;pWal-&gt;hdr, (void *)walIndexHdr(pWal), sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L50619'>hdr</a>              50619 libdb/sqlite3.c     for(iFrame=pWal-&gt;hdr.mxFrame+1; </span>
<span class='curline'><a href='../S/185.html#L50637'>hdr</a>              50637 libdb/sqlite3.c     if( iMax!=pWal-&gt;hdr.mxFrame ) walCleanupHash(pWal);</span>
<span class='curline'><a href='../S/185.html#L50651'>hdr</a>              50651 libdb/sqlite3.c   aWalData[0] = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L50652'>hdr</a>              50652 libdb/sqlite3.c   aWalData[1] = pWal-&gt;hdr.aFrameCksum[0];</span>
<span class='curline'><a href='../S/185.html#L50653'>hdr</a>              50653 libdb/sqlite3.c   aWalData[2] = pWal-&gt;hdr.aFrameCksum[1];</span>
<span class='curline'><a href='../S/185.html#L50667'>hdr</a>              50667 libdb/sqlite3.c   assert( aWalData[3]!=pWal-&gt;nCkpt || aWalData[0]&lt;=pWal-&gt;hdr.mxFrame );</span>
<span class='curline'><a href='../S/185.html#L50678'>hdr</a>              50678 libdb/sqlite3.c   if( aWalData[0]&lt;pWal-&gt;hdr.mxFrame ){</span>
<span class='curline'><a href='../S/185.html#L50679'>hdr</a>              50679 libdb/sqlite3.c     pWal-&gt;hdr.mxFrame = aWalData[0];</span>
<span class='curline'><a href='../S/185.html#L50680'>hdr</a>              50680 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[0] = aWalData[1];</span>
<span class='curline'><a href='../S/185.html#L50681'>hdr</a>              50681 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[1] = aWalData[2];</span>
<span class='curline'><a href='../S/185.html#L50707'>hdr</a>              50707 libdb/sqlite3.c     assert( pInfo-&gt;nBackfill==pWal-&gt;hdr.mxFrame );</span>
<span class='curline'><a href='../S/185.html#L50724'>hdr</a>              50724 libdb/sqlite3.c         u32 *aSalt = pWal-&gt;hdr.aSalt;       /* Big-endian salt values */</span>
<span class='curline'><a href='../S/185.html#L50727'>hdr</a>              50727 libdb/sqlite3.c         pWal-&gt;hdr.mxFrame = 0;</span>
<span class='curline'><a href='../S/185.html#L50854'>hdr</a>              50854 libdb/sqlite3.c               pWal, cnt, pWal-&gt;hdr.mxFrame, isCommit ? "Commit" : "Spill"));</span>
<span class='curline'><a href='../S/185.html#L50869'>hdr</a>              50869 libdb/sqlite3.c   iFrame = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L50878'>hdr</a>              50878 libdb/sqlite3.c     if( pWal-&gt;nCkpt==0 ) sqlite3_randomness(8, pWal-&gt;hdr.aSalt);</span>
<span class='curline'><a href='../S/185.html#L50879'>hdr</a>              50879 libdb/sqlite3.c     memcpy(&amp;aWalHdr[16], pWal-&gt;hdr.aSalt, 8);</span>
<span class='curline'><a href='../S/185.html#L50885'>hdr</a>              50885 libdb/sqlite3.c     pWal-&gt;hdr.bigEndCksum = SQLITE_BIGENDIAN;</span>
<span class='curline'><a href='../S/185.html#L50886'>hdr</a>              50886 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[0] = aCksum[0];</span>
<span class='curline'><a href='../S/185.html#L50887'>hdr</a>              50887 libdb/sqlite3.c     pWal-&gt;hdr.aFrameCksum[1] = aCksum[1];</span>
<span class='curline'><a href='../S/185.html#L50978'>hdr</a>              50978 libdb/sqlite3.c   iFrame = pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L50991'>hdr</a>              50991 libdb/sqlite3.c     pWal-&gt;hdr.szPage = (u16)((szPage&amp;0xff00) | (szPage&gt;&gt;16));</span>
<span class='curline'><a href='../S/185.html#L50994'>hdr</a>              50994 libdb/sqlite3.c     pWal-&gt;hdr.mxFrame = iFrame;</span>
<span class='curline'><a href='../S/185.html#L50996'>hdr</a>              50996 libdb/sqlite3.c       pWal-&gt;hdr.iChange++;</span>
<span class='curline'><a href='../S/185.html#L50997'>hdr</a>              50997 libdb/sqlite3.c       pWal-&gt;hdr.nPage = nTruncate;</span>
<span class='curline'><a href='../S/185.html#L51078'>hdr</a>              51078 libdb/sqlite3.c     if( pWal-&gt;hdr.mxFrame &amp;&amp; walPagesize(pWal)!=nBuf ){</span>
<span class='curline'><a href='../S/185.html#L51086'>hdr</a>              51086 libdb/sqlite3.c       if( pnLog ) *pnLog = (int)pWal-&gt;hdr.mxFrame;</span>
<span class='curline'><a href='../S/185.html#L51098'>hdr</a>              51098 libdb/sqlite3.c     memset(&amp;pWal-&gt;hdr, 0, sizeof(WalIndexHdr));</span>
<span class='curline'><a href='../S/185.html#L53330'>hdr</a>              53330 libdb/sqlite3.c   int hdr;                   /* Offset to the page header */</span>
<span class='curline'><a href='../S/185.html#L53349'>hdr</a>              53349 libdb/sqlite3.c   hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L53352'>hdr</a>              53352 libdb/sqlite3.c   assert( nCell==get2byte(&amp;data[hdr+3]) );</span>
<span class='curline'><a href='../S/185.html#L53354'>hdr</a>              53354 libdb/sqlite3.c   cbrk = get2byte(&amp;data[hdr+5]);</span>
<span class='curline'><a href='../S/185.html#L53392'>hdr</a>              53392 libdb/sqlite3.c   put2byte(&amp;data[hdr+5], cbrk);</span>
<span class='curline'><a href='../S/185.html#L53393'>hdr</a>              53393 libdb/sqlite3.c   data[hdr+1] = 0;</span>
<span class='curline'><a href='../S/185.html#L53394'>hdr</a>              53394 libdb/sqlite3.c   data[hdr+2] = 0;</span>
<span class='curline'><a href='../S/185.html#L53395'>hdr</a>              53395 libdb/sqlite3.c   data[hdr+7] = 0;</span>
<span class='curline'><a href='../S/185.html#L53418'>hdr</a>              53418 libdb/sqlite3.c   const int hdr = pPage-&gt;hdrOffset;    /* Local cache of pPage-&gt;hdrOffset */</span>
<span class='curline'><a href='../S/185.html#L53434'>hdr</a>              53434 libdb/sqlite3.c   assert( pPage-&gt;cellOffset == hdr + 12 - 4*pPage-&gt;leaf );</span>
<span class='curline'><a href='../S/185.html#L53437'>hdr</a>              53437 libdb/sqlite3.c   top = get2byte(&amp;data[hdr+5]);</span>
<span class='curline'><a href='../S/185.html#L53453'>hdr</a>              53453 libdb/sqlite3.c   if( gap+2&lt;=top &amp;&amp; (data[hdr+1] || data[hdr+2]) ){</span>
<span class='curline'><a href='../S/185.html#L53455'>hdr</a>              53455 libdb/sqlite3.c     for(addr=hdr+1; (pc = get2byte(&amp;data[addr]))&gt;0; addr=pc){</span>
<span class='curline'><a href='../S/185.html#L53466'>hdr</a>              53466 libdb/sqlite3.c           if( data[hdr+7]&gt;=60 ) goto defragment_page;</span>
<span class='curline'><a href='../S/185.html#L53470'>hdr</a>              53470 libdb/sqlite3.c           data[hdr+7] += (u8)x;</span>
<span class='curline'><a href='../S/185.html#L53493'>hdr</a>              53493 libdb/sqlite3.c     top = get2byteNotZero(&amp;data[hdr+5]);</span>
<span class='curline'><a href='../S/185.html#L53505'>hdr</a>              53505 libdb/sqlite3.c   put2byte(&amp;data[hdr+5], top);</span>
<span class='curline'><a href='../S/185.html#L53527'>hdr</a>              53527 libdb/sqlite3.c   u8 hdr;                               /* Page header size.  0 or 100 */</span>
<span class='curline'><a href='../S/185.html#L53551'>hdr</a>              53551 libdb/sqlite3.c   hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L53552'>hdr</a>              53552 libdb/sqlite3.c   iPtr = hdr + 1;</span>
<span class='curline'><a href='../S/185.html#L53581'>hdr</a>              53581 libdb/sqlite3.c     if( iPtr&gt;hdr+1 ){</span>
<span class='curline'><a href='../S/185.html#L53590'>hdr</a>              53590 libdb/sqlite3.c     if( nFrag&gt;data[hdr+7] ) return SQLITE_CORRUPT_BKPT;</span>
<span class='curline'><a href='../S/185.html#L53591'>hdr</a>              53591 libdb/sqlite3.c     data[hdr+7] -= nFrag;</span>
<span class='curline'><a href='../S/185.html#L53593'>hdr</a>              53593 libdb/sqlite3.c   if( iStart==get2byte(&amp;data[hdr+5]) ){</span>
<span class='curline'><a href='../S/185.html#L53597'>hdr</a>              53597 libdb/sqlite3.c     if( iPtr!=hdr+1 ) return SQLITE_CORRUPT_BKPT;</span>
<span class='curline'><a href='../S/185.html#L53598'>hdr</a>              53598 libdb/sqlite3.c     put2byte(&amp;data[hdr+1], iFreeBlk);</span>
<span class='curline'><a href='../S/185.html#L53599'>hdr</a>              53599 libdb/sqlite3.c     put2byte(&amp;data[hdr+5], iEnd);</span>
<span class='curline'><a href='../S/185.html#L53669'>hdr</a>              53669 libdb/sqlite3.c     u8 hdr;            /* Offset to beginning of page header */</span>
<span class='curline'><a href='../S/185.html#L53681'>hdr</a>              53681 libdb/sqlite3.c     hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L53683'>hdr</a>              53683 libdb/sqlite3.c     if( decodeFlags(pPage, data[hdr]) ) return SQLITE_CORRUPT_BKPT;</span>
<span class='curline'><a href='../S/185.html#L53688'>hdr</a>              53688 libdb/sqlite3.c     pPage-&gt;cellOffset = cellOffset = hdr + 12 - 4*pPage-&gt;leaf;</span>
<span class='curline'><a href='../S/185.html#L53691'>hdr</a>              53691 libdb/sqlite3.c     top = get2byteNotZero(&amp;data[hdr+5]);</span>
<span class='curline'><a href='../S/185.html#L53692'>hdr</a>              53692 libdb/sqlite3.c     pPage-&gt;nCell = get2byte(&amp;data[hdr+3]);</span>
<span class='curline'><a href='../S/185.html#L53732'>hdr</a>              53732 libdb/sqlite3.c     pc = get2byte(&amp;data[hdr+1]);</span>
<span class='curline'><a href='../S/185.html#L53733'>hdr</a>              53733 libdb/sqlite3.c     nFree = data[hdr+7] + top;</span>
<span class='curline'><a href='../S/185.html#L53774'>hdr</a>              53774 libdb/sqlite3.c   u8 hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L53783'>hdr</a>              53783 libdb/sqlite3.c     memset(&amp;data[hdr], 0, pBt-&gt;usableSize - hdr);</span>
<span class='curline'><a href='../S/185.html#L53785'>hdr</a>              53785 libdb/sqlite3.c   data[hdr] = (char)flags;</span>
<span class='curline'><a href='../S/185.html#L53786'>hdr</a>              53786 libdb/sqlite3.c   first = hdr + ((flags&amp;PTF_LEAF)==0 ? 12 : 8);</span>
<span class='curline'><a href='../S/185.html#L53787'>hdr</a>              53787 libdb/sqlite3.c   memset(&amp;data[hdr+1], 0, 4);</span>
<span class='curline'><a href='../S/185.html#L53788'>hdr</a>              53788 libdb/sqlite3.c   data[hdr+7] = 0;</span>
<span class='curline'><a href='../S/185.html#L53789'>hdr</a>              53789 libdb/sqlite3.c   put2byte(&amp;data[hdr+5], pBt-&gt;usableSize);</span>
<span class='curline'><a href='../S/185.html#L58004'>hdr</a>              58004 libdb/sqlite3.c   int hdr;        /* Beginning of the header.  0 most pages.  100 page 1 */</span>
<span class='curline'><a href='../S/185.html#L58015'>hdr</a>              58015 libdb/sqlite3.c   hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L58016'>hdr</a>              58016 libdb/sqlite3.c   testcase( pc==get2byte(&amp;data[hdr+5]) );</span>
<span class='curline'><a href='../S/185.html#L58018'>hdr</a>              58018 libdb/sqlite3.c   if( pc &lt; (u32)get2byte(&amp;data[hdr+5]) || pc+sz &gt; pPage-&gt;pBt-&gt;usableSize ){</span>
<span class='curline'><a href='../S/185.html#L58029'>hdr</a>              58029 libdb/sqlite3.c   put2byte(&amp;data[hdr+3], pPage-&gt;nCell);</span>
<span class='curline'><a href='../S/185.html#L58138'>hdr</a>              58138 libdb/sqlite3.c   const int hdr = pPage-&gt;hdrOffset;           /* Offset of header on pPage */</span>
<span class='curline'><a href='../S/185.html#L58149'>hdr</a>              58149 libdb/sqlite3.c   assert( get2byteNotZero(&amp;data[hdr+5])==nUsable );</span>
<span class='curline'><a href='../S/185.html#L58160'>hdr</a>              58160 libdb/sqlite3.c   put2byte(&amp;data[hdr+3], nCell);</span>
<span class='curline'><a href='../S/185.html#L58161'>hdr</a>              58161 libdb/sqlite3.c   put2byte(&amp;data[hdr+5], cellbody);</span>
<span class='curline'><a href='../S/185.html#L59713'>hdr</a>              59713 libdb/sqlite3.c   int hdr;</span>
<span class='curline'><a href='../S/185.html#L59723'>hdr</a>              59723 libdb/sqlite3.c   hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L59734'>hdr</a>              59734 libdb/sqlite3.c     rc = clearDatabasePage(pBt, get4byte(&amp;pPage-&gt;aData[hdr+8]), 1, pnChange);</span>
<span class='curline'><a href='../S/185.html#L59743'>hdr</a>              59743 libdb/sqlite3.c     zeroPage(pPage, pPage-&gt;aData[hdr] | PTF_LEAF);</span>
<span class='curline'><a href='../S/185.html#L60270'>hdr</a>              60270 libdb/sqlite3.c   int hdr, cellStart;</span>
<span class='curline'><a href='../S/185.html#L60419'>hdr</a>              60419 libdb/sqlite3.c   hdr = pPage-&gt;hdrOffset;</span>
<span class='curline'><a href='../S/185.html#L60425'>hdr</a>              60425 libdb/sqlite3.c     int contentOffset = get2byteNotZero(&amp;data[hdr+5]);</span>
<span class='curline'><a href='../S/185.html#L60429'>hdr</a>              60429 libdb/sqlite3.c     nCell = get2byte(&amp;data[hdr+3]);</span>
<span class='curline'><a href='../S/185.html#L60430'>hdr</a>              60430 libdb/sqlite3.c     cellStart = hdr + 12 - 4*pPage-&gt;leaf;</span>
<span class='curline'><a href='../S/185.html#L60446'>hdr</a>              60446 libdb/sqlite3.c     i = get2byte(&amp;data[hdr+1]);</span>
<span class='curline'><a href='../S/185.html#L60467'>hdr</a>              60467 libdb/sqlite3.c     if( cnt!=data[hdr+7] ){</span>
<span class='curline'><a href='../S/185.html#L60470'>hdr</a>              60470 libdb/sqlite3.c           cnt, data[hdr+7], iPage);</span>
</pre>
</body>
</html>
