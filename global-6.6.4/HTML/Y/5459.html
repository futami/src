<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>pNode</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/185.html#L143237'>pNode</a>            143237 libdb/sqlite3.c     NodeWriter *pNode = &amp;pWriter-&gt;aNodeWriter[iLayer];</span>
<span class='curline'><a href='../S/185.html#L143247'>pNode</a>            143247 libdb/sqlite3.c     nPrefix = fts3PrefixCompress(pNode-&gt;key.a, pNode-&gt;key.n, zTerm, nTerm);</span>
<span class='curline'><a href='../S/185.html#L143252'>pNode</a>            143252 libdb/sqlite3.c     if( pNode-&gt;key.n==0 || (pNode-&gt;block.n + nSpace)&lt;=p-&gt;nNodeSize ){ </span>
<span class='curline'><a href='../S/185.html#L143257'>pNode</a>            143257 libdb/sqlite3.c       Blob *pBlk = &amp;pNode-&gt;block;</span>
<span class='curline'><a href='../S/185.html#L143266'>pNode</a>            143266 libdb/sqlite3.c       blobGrowBuffer(&amp;pNode-&gt;key, nTerm, &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L143269'>pNode</a>            143269 libdb/sqlite3.c         if( pNode-&gt;key.n ){</span>
<span class='curline'><a href='../S/185.html#L143276'>pNode</a>            143276 libdb/sqlite3.c         memcpy(pNode-&gt;key.a, zTerm, nTerm);</span>
<span class='curline'><a href='../S/185.html#L143277'>pNode</a>            143277 libdb/sqlite3.c         pNode-&gt;key.n = nTerm;</span>
<span class='curline'><a href='../S/185.html#L143283'>pNode</a>            143283 libdb/sqlite3.c       rc = fts3WriteSegment(p, pNode-&gt;iBlock, pNode-&gt;block.a, pNode-&gt;block.n);</span>
<span class='curline'><a href='../S/185.html#L143285'>pNode</a>            143285 libdb/sqlite3.c       assert( pNode-&gt;block.nAlloc&gt;=p-&gt;nNodeSize );</span>
<span class='curline'><a href='../S/185.html#L143286'>pNode</a>            143286 libdb/sqlite3.c       pNode-&gt;block.a[0] = (char)iLayer;</span>
<span class='curline'><a href='../S/185.html#L143287'>pNode</a>            143287 libdb/sqlite3.c       pNode-&gt;block.n = 1 + sqlite3Fts3PutVarint(&amp;pNode-&gt;block.a[1], iPtr+1);</span>
<span class='curline'><a href='../S/185.html#L143289'>pNode</a>            143289 libdb/sqlite3.c       iNextPtr = pNode-&gt;iBlock;</span>
<span class='curline'><a href='../S/185.html#L143290'>pNode</a>            143290 libdb/sqlite3.c       pNode-&gt;iBlock++;</span>
<span class='curline'><a href='../S/185.html#L143291'>pNode</a>            143291 libdb/sqlite3.c       pNode-&gt;key.n = 0;</span>
<span class='curline'><a href='../S/185.html#L143327'>pNode</a>            143327 libdb/sqlite3.c   Blob *pNode,                    /* Current node image to append to */</span>
<span class='curline'><a href='../S/185.html#L143341'>pNode</a>            143341 libdb/sqlite3.c   assert( pNode-&gt;n&gt;0 );</span>
<span class='curline'><a href='../S/185.html#L143342'>pNode</a>            143342 libdb/sqlite3.c   assert( (pNode-&gt;a[0]=='\0')==(aDoclist!=0) );</span>
<span class='curline'><a href='../S/185.html#L143353'>pNode</a>            143353 libdb/sqlite3.c     pNode-&gt;n += sqlite3Fts3PutVarint(&amp;pNode-&gt;a[pNode-&gt;n], nPrefix);</span>
<span class='curline'><a href='../S/185.html#L143355'>pNode</a>            143355 libdb/sqlite3.c   pNode-&gt;n += sqlite3Fts3PutVarint(&amp;pNode-&gt;a[pNode-&gt;n], nSuffix);</span>
<span class='curline'><a href='../S/185.html#L143356'>pNode</a>            143356 libdb/sqlite3.c   memcpy(&amp;pNode-&gt;a[pNode-&gt;n], &amp;zTerm[nPrefix], nSuffix);</span>
<span class='curline'><a href='../S/185.html#L143357'>pNode</a>            143357 libdb/sqlite3.c   pNode-&gt;n += nSuffix;</span>
<span class='curline'><a href='../S/185.html#L143360'>pNode</a>            143360 libdb/sqlite3.c     pNode-&gt;n += sqlite3Fts3PutVarint(&amp;pNode-&gt;a[pNode-&gt;n], nDoclist);</span>
<span class='curline'><a href='../S/185.html#L143361'>pNode</a>            143361 libdb/sqlite3.c     memcpy(&amp;pNode-&gt;a[pNode-&gt;n], aDoclist, nDoclist);</span>
<span class='curline'><a href='../S/185.html#L143362'>pNode</a>            143362 libdb/sqlite3.c     pNode-&gt;n += nDoclist;</span>
<span class='curline'><a href='../S/185.html#L143365'>pNode</a>            143365 libdb/sqlite3.c   assert( pNode-&gt;n&lt;=pNode-&gt;nAlloc );</span>
<span class='curline'><a href='../S/185.html#L143476'>pNode</a>            143476 libdb/sqlite3.c     NodeWriter *pNode = &amp;pWriter-&gt;aNodeWriter[iRoot];</span>
<span class='curline'><a href='../S/185.html#L143477'>pNode</a>            143477 libdb/sqlite3.c     if( pNode-&gt;block.n&gt;0 ) break;</span>
<span class='curline'><a href='../S/185.html#L143478'>pNode</a>            143478 libdb/sqlite3.c     assert( *pRc || pNode-&gt;block.nAlloc==0 );</span>
<span class='curline'><a href='../S/185.html#L143479'>pNode</a>            143479 libdb/sqlite3.c     assert( *pRc || pNode-&gt;key.nAlloc==0 );</span>
<span class='curline'><a href='../S/185.html#L143480'>pNode</a>            143480 libdb/sqlite3.c     sqlite3_free(pNode-&gt;block.a);</span>
<span class='curline'><a href='../S/185.html#L143481'>pNode</a>            143481 libdb/sqlite3.c     sqlite3_free(pNode-&gt;key.a);</span>
<span class='curline'><a href='../S/185.html#L143517'>pNode</a>            143517 libdb/sqlite3.c     NodeWriter *pNode = &amp;pWriter-&gt;aNodeWriter[i];</span>
<span class='curline'><a href='../S/185.html#L143518'>pNode</a>            143518 libdb/sqlite3.c     if( pNode-&gt;block.n&gt;0 &amp;&amp; rc==SQLITE_OK ){</span>
<span class='curline'><a href='../S/185.html#L143519'>pNode</a>            143519 libdb/sqlite3.c       rc = fts3WriteSegment(p, pNode-&gt;iBlock, pNode-&gt;block.a, pNode-&gt;block.n);</span>
<span class='curline'><a href='../S/185.html#L143521'>pNode</a>            143521 libdb/sqlite3.c     sqlite3_free(pNode-&gt;block.a);</span>
<span class='curline'><a href='../S/185.html#L143522'>pNode</a>            143522 libdb/sqlite3.c     sqlite3_free(pNode-&gt;key.a);</span>
<span class='curline'><a href='../S/185.html#L143676'>pNode</a>            143676 libdb/sqlite3.c       NodeWriter *pNode;</span>
<span class='curline'><a href='../S/185.html#L143688'>pNode</a>            143688 libdb/sqlite3.c       pNode = &amp;pWriter-&gt;aNodeWriter[nHeight];</span>
<span class='curline'><a href='../S/185.html#L143689'>pNode</a>            143689 libdb/sqlite3.c       pNode-&gt;iBlock = pWriter-&gt;iStart + pWriter-&gt;nLeafEst*nHeight;</span>
<span class='curline'><a href='../S/185.html#L143690'>pNode</a>            143690 libdb/sqlite3.c       blobGrowBuffer(&amp;pNode-&gt;block, MAX(nRoot, p-&gt;nNodeSize), &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L143692'>pNode</a>            143692 libdb/sqlite3.c         memcpy(pNode-&gt;block.a, aRoot, nRoot);</span>
<span class='curline'><a href='../S/185.html#L143693'>pNode</a>            143693 libdb/sqlite3.c         pNode-&gt;block.n = nRoot;</span>
<span class='curline'><a href='../S/185.html#L143698'>pNode</a>            143698 libdb/sqlite3.c         pNode = &amp;pWriter-&gt;aNodeWriter[i];</span>
<span class='curline'><a href='../S/185.html#L143700'>pNode</a>            143700 libdb/sqlite3.c         rc = nodeReaderInit(&amp;reader, pNode-&gt;block.a, pNode-&gt;block.n);</span>
<span class='curline'><a href='../S/185.html#L143702'>pNode</a>            143702 libdb/sqlite3.c         blobGrowBuffer(&amp;pNode-&gt;key, reader.term.n, &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L143704'>pNode</a>            143704 libdb/sqlite3.c           memcpy(pNode-&gt;key.a, reader.term.a, reader.term.n);</span>
<span class='curline'><a href='../S/185.html#L143705'>pNode</a>            143705 libdb/sqlite3.c           pNode-&gt;key.n = reader.term.n;</span>
<span class='curline'><a href='../S/185.html#L143709'>pNode</a>            143709 libdb/sqlite3.c             pNode = &amp;pWriter-&gt;aNodeWriter[i-1];</span>
<span class='curline'><a href='../S/185.html#L143710'>pNode</a>            143710 libdb/sqlite3.c             pNode-&gt;iBlock = reader.iChild;</span>
<span class='curline'><a href='../S/185.html#L143712'>pNode</a>            143712 libdb/sqlite3.c             blobGrowBuffer(&amp;pNode-&gt;block, MAX(nBlock, p-&gt;nNodeSize), &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L143714'>pNode</a>            143714 libdb/sqlite3.c               memcpy(pNode-&gt;block.a, aBlock, nBlock);</span>
<span class='curline'><a href='../S/185.html#L143715'>pNode</a>            143715 libdb/sqlite3.c               pNode-&gt;block.n = nBlock;</span>
<span class='curline'><a href='../S/185.html#L143930'>pNode</a>            143930 libdb/sqlite3.c static void fts3StartNode(Blob *pNode, int iHeight, sqlite3_int64 iChild){</span>
<span class='curline'><a href='../S/185.html#L143931'>pNode</a>            143931 libdb/sqlite3.c   pNode-&gt;a[0] = (char)iHeight;</span>
<span class='curline'><a href='../S/185.html#L143933'>pNode</a>            143933 libdb/sqlite3.c     assert( pNode-&gt;nAlloc&gt;=1+sqlite3Fts3VarintLen(iChild) );</span>
<span class='curline'><a href='../S/185.html#L143934'>pNode</a>            143934 libdb/sqlite3.c     pNode-&gt;n = 1 + sqlite3Fts3PutVarint(&amp;pNode-&gt;a[1], iChild);</span>
<span class='curline'><a href='../S/185.html#L143936'>pNode</a>            143936 libdb/sqlite3.c     assert( pNode-&gt;nAlloc&gt;=1 );</span>
<span class='curline'><a href='../S/185.html#L143937'>pNode</a>            143937 libdb/sqlite3.c     pNode-&gt;n = 1;</span>
<span class='curline'><a href='../S/185.html#L147705'>pNode</a>            147705 libdb/sqlite3.c #define NCELL(pNode) readInt16(&amp;(pNode)-&gt;zData[2])</span>
<span class='curline'><a href='../S/185.html#L147865'>pNode</a>            147865 libdb/sqlite3.c static void nodeHashInsert(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L147867'>pNode</a>            147867 libdb/sqlite3.c   assert( pNode-&gt;pNext==0 );</span>
<span class='curline'><a href='../S/185.html#L147868'>pNode</a>            147868 libdb/sqlite3.c   iHash = nodeHash(pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L147869'>pNode</a>            147869 libdb/sqlite3.c   pNode-&gt;pNext = pRtree-&gt;aHash[iHash];</span>
<span class='curline'><a href='../S/185.html#L147870'>pNode</a>            147870 libdb/sqlite3.c   pRtree-&gt;aHash[iHash] = pNode;</span>
<span class='curline'><a href='../S/185.html#L147876'>pNode</a>            147876 libdb/sqlite3.c static void nodeHashDelete(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L147878'>pNode</a>            147878 libdb/sqlite3.c   if( pNode-&gt;iNode!=0 ){</span>
<span class='curline'><a href='../S/185.html#L147879'>pNode</a>            147879 libdb/sqlite3.c     pp = &amp;pRtree-&gt;aHash[nodeHash(pNode-&gt;iNode)];</span>
<span class='curline'><a href='../S/185.html#L147880'>pNode</a>            147880 libdb/sqlite3.c     for( ; (*pp)!=pNode; pp = &amp;(*pp)-&gt;pNext){ assert(*pp); }</span>
<span class='curline'><a href='../S/185.html#L147881'>pNode</a>            147881 libdb/sqlite3.c     *pp = pNode-&gt;pNext;</span>
<span class='curline'><a href='../S/185.html#L147882'>pNode</a>            147882 libdb/sqlite3.c     pNode-&gt;pNext = 0;</span>
<span class='curline'><a href='../S/185.html#L147893'>pNode</a>            147893 libdb/sqlite3.c   RtreeNode *pNode;</span>
<span class='curline'><a href='../S/185.html#L147894'>pNode</a>            147894 libdb/sqlite3.c   pNode = (RtreeNode *)sqlite3_malloc(sizeof(RtreeNode) + pRtree-&gt;iNodeSize);</span>
<span class='curline'><a href='../S/185.html#L147895'>pNode</a>            147895 libdb/sqlite3.c   if( pNode ){</span>
<span class='curline'><a href='../S/185.html#L147896'>pNode</a>            147896 libdb/sqlite3.c     memset(pNode, 0, sizeof(RtreeNode) + pRtree-&gt;iNodeSize);</span>
<span class='curline'><a href='../S/185.html#L147897'>pNode</a>            147897 libdb/sqlite3.c     pNode-&gt;zData = (u8 *)&amp;pNode[1];</span>
<span class='curline'><a href='../S/185.html#L147898'>pNode</a>            147898 libdb/sqlite3.c     pNode-&gt;nRef = 1;</span>
<span class='curline'><a href='../S/185.html#L147899'>pNode</a>            147899 libdb/sqlite3.c     pNode-&gt;pParent = pParent;</span>
<span class='curline'><a href='../S/185.html#L147900'>pNode</a>            147900 libdb/sqlite3.c     pNode-&gt;isDirty = 1;</span>
<span class='curline'><a href='../S/185.html#L147903'>pNode</a>            147903 libdb/sqlite3.c   return pNode;</span>
<span class='curline'><a href='../S/185.html#L147917'>pNode</a>            147917 libdb/sqlite3.c   RtreeNode *pNode;</span>
<span class='curline'><a href='../S/185.html#L147922'>pNode</a>            147922 libdb/sqlite3.c   if( (pNode = nodeHashLookup(pRtree, iNode)) ){</span>
<span class='curline'><a href='../S/185.html#L147923'>pNode</a>            147923 libdb/sqlite3.c     assert( !pParent || !pNode-&gt;pParent || pNode-&gt;pParent==pParent );</span>
<span class='curline'><a href='../S/185.html#L147924'>pNode</a>            147924 libdb/sqlite3.c     if( pParent &amp;&amp; !pNode-&gt;pParent ){</span>
<span class='curline'><a href='../S/185.html#L147926'>pNode</a>            147926 libdb/sqlite3.c       pNode-&gt;pParent = pParent;</span>
<span class='curline'><a href='../S/185.html#L147928'>pNode</a>            147928 libdb/sqlite3.c     pNode-&gt;nRef++;</span>
<span class='curline'><a href='../S/185.html#L147929'>pNode</a>            147929 libdb/sqlite3.c     *ppNode = pNode;</span>
<span class='curline'><a href='../S/185.html#L147938'>pNode</a>            147938 libdb/sqlite3.c       pNode = (RtreeNode *)sqlite3_malloc(sizeof(RtreeNode)+pRtree-&gt;iNodeSize);</span>
<span class='curline'><a href='../S/185.html#L147939'>pNode</a>            147939 libdb/sqlite3.c       if( !pNode ){</span>
<span class='curline'><a href='../S/185.html#L147942'>pNode</a>            147942 libdb/sqlite3.c         pNode-&gt;pParent = pParent;</span>
<span class='curline'><a href='../S/185.html#L147943'>pNode</a>            147943 libdb/sqlite3.c         pNode-&gt;zData = (u8 *)&amp;pNode[1];</span>
<span class='curline'><a href='../S/185.html#L147944'>pNode</a>            147944 libdb/sqlite3.c         pNode-&gt;nRef = 1;</span>
<span class='curline'><a href='../S/185.html#L147945'>pNode</a>            147945 libdb/sqlite3.c         pNode-&gt;iNode = iNode;</span>
<span class='curline'><a href='../S/185.html#L147946'>pNode</a>            147946 libdb/sqlite3.c         pNode-&gt;isDirty = 0;</span>
<span class='curline'><a href='../S/185.html#L147947'>pNode</a>            147947 libdb/sqlite3.c         pNode-&gt;pNext = 0;</span>
<span class='curline'><a href='../S/185.html#L147948'>pNode</a>            147948 libdb/sqlite3.c         memcpy(pNode-&gt;zData, zBlob, pRtree-&gt;iNodeSize);</span>
<span class='curline'><a href='../S/185.html#L147962'>pNode</a>            147962 libdb/sqlite3.c   if( pNode &amp;&amp; iNode==1 ){</span>
<span class='curline'><a href='../S/185.html#L147963'>pNode</a>            147963 libdb/sqlite3.c     pRtree-&gt;iDepth = readInt16(pNode-&gt;zData);</span>
<span class='curline'><a href='../S/185.html#L147973'>pNode</a>            147973 libdb/sqlite3.c   if( pNode &amp;&amp; rc==SQLITE_OK ){</span>
<span class='curline'><a href='../S/185.html#L147974'>pNode</a>            147974 libdb/sqlite3.c     if( NCELL(pNode)&gt;((pRtree-&gt;iNodeSize-4)/pRtree-&gt;nBytesPerCell) ){</span>
<span class='curline'><a href='../S/185.html#L147980'>pNode</a>            147980 libdb/sqlite3.c     if( pNode!=0 ){</span>
<span class='curline'><a href='../S/185.html#L147981'>pNode</a>            147981 libdb/sqlite3.c       nodeHashInsert(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L147985'>pNode</a>            147985 libdb/sqlite3.c     *ppNode = pNode;</span>
<span class='curline'><a href='../S/185.html#L147987'>pNode</a>            147987 libdb/sqlite3.c     sqlite3_free(pNode);</span>
<span class='curline'><a href='../S/185.html#L147999'>pNode</a>            147999 libdb/sqlite3.c   RtreeNode *pNode,          /* The node into which the cell is to be written */</span>
<span class='curline'><a href='../S/185.html#L148004'>pNode</a>            148004 libdb/sqlite3.c   u8 *p = &amp;pNode-&gt;zData[4 + pRtree-&gt;nBytesPerCell*iCell];</span>
<span class='curline'><a href='../S/185.html#L148009'>pNode</a>            148009 libdb/sqlite3.c   pNode-&gt;isDirty = 1;</span>
<span class='curline'><a href='../S/185.html#L148015'>pNode</a>            148015 libdb/sqlite3.c static void nodeDeleteCell(Rtree *pRtree, RtreeNode *pNode, int iCell){</span>
<span class='curline'><a href='../S/185.html#L148016'>pNode</a>            148016 libdb/sqlite3.c   u8 *pDst = &amp;pNode-&gt;zData[4 + pRtree-&gt;nBytesPerCell*iCell];</span>
<span class='curline'><a href='../S/185.html#L148018'>pNode</a>            148018 libdb/sqlite3.c   int nByte = (NCELL(pNode) - iCell - 1) * pRtree-&gt;nBytesPerCell;</span>
<span class='curline'><a href='../S/185.html#L148020'>pNode</a>            148020 libdb/sqlite3.c   writeInt16(&amp;pNode-&gt;zData[2], NCELL(pNode)-1);</span>
<span class='curline'><a href='../S/185.html#L148021'>pNode</a>            148021 libdb/sqlite3.c   pNode-&gt;isDirty = 1;</span>
<span class='curline'><a href='../S/185.html#L148032'>pNode</a>            148032 libdb/sqlite3.c   RtreeNode *pNode,             /* Write new cell into this node */</span>
<span class='curline'><a href='../S/185.html#L148039'>pNode</a>            148039 libdb/sqlite3.c   nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L148043'>pNode</a>            148043 libdb/sqlite3.c     nodeOverwriteCell(pRtree, pNode, pCell, nCell);</span>
<span class='curline'><a href='../S/185.html#L148044'>pNode</a>            148044 libdb/sqlite3.c     writeInt16(&amp;pNode-&gt;zData[2], nCell+1);</span>
<span class='curline'><a href='../S/185.html#L148045'>pNode</a>            148045 libdb/sqlite3.c     pNode-&gt;isDirty = 1;</span>
<span class='curline'><a href='../S/185.html#L148054'>pNode</a>            148054 libdb/sqlite3.c static int nodeWrite(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L148056'>pNode</a>            148056 libdb/sqlite3.c   if( pNode-&gt;isDirty ){</span>
<span class='curline'><a href='../S/185.html#L148058'>pNode</a>            148058 libdb/sqlite3.c     if( pNode-&gt;iNode ){</span>
<span class='curline'><a href='../S/185.html#L148059'>pNode</a>            148059 libdb/sqlite3.c       sqlite3_bind_int64(p, 1, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L148063'>pNode</a>            148063 libdb/sqlite3.c     sqlite3_bind_blob(p, 2, pNode-&gt;zData, pRtree-&gt;iNodeSize, SQLITE_STATIC);</span>
<span class='curline'><a href='../S/185.html#L148065'>pNode</a>            148065 libdb/sqlite3.c     pNode-&gt;isDirty = 0;</span>
<span class='curline'><a href='../S/185.html#L148067'>pNode</a>            148067 libdb/sqlite3.c     if( pNode-&gt;iNode==0 &amp;&amp; rc==SQLITE_OK ){</span>
<span class='curline'><a href='../S/185.html#L148068'>pNode</a>            148068 libdb/sqlite3.c       pNode-&gt;iNode = sqlite3_last_insert_rowid(pRtree-&gt;db);</span>
<span class='curline'><a href='../S/185.html#L148069'>pNode</a>            148069 libdb/sqlite3.c       nodeHashInsert(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L148079'>pNode</a>            148079 libdb/sqlite3.c static int nodeRelease(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L148081'>pNode</a>            148081 libdb/sqlite3.c   if( pNode ){</span>
<span class='curline'><a href='../S/185.html#L148082'>pNode</a>            148082 libdb/sqlite3.c     assert( pNode-&gt;nRef&gt;0 );</span>
<span class='curline'><a href='../S/185.html#L148083'>pNode</a>            148083 libdb/sqlite3.c     pNode-&gt;nRef--;</span>
<span class='curline'><a href='../S/185.html#L148084'>pNode</a>            148084 libdb/sqlite3.c     if( pNode-&gt;nRef==0 ){</span>
<span class='curline'><a href='../S/185.html#L148085'>pNode</a>            148085 libdb/sqlite3.c       if( pNode-&gt;iNode==1 ){</span>
<span class='curline'><a href='../S/185.html#L148088'>pNode</a>            148088 libdb/sqlite3.c       if( pNode-&gt;pParent ){</span>
<span class='curline'><a href='../S/185.html#L148089'>pNode</a>            148089 libdb/sqlite3.c         rc = nodeRelease(pRtree, pNode-&gt;pParent);</span>
<span class='curline'><a href='../S/185.html#L148092'>pNode</a>            148092 libdb/sqlite3.c         rc = nodeWrite(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L148094'>pNode</a>            148094 libdb/sqlite3.c       nodeHashDelete(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L148095'>pNode</a>            148095 libdb/sqlite3.c       sqlite3_free(pNode);</span>
<span class='curline'><a href='../S/185.html#L148108'>pNode</a>            148108 libdb/sqlite3.c   RtreeNode *pNode,    /* The node from which to extract the ID */</span>
<span class='curline'><a href='../S/185.html#L148111'>pNode</a>            148111 libdb/sqlite3.c   assert( iCell&lt;NCELL(pNode) );</span>
<span class='curline'><a href='../S/185.html#L148112'>pNode</a>            148112 libdb/sqlite3.c   return readInt64(&amp;pNode-&gt;zData[4 + pRtree-&gt;nBytesPerCell*iCell]);</span>
<span class='curline'><a href='../S/185.html#L148120'>pNode</a>            148120 libdb/sqlite3.c   RtreeNode *pNode,            /* The node from which to extract a coordinate */</span>
<span class='curline'><a href='../S/185.html#L148125'>pNode</a>            148125 libdb/sqlite3.c   readCoord(&amp;pNode-&gt;zData[12 + pRtree-&gt;nBytesPerCell*iCell + 4*iCoord], pCoord);</span>
<span class='curline'><a href='../S/185.html#L148134'>pNode</a>            148134 libdb/sqlite3.c   RtreeNode *pNode,            /* The node containing the cell to be read */</span>
<span class='curline'><a href='../S/185.html#L148141'>pNode</a>            148141 libdb/sqlite3.c   pCell-&gt;iRowid = nodeGetRowid(pRtree, pNode, iCell);</span>
<span class='curline'><a href='../S/185.html#L148142'>pNode</a>            148142 libdb/sqlite3.c   pData = pNode-&gt;zData + (12 + pRtree-&gt;nBytesPerCell*iCell);</span>
<span class='curline'><a href='../S/185.html#L148471'>pNode</a>            148471 libdb/sqlite3.c   RtreeNode *pNode, </span>
<span class='curline'><a href='../S/185.html#L148476'>pNode</a>            148476 libdb/sqlite3.c   int nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L148479'>pNode</a>            148479 libdb/sqlite3.c     if( nodeGetRowid(pRtree, pNode, ii)==iRowid ){</span>
<span class='curline'><a href='../S/185.html#L148491'>pNode</a>            148491 libdb/sqlite3.c static int nodeParentIndex(Rtree *pRtree, RtreeNode *pNode, int *piIndex){</span>
<span class='curline'><a href='../S/185.html#L148492'>pNode</a>            148492 libdb/sqlite3.c   RtreeNode *pParent = pNode-&gt;pParent;</span>
<span class='curline'><a href='../S/185.html#L148494'>pNode</a>            148494 libdb/sqlite3.c     return nodeRowidIndex(pRtree, pParent, pNode-&gt;iNode, piIndex);</span>
<span class='curline'><a href='../S/185.html#L148721'>pNode</a>            148721 libdb/sqlite3.c   RtreeNode *pNode;</span>
<span class='curline'><a href='../S/185.html#L148732'>pNode</a>            148732 libdb/sqlite3.c     pNode = rtreeNodeOfFirstSearchPoint(pCur, &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L148734'>pNode</a>            148734 libdb/sqlite3.c     nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L148738'>pNode</a>            148738 libdb/sqlite3.c       u8 *pCellData = pNode-&gt;zData + (4+pRtree-&gt;nBytesPerCell*p-&gt;iCell);</span>
<span class='curline'><a href='../S/185.html#L148806'>pNode</a>            148806 libdb/sqlite3.c   RtreeNode *pNode = rtreeNodeOfFirstSearchPoint(pCsr, &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L148808'>pNode</a>            148808 libdb/sqlite3.c     *pRowid = nodeGetRowid(RTREE_OF_CURSOR(pCsr), pNode, p-&gt;iCell);</span>
<span class='curline'><a href='../S/185.html#L148822'>pNode</a>            148822 libdb/sqlite3.c   RtreeNode *pNode = rtreeNodeOfFirstSearchPoint(pCsr, &amp;rc);</span>
<span class='curline'><a href='../S/185.html#L148827'>pNode</a>            148827 libdb/sqlite3.c     sqlite3_result_int64(ctx, nodeGetRowid(pRtree, pNode, p-&gt;iCell));</span>
<span class='curline'><a href='../S/185.html#L148830'>pNode</a>            148830 libdb/sqlite3.c     nodeGetCoord(pRtree, pNode, p-&gt;iCell, i-1, &amp;c);</span>
<span class='curline'><a href='../S/185.html#L149254'>pNode</a>            149254 libdb/sqlite3.c   RtreeNode *pNode;</span>
<span class='curline'><a href='../S/185.html#L149255'>pNode</a>            149255 libdb/sqlite3.c   rc = nodeAcquire(pRtree, 1, 0, &amp;pNode);</span>
<span class='curline'><a href='../S/185.html#L149264'>pNode</a>            149264 libdb/sqlite3.c     int nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L149278'>pNode</a>            149278 libdb/sqlite3.c       nodeGetCell(pRtree, pNode, iCell, &amp;cell);</span>
<span class='curline'><a href='../S/185.html#L149292'>pNode</a>            149292 libdb/sqlite3.c     rc = nodeAcquire(pRtree, iBest, pNode, &amp;pChild);</span>
<span class='curline'><a href='../S/185.html#L149293'>pNode</a>            149293 libdb/sqlite3.c     nodeRelease(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149294'>pNode</a>            149294 libdb/sqlite3.c     pNode = pChild;</span>
<span class='curline'><a href='../S/185.html#L149297'>pNode</a>            149297 libdb/sqlite3.c   *ppLeaf = pNode;</span>
<span class='curline'><a href='../S/185.html#L149308'>pNode</a>            149308 libdb/sqlite3.c   RtreeNode *pNode,                 /* Adjust ancestry of this node. */</span>
<span class='curline'><a href='../S/185.html#L149311'>pNode</a>            149311 libdb/sqlite3.c   RtreeNode *p = pNode;</span>
<span class='curline'><a href='../S/185.html#L149598'>pNode</a>            149598 libdb/sqlite3.c   RtreeNode *pNode, </span>
<span class='curline'><a href='../S/185.html#L149607'>pNode</a>            149607 libdb/sqlite3.c       nodeReference(pNode);</span>
<span class='curline'><a href='../S/185.html#L149608'>pNode</a>            149608 libdb/sqlite3.c       pChild-&gt;pParent = pNode;</span>
<span class='curline'><a href='../S/185.html#L149611'>pNode</a>            149611 libdb/sqlite3.c   return xSetMapping(pRtree, iRowid, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L149616'>pNode</a>            149616 libdb/sqlite3.c   RtreeNode *pNode,</span>
<span class='curline'><a href='../S/185.html#L149624'>pNode</a>            149624 libdb/sqlite3.c   int nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L149645'>pNode</a>            149645 libdb/sqlite3.c     nodeGetCell(pRtree, pNode, i, &amp;aCell[i]);</span>
<span class='curline'><a href='../S/185.html#L149647'>pNode</a>            149647 libdb/sqlite3.c   nodeZero(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149651'>pNode</a>            149651 libdb/sqlite3.c   if( pNode-&gt;iNode==1 ){</span>
<span class='curline'><a href='../S/185.html#L149652'>pNode</a>            149652 libdb/sqlite3.c     pRight = nodeNew(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149653'>pNode</a>            149653 libdb/sqlite3.c     pLeft = nodeNew(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149655'>pNode</a>            149655 libdb/sqlite3.c     pNode-&gt;isDirty = 1;</span>
<span class='curline'><a href='../S/185.html#L149656'>pNode</a>            149656 libdb/sqlite3.c     writeInt16(pNode-&gt;zData, pRtree-&gt;iDepth);</span>
<span class='curline'><a href='../S/185.html#L149658'>pNode</a>            149658 libdb/sqlite3.c     pLeft = pNode;</span>
<span class='curline'><a href='../S/185.html#L149691'>pNode</a>            149691 libdb/sqlite3.c   if( pNode-&gt;iNode==1 ){</span>
<span class='curline'><a href='../S/185.html#L149722'>pNode</a>            149722 libdb/sqlite3.c   if( pNode-&gt;iNode==1 ){</span>
<span class='curline'><a href='../S/185.html#L149793'>pNode</a>            149793 libdb/sqlite3.c static int removeNode(Rtree *pRtree, RtreeNode *pNode, int iHeight){</span>
<span class='curline'><a href='../S/185.html#L149799'>pNode</a>            149799 libdb/sqlite3.c   assert( pNode-&gt;nRef==1 );</span>
<span class='curline'><a href='../S/185.html#L149802'>pNode</a>            149802 libdb/sqlite3.c   rc = nodeParentIndex(pRtree, pNode, &amp;iCell);</span>
<span class='curline'><a href='../S/185.html#L149804'>pNode</a>            149804 libdb/sqlite3.c     pParent = pNode-&gt;pParent;</span>
<span class='curline'><a href='../S/185.html#L149805'>pNode</a>            149805 libdb/sqlite3.c     pNode-&gt;pParent = 0;</span>
<span class='curline'><a href='../S/185.html#L149817'>pNode</a>            149817 libdb/sqlite3.c   sqlite3_bind_int64(pRtree-&gt;pDeleteNode, 1, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L149824'>pNode</a>            149824 libdb/sqlite3.c   sqlite3_bind_int64(pRtree-&gt;pDeleteParent, 1, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L149833'>pNode</a>            149833 libdb/sqlite3.c   nodeHashDelete(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149834'>pNode</a>            149834 libdb/sqlite3.c   pNode-&gt;iNode = iHeight;</span>
<span class='curline'><a href='../S/185.html#L149835'>pNode</a>            149835 libdb/sqlite3.c   pNode-&gt;pNext = pRtree-&gt;pDeleted;</span>
<span class='curline'><a href='../S/185.html#L149836'>pNode</a>            149836 libdb/sqlite3.c   pNode-&gt;nRef++;</span>
<span class='curline'><a href='../S/185.html#L149837'>pNode</a>            149837 libdb/sqlite3.c   pRtree-&gt;pDeleted = pNode;</span>
<span class='curline'><a href='../S/185.html#L149842'>pNode</a>            149842 libdb/sqlite3.c static int fixBoundingBox(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L149843'>pNode</a>            149843 libdb/sqlite3.c   RtreeNode *pParent = pNode-&gt;pParent;</span>
<span class='curline'><a href='../S/185.html#L149847'>pNode</a>            149847 libdb/sqlite3.c     int nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L149849'>pNode</a>            149849 libdb/sqlite3.c     nodeGetCell(pRtree, pNode, 0, &amp;box);</span>
<span class='curline'><a href='../S/185.html#L149852'>pNode</a>            149852 libdb/sqlite3.c       nodeGetCell(pRtree, pNode, ii, &amp;cell);</span>
<span class='curline'><a href='../S/185.html#L149855'>pNode</a>            149855 libdb/sqlite3.c     box.iRowid = pNode-&gt;iNode;</span>
<span class='curline'><a href='../S/185.html#L149856'>pNode</a>            149856 libdb/sqlite3.c     rc = nodeParentIndex(pRtree, pNode, &amp;ii);</span>
<span class='curline'><a href='../S/185.html#L149869'>pNode</a>            149869 libdb/sqlite3.c static int deleteCell(Rtree *pRtree, RtreeNode *pNode, int iCell, int iHeight){</span>
<span class='curline'><a href='../S/185.html#L149873'>pNode</a>            149873 libdb/sqlite3.c   if( SQLITE_OK!=(rc = fixLeafParent(pRtree, pNode)) ){</span>
<span class='curline'><a href='../S/185.html#L149880'>pNode</a>            149880 libdb/sqlite3.c   nodeDeleteCell(pRtree, pNode, iCell);</span>
<span class='curline'><a href='../S/185.html#L149887'>pNode</a>            149887 libdb/sqlite3.c   pParent = pNode-&gt;pParent;</span>
<span class='curline'><a href='../S/185.html#L149888'>pNode</a>            149888 libdb/sqlite3.c   assert( pParent || pNode-&gt;iNode==1 );</span>
<span class='curline'><a href='../S/185.html#L149890'>pNode</a>            149890 libdb/sqlite3.c     if( NCELL(pNode)&lt;RTREE_MINCELLS(pRtree) ){</span>
<span class='curline'><a href='../S/185.html#L149891'>pNode</a>            149891 libdb/sqlite3.c       rc = removeNode(pRtree, pNode, iHeight);</span>
<span class='curline'><a href='../S/185.html#L149893'>pNode</a>            149893 libdb/sqlite3.c       rc = fixBoundingBox(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149902'>pNode</a>            149902 libdb/sqlite3.c   RtreeNode *pNode, </span>
<span class='curline'><a href='../S/185.html#L149919'>pNode</a>            149919 libdb/sqlite3.c   nCell = NCELL(pNode)+1;</span>
<span class='curline'><a href='../S/185.html#L149942'>pNode</a>            149942 libdb/sqlite3.c       nodeGetCell(pRtree, pNode, ii, &amp;aCell[ii]);</span>
<span class='curline'><a href='../S/185.html#L149964'>pNode</a>            149964 libdb/sqlite3.c   nodeZero(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L149968'>pNode</a>            149968 libdb/sqlite3.c     nodeInsertCell(pRtree, pNode, p);</span>
<span class='curline'><a href='../S/185.html#L149971'>pNode</a>            149971 libdb/sqlite3.c         rc = rowidWrite(pRtree, p-&gt;iRowid, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L149973'>pNode</a>            149973 libdb/sqlite3.c         rc = parentWrite(pRtree, p-&gt;iRowid, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L149978'>pNode</a>            149978 libdb/sqlite3.c     rc = fixBoundingBox(pRtree, pNode);</span>
<span class='curline'><a href='../S/185.html#L150007'>pNode</a>            150007 libdb/sqlite3.c   RtreeNode *pNode,</span>
<span class='curline'><a href='../S/185.html#L150016'>pNode</a>            150016 libdb/sqlite3.c       nodeReference(pNode);</span>
<span class='curline'><a href='../S/185.html#L150017'>pNode</a>            150017 libdb/sqlite3.c       pChild-&gt;pParent = pNode;</span>
<span class='curline'><a href='../S/185.html#L150020'>pNode</a>            150020 libdb/sqlite3.c   if( nodeInsertCell(pRtree, pNode, pCell) ){</span>
<span class='curline'><a href='../S/185.html#L150021'>pNode</a>            150021 libdb/sqlite3.c     if( iHeight&lt;=pRtree-&gt;iReinsertHeight || pNode-&gt;iNode==1){</span>
<span class='curline'><a href='../S/185.html#L150022'>pNode</a>            150022 libdb/sqlite3.c       rc = SplitNode(pRtree, pNode, pCell, iHeight);</span>
<span class='curline'><a href='../S/185.html#L150025'>pNode</a>            150025 libdb/sqlite3.c       rc = Reinsert(pRtree, pNode, pCell, iHeight);</span>
<span class='curline'><a href='../S/185.html#L150028'>pNode</a>            150028 libdb/sqlite3.c     rc = AdjustTree(pRtree, pNode, pCell);</span>
<span class='curline'><a href='../S/185.html#L150031'>pNode</a>            150031 libdb/sqlite3.c         rc = rowidWrite(pRtree, pCell-&gt;iRowid, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L150033'>pNode</a>            150033 libdb/sqlite3.c         rc = parentWrite(pRtree, pCell-&gt;iRowid, pNode-&gt;iNode);</span>
<span class='curline'><a href='../S/185.html#L150040'>pNode</a>            150040 libdb/sqlite3.c static int reinsertNodeContent(Rtree *pRtree, RtreeNode *pNode){</span>
<span class='curline'><a href='../S/185.html#L150043'>pNode</a>            150043 libdb/sqlite3.c   int nCell = NCELL(pNode);</span>
<span class='curline'><a href='../S/185.html#L150048'>pNode</a>            150048 libdb/sqlite3.c     nodeGetCell(pRtree, pNode, ii, &amp;cell);</span>
<span class='curline'><a href='../S/185.html#L150053'>pNode</a>            150053 libdb/sqlite3.c     rc = ChooseLeaf(pRtree, &amp;cell, (int)pNode-&gt;iNode, &amp;pInsert);</span>
<span class='curline'><a href='../S/185.html#L150056'>pNode</a>            150056 libdb/sqlite3.c       rc = rtreeInsertCell(pRtree, pInsert, &amp;cell, (int)pNode-&gt;iNode);</span>
</pre>
</body>
</html>
