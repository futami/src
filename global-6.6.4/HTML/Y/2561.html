<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>eFileLock</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/185.html#L24779'>eFileLock</a>        24779 libdb/sqlite3.c   unsigned char eFileLock;            /* The type of lock held on this fd */</span>
<span class='curline'><a href='../S/185.html#L25446'>eFileLock</a>        25446 libdb/sqlite3.c static const char *azFileLock(int eFileLock){</span>
<span class='curline'><a href='../S/185.html#L25447'>eFileLock</a>        25447 libdb/sqlite3.c   switch( eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L25871'>eFileLock</a>        25871 libdb/sqlite3.c   unsigned char eFileLock;        /* One of SHARED_LOCK, RESERVED_LOCK etc. */</span>
<span class='curline'><a href='../S/185.html#L26189'>eFileLock</a>        26189 libdb/sqlite3.c   if( pFile-&gt;pInode-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26289'>eFileLock</a>        26289 libdb/sqlite3.c static int unixLock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/185.html#L26336'>eFileLock</a>        26336 libdb/sqlite3.c       azFileLock(eFileLock), azFileLock(pFile-&gt;eFileLock),</span>
<span class='curline'><a href='../S/185.html#L26337'>eFileLock</a>        26337 libdb/sqlite3.c       azFileLock(pFile-&gt;pInode-&gt;eFileLock), pFile-&gt;pInode-&gt;nShared , getpid()));</span>
<span class='curline'><a href='../S/185.html#L26343'>eFileLock</a>        26343 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;=eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L26345'>eFileLock</a>        26345 libdb/sqlite3.c             azFileLock(eFileLock)));</span>
<span class='curline'><a href='../S/185.html#L26354'>eFileLock</a>        26354 libdb/sqlite3.c   assert( pFile-&gt;eFileLock!=NO_LOCK || eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26355'>eFileLock</a>        26355 libdb/sqlite3.c   assert( eFileLock!=PENDING_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26356'>eFileLock</a>        26356 libdb/sqlite3.c   assert( eFileLock!=RESERVED_LOCK || pFile-&gt;eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26366'>eFileLock</a>        26366 libdb/sqlite3.c   if( (pFile-&gt;eFileLock!=pInode-&gt;eFileLock &amp;&amp; </span>
<span class='curline'><a href='../S/185.html#L26367'>eFileLock</a>        26367 libdb/sqlite3.c           (pInode-&gt;eFileLock&gt;=PENDING_LOCK || eFileLock&gt;SHARED_LOCK))</span>
<span class='curline'><a href='../S/185.html#L26377'>eFileLock</a>        26377 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK &amp;&amp; </span>
<span class='curline'><a href='../S/185.html#L26378'>eFileLock</a>        26378 libdb/sqlite3.c       (pInode-&gt;eFileLock==SHARED_LOCK || pInode-&gt;eFileLock==RESERVED_LOCK) ){</span>
<span class='curline'><a href='../S/185.html#L26379'>eFileLock</a>        26379 libdb/sqlite3.c     assert( eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26380'>eFileLock</a>        26380 libdb/sqlite3.c     assert( pFile-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/185.html#L26382'>eFileLock</a>        26382 libdb/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26395'>eFileLock</a>        26395 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK </span>
<span class='curline'><a href='../S/185.html#L26396'>eFileLock</a>        26396 libdb/sqlite3.c       || (eFileLock==EXCLUSIVE_LOCK &amp;&amp; pFile-&gt;eFileLock&lt;PENDING_LOCK)</span>
<span class='curline'><a href='../S/185.html#L26398'>eFileLock</a>        26398 libdb/sqlite3.c     lock.l_type = (eFileLock==SHARED_LOCK?F_RDLCK:F_WRLCK);</span>
<span class='curline'><a href='../S/185.html#L26414'>eFileLock</a>        26414 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26416'>eFileLock</a>        26416 libdb/sqlite3.c     assert( pInode-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/185.html#L26443'>eFileLock</a>        26443 libdb/sqlite3.c       pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26447'>eFileLock</a>        26447 libdb/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK &amp;&amp; pInode-&gt;nShared&gt;1 ){</span>
<span class='curline'><a href='../S/185.html#L26456'>eFileLock</a>        26456 libdb/sqlite3.c     assert( 0!=pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/185.html#L26459'>eFileLock</a>        26459 libdb/sqlite3.c     assert( eFileLock==RESERVED_LOCK || eFileLock==EXCLUSIVE_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26460'>eFileLock</a>        26460 libdb/sqlite3.c     if( eFileLock==RESERVED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26485'>eFileLock</a>        26485 libdb/sqlite3.c    &amp;&amp; pFile-&gt;eFileLock&lt;=SHARED_LOCK</span>
<span class='curline'><a href='../S/185.html#L26486'>eFileLock</a>        26486 libdb/sqlite3.c    &amp;&amp; eFileLock==RESERVED_LOCK</span>
<span class='curline'><a href='../S/185.html#L26496'>eFileLock</a>        26496 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L26497'>eFileLock</a>        26497 libdb/sqlite3.c     pInode-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L26498'>eFileLock</a>        26498 libdb/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26499'>eFileLock</a>        26499 libdb/sqlite3.c     pFile-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26500'>eFileLock</a>        26500 libdb/sqlite3.c     pInode-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26505'>eFileLock</a>        26505 libdb/sqlite3.c   OSTRACE(("LOCK    %d %s %s (unix)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/185.html#L26536'>eFileLock</a>        26536 libdb/sqlite3.c static int posixUnlock(sqlite3_file *id, int eFileLock, int handleNFSUnlock){</span>
<span class='curline'><a href='../S/185.html#L26543'>eFileLock</a>        26543 libdb/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d(%d,%d) pid=%d (unix)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/185.html#L26544'>eFileLock</a>        26544 libdb/sqlite3.c       pFile-&gt;eFileLock, pFile-&gt;pInode-&gt;eFileLock, pFile-&gt;pInode-&gt;nShared,</span>
<span class='curline'><a href='../S/185.html#L26547'>eFileLock</a>        26547 libdb/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26548'>eFileLock</a>        26548 libdb/sqlite3.c   if( pFile-&gt;eFileLock&lt;=eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L26554'>eFileLock</a>        26554 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26555'>eFileLock</a>        26555 libdb/sqlite3.c     assert( pInode-&gt;eFileLock==pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/185.html#L26578'>eFileLock</a>        26578 libdb/sqlite3.c     if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26650'>eFileLock</a>        26650 libdb/sqlite3.c       pInode-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26657'>eFileLock</a>        26657 libdb/sqlite3.c   if( eFileLock==NO_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26668'>eFileLock</a>        26668 libdb/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26672'>eFileLock</a>        26672 libdb/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26673'>eFileLock</a>        26673 libdb/sqlite3.c         pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26690'>eFileLock</a>        26690 libdb/sqlite3.c   if( rc==SQLITE_OK ) pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L26701'>eFileLock</a>        26701 libdb/sqlite3.c static int unixUnlock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/185.html#L26703'>eFileLock</a>        26703 libdb/sqlite3.c   assert( eFileLock==SHARED_LOCK || ((unixFile *)id)-&gt;nFetchOut==0 );</span>
<span class='curline'><a href='../S/185.html#L26705'>eFileLock</a>        26705 libdb/sqlite3.c   return posixUnlock(id, eFileLock, 0);</span>
<span class='curline'><a href='../S/185.html#L26875'>eFileLock</a>        26875 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26916'>eFileLock</a>        26916 libdb/sqlite3.c static int dotlockLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L26925'>eFileLock</a>        26925 libdb/sqlite3.c   if( pFile-&gt;eFileLock &gt; NO_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26926'>eFileLock</a>        26926 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L26953'>eFileLock</a>        26953 libdb/sqlite3.c   pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L26966'>eFileLock</a>        26966 libdb/sqlite3.c static int dotlockUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L26972'>eFileLock</a>        26972 libdb/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (dotlock)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/185.html#L26973'>eFileLock</a>        26973 libdb/sqlite3.c            pFile-&gt;eFileLock, getpid()));</span>
<span class='curline'><a href='../S/185.html#L26974'>eFileLock</a>        26974 libdb/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L26977'>eFileLock</a>        26977 libdb/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L26984'>eFileLock</a>        26984 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L26985'>eFileLock</a>        26985 libdb/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L26990'>eFileLock</a>        26990 libdb/sqlite3.c   assert( eFileLock==NO_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27004'>eFileLock</a>        27004 libdb/sqlite3.c   pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27071'>eFileLock</a>        27071 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27143'>eFileLock</a>        27143 libdb/sqlite3.c static int flockLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L27151'>eFileLock</a>        27151 libdb/sqlite3.c   if (pFile-&gt;eFileLock &gt; NO_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27152'>eFileLock</a>        27152 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27167'>eFileLock</a>        27167 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27169'>eFileLock</a>        27169 libdb/sqlite3.c   OSTRACE(("LOCK    %d %s %s (flock)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/185.html#L27187'>eFileLock</a>        27187 libdb/sqlite3.c static int flockUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L27191'>eFileLock</a>        27191 libdb/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (flock)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/185.html#L27192'>eFileLock</a>        27192 libdb/sqlite3.c            pFile-&gt;eFileLock, getpid()));</span>
<span class='curline'><a href='../S/185.html#L27193'>eFileLock</a>        27193 libdb/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27196'>eFileLock</a>        27196 libdb/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L27201'>eFileLock</a>        27201 libdb/sqlite3.c   if (eFileLock==SHARED_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27202'>eFileLock</a>        27202 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27213'>eFileLock</a>        27213 libdb/sqlite3.c     pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27263'>eFileLock</a>        27263 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27278'>eFileLock</a>        27278 libdb/sqlite3.c         reserved = (pFile-&gt;eFileLock &lt; SHARED_LOCK);</span>
<span class='curline'><a href='../S/185.html#L27320'>eFileLock</a>        27320 libdb/sqlite3.c static int semLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L27327'>eFileLock</a>        27327 libdb/sqlite3.c   if (pFile-&gt;eFileLock &gt; NO_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27328'>eFileLock</a>        27328 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27340'>eFileLock</a>        27340 libdb/sqlite3.c   pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27353'>eFileLock</a>        27353 libdb/sqlite3.c static int semUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L27359'>eFileLock</a>        27359 libdb/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d pid=%d (sem)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/185.html#L27360'>eFileLock</a>        27360 libdb/sqlite3.c            pFile-&gt;eFileLock, getpid()));</span>
<span class='curline'><a href='../S/185.html#L27361'>eFileLock</a>        27361 libdb/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27364'>eFileLock</a>        27364 libdb/sqlite3.c   if( pFile-&gt;eFileLock==eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L27369'>eFileLock</a>        27369 libdb/sqlite3.c   if (eFileLock==SHARED_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27370'>eFileLock</a>        27370 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27383'>eFileLock</a>        27383 libdb/sqlite3.c   pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27512'>eFileLock</a>        27512 libdb/sqlite3.c   if( pFile-&gt;pInode-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27565'>eFileLock</a>        27565 libdb/sqlite3.c static int afpLock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/185.html#L27573'>eFileLock</a>        27573 libdb/sqlite3.c            azFileLock(eFileLock), azFileLock(pFile-&gt;eFileLock),</span>
<span class='curline'><a href='../S/185.html#L27574'>eFileLock</a>        27574 libdb/sqlite3.c            azFileLock(pInode-&gt;eFileLock), pInode-&gt;nShared , getpid()));</span>
<span class='curline'><a href='../S/185.html#L27580'>eFileLock</a>        27580 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;=eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L27582'>eFileLock</a>        27582 libdb/sqlite3.c            azFileLock(eFileLock)));</span>
<span class='curline'><a href='../S/185.html#L27591'>eFileLock</a>        27591 libdb/sqlite3.c   assert( pFile-&gt;eFileLock!=NO_LOCK || eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27592'>eFileLock</a>        27592 libdb/sqlite3.c   assert( eFileLock!=PENDING_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27593'>eFileLock</a>        27593 libdb/sqlite3.c   assert( eFileLock!=RESERVED_LOCK || pFile-&gt;eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27603'>eFileLock</a>        27603 libdb/sqlite3.c   if( (pFile-&gt;eFileLock!=pInode-&gt;eFileLock &amp;&amp; </span>
<span class='curline'><a href='../S/185.html#L27604'>eFileLock</a>        27604 libdb/sqlite3.c        (pInode-&gt;eFileLock&gt;=PENDING_LOCK || eFileLock&gt;SHARED_LOCK))</span>
<span class='curline'><a href='../S/185.html#L27614'>eFileLock</a>        27614 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK &amp;&amp; </span>
<span class='curline'><a href='../S/185.html#L27615'>eFileLock</a>        27615 libdb/sqlite3.c      (pInode-&gt;eFileLock==SHARED_LOCK || pInode-&gt;eFileLock==RESERVED_LOCK) ){</span>
<span class='curline'><a href='../S/185.html#L27616'>eFileLock</a>        27616 libdb/sqlite3.c     assert( eFileLock==SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27617'>eFileLock</a>        27617 libdb/sqlite3.c     assert( pFile-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/185.html#L27619'>eFileLock</a>        27619 libdb/sqlite3.c     pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27629'>eFileLock</a>        27629 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK </span>
<span class='curline'><a href='../S/185.html#L27630'>eFileLock</a>        27630 libdb/sqlite3.c       || (eFileLock==EXCLUSIVE_LOCK &amp;&amp; pFile-&gt;eFileLock&lt;PENDING_LOCK)</span>
<span class='curline'><a href='../S/185.html#L27643'>eFileLock</a>        27643 libdb/sqlite3.c   if( eFileLock==SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27648'>eFileLock</a>        27648 libdb/sqlite3.c     assert( pInode-&gt;eFileLock==0 );</span>
<span class='curline'><a href='../S/185.html#L27673'>eFileLock</a>        27673 libdb/sqlite3.c       pFile-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27677'>eFileLock</a>        27677 libdb/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK &amp;&amp; pInode-&gt;nShared&gt;1 ){</span>
<span class='curline'><a href='../S/185.html#L27687'>eFileLock</a>        27687 libdb/sqlite3.c     assert( 0!=pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/185.html#L27688'>eFileLock</a>        27688 libdb/sqlite3.c     if (eFileLock &gt;= RESERVED_LOCK &amp;&amp; pFile-&gt;eFileLock &lt; RESERVED_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27695'>eFileLock</a>        27695 libdb/sqlite3.c     if (!failed &amp;&amp; eFileLock == EXCLUSIVE_LOCK) {</span>
<span class='curline'><a href='../S/185.html#L27726'>eFileLock</a>        27726 libdb/sqlite3.c     pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27727'>eFileLock</a>        27727 libdb/sqlite3.c     pInode-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27728'>eFileLock</a>        27728 libdb/sqlite3.c   }else if( eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27729'>eFileLock</a>        27729 libdb/sqlite3.c     pFile-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27730'>eFileLock</a>        27730 libdb/sqlite3.c     pInode-&gt;eFileLock = PENDING_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27735'>eFileLock</a>        27735 libdb/sqlite3.c   OSTRACE(("LOCK    %d %s %s (afp)\n", pFile-&gt;h, azFileLock(eFileLock), </span>
<span class='curline'><a href='../S/185.html#L27747'>eFileLock</a>        27747 libdb/sqlite3.c static int afpUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L27758'>eFileLock</a>        27758 libdb/sqlite3.c   OSTRACE(("UNLOCK  %d %d was %d(%d,%d) pid=%d (afp)\n", pFile-&gt;h, eFileLock,</span>
<span class='curline'><a href='../S/185.html#L27759'>eFileLock</a>        27759 libdb/sqlite3.c            pFile-&gt;eFileLock, pFile-&gt;pInode-&gt;eFileLock, pFile-&gt;pInode-&gt;nShared,</span>
<span class='curline'><a href='../S/185.html#L27762'>eFileLock</a>        27762 libdb/sqlite3.c   assert( eFileLock&lt;=SHARED_LOCK );</span>
<span class='curline'><a href='../S/185.html#L27763'>eFileLock</a>        27763 libdb/sqlite3.c   if( pFile-&gt;eFileLock&lt;=eFileLock ){</span>
<span class='curline'><a href='../S/185.html#L27769'>eFileLock</a>        27769 libdb/sqlite3.c   if( pFile-&gt;eFileLock&gt;SHARED_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27770'>eFileLock</a>        27770 libdb/sqlite3.c     assert( pInode-&gt;eFileLock==pFile-&gt;eFileLock );</span>
<span class='curline'><a href='../S/185.html#L27790'>eFileLock</a>        27790 libdb/sqlite3.c     if( pFile-&gt;eFileLock==EXCLUSIVE_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27792'>eFileLock</a>        27792 libdb/sqlite3.c       if( rc==SQLITE_OK &amp;&amp; (eFileLock==SHARED_LOCK || pInode-&gt;nShared&gt;1) ){</span>
<span class='curline'><a href='../S/185.html#L27800'>eFileLock</a>        27800 libdb/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; pFile-&gt;eFileLock&gt;=PENDING_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27803'>eFileLock</a>        27803 libdb/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; pFile-&gt;eFileLock&gt;=RESERVED_LOCK &amp;&amp; context-&gt;reserved ){</span>
<span class='curline'><a href='../S/185.html#L27809'>eFileLock</a>        27809 libdb/sqlite3.c     if( rc==SQLITE_OK &amp;&amp; (eFileLock==SHARED_LOCK || pInode-&gt;nShared&gt;1)){</span>
<span class='curline'><a href='../S/185.html#L27810'>eFileLock</a>        27810 libdb/sqlite3.c       pInode-&gt;eFileLock = SHARED_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27813'>eFileLock</a>        27813 libdb/sqlite3.c   if( rc==SQLITE_OK &amp;&amp; eFileLock==NO_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L27829'>eFileLock</a>        27829 libdb/sqlite3.c         pInode-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27830'>eFileLock</a>        27830 libdb/sqlite3.c         pFile-&gt;eFileLock = NO_LOCK;</span>
<span class='curline'><a href='../S/185.html#L27843'>eFileLock</a>        27843 libdb/sqlite3.c   if( rc==SQLITE_OK ) pFile-&gt;eFileLock = eFileLock;</span>
<span class='curline'><a href='../S/185.html#L27893'>eFileLock</a>        27893 libdb/sqlite3.c static int nfsUnlock(sqlite3_file *id, int eFileLock){</span>
<span class='curline'><a href='../S/185.html#L27894'>eFileLock</a>        27894 libdb/sqlite3.c   return posixUnlock(id, eFileLock, 1);</span>
<span class='curline'><a href='../S/185.html#L28580'>eFileLock</a>        28580 libdb/sqlite3.c       *(int*)pArg = pFile-&gt;eFileLock;</span>
<span class='curline'><a href='../S/185.html#L31870'>eFileLock</a>        31870 libdb/sqlite3.c   if( pFile-&gt;eFileLock!=NO_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L31937'>eFileLock</a>        31937 libdb/sqlite3.c   if( pFile-&gt;eFileLock!=NO_LOCK ){</span>
<span class='curline'><a href='../S/185.html#L32127'>eFileLock</a>        32127 libdb/sqlite3.c static int proxyLock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L32134'>eFileLock</a>        32134 libdb/sqlite3.c       rc = proxy-&gt;pMethod-&gt;xLock((sqlite3_file*)proxy, eFileLock);</span>
<span class='curline'><a href='../S/185.html#L32135'>eFileLock</a>        32135 libdb/sqlite3.c       pFile-&gt;eFileLock = proxy-&gt;eFileLock;</span>
<span class='curline'><a href='../S/185.html#L32151'>eFileLock</a>        32151 libdb/sqlite3.c static int proxyUnlock(sqlite3_file *id, int eFileLock) {</span>
<span class='curline'><a href='../S/185.html#L32158'>eFileLock</a>        32158 libdb/sqlite3.c       rc = proxy-&gt;pMethod-&gt;xUnlock((sqlite3_file*)proxy, eFileLock);</span>
<span class='curline'><a href='../S/185.html#L32159'>eFileLock</a>        32159 libdb/sqlite3.c       pFile-&gt;eFileLock = proxy-&gt;eFileLock;</span>
</pre>
</body>
</html>
