<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>dbop</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/42.html#L1195'>dbop</a>             1195 global/global.c 	DBOP *dbop = dbop_open(NULL, 1, 0600, DBOP_RAW);</span>
<span class='curline'><a href='../S/42.html#L1201'>dbop</a>             1201 global/global.c 	if (dbop == NULL)</span>
<span class='curline'><a href='../S/42.html#L1220'>dbop</a>             1220 global/global.c 			dbop_put(dbop, path + 1, "");</span>
<span class='curline'><a href='../S/42.html#L1225'>dbop</a>             1225 global/global.c 				dbop_put(dbop, p, "");</span>
<span class='curline'><a href='../S/42.html#L1231'>dbop</a>             1231 global/global.c 				dbop_put(dbop, p, "");</span>
<span class='curline'><a href='../S/42.html#L1236'>dbop</a>             1236 global/global.c 	for (path = dbop_first(dbop, NULL, NULL, DBOP_KEY); path != NULL; path = dbop_next(dbop)) {</span>
<span class='curline'><a href='../S/42.html#L1240'>dbop</a>             1240 global/global.c 	dbop_close(dbop);</span>
<span class='curline'><a href='../S/42.html#L1560'>dbop</a>             1560 global/global.c 							(user_specified) ? NULL : gp-&gt;dbop-&gt;lastdat);</span>
<span class='curline'><a href='../S/42.html#L1647'>dbop</a>             1647 global/global.c 			convert_put_using(cv, pattern, path, 1, " ", gp-&gt;dbop-&gt;lastdat);</span>
<span class='curline'><a href='../S/42.html#L1685'>dbop</a>             1685 global/global.c 	DBOP *dbop;</span>
<span class='curline'><a href='../S/42.html#L1726'>dbop</a>             1726 global/global.c 			if (dbop_get(data-&gt;dbop, key) != NULL) {</span>
<span class='curline'><a href='../S/42.html#L1781'>dbop</a>             1781 global/global.c 		data.dbop = dbop_open(makepath(dbpath, dbname(GTAGS), NULL), 0, 0, 0);</span>
<span class='curline'><a href='../S/42.html#L1782'>dbop</a>             1782 global/global.c 		if (data.dbop == NULL)</span>
<span class='curline'><a href='../S/42.html#L1785'>dbop</a>             1785 global/global.c 		data.dbop = NULL;</span>
<span class='curline'><a href='../S/42.html#L1845'>dbop</a>             1845 global/global.c 	if (data.dbop != NULL)</span>
<span class='curline'><a href='../S/42.html#L1846'>dbop</a>             1846 global/global.c 		dbop_close(data.dbop);</span>
<span class='curline'><a href='../S/62.html#L374'>dbop</a>              374 gtags/gtags.c  		DBOP *dbop = NULL;</span>
<span class='curline'><a href='../S/62.html#L380'>dbop</a>              380 gtags/gtags.c  		if ((dbop = dbop_open(dump_target, 0, 0, DBOP_RAW)) == NULL)</span>
<span class='curline'><a href='../S/62.html#L385'>dbop</a>              385 gtags/gtags.c  		if (dbop_get(dbop, NEXTKEY))</span>
<span class='curline'><a href='../S/62.html#L387'>dbop</a>              387 gtags/gtags.c  		for (dat = dbop_first(dbop, NULL, NULL, 0); dat != NULL; dat = dbop_next(dbop)) {</span>
<span class='curline'><a href='../S/62.html#L388'>dbop</a>              388 gtags/gtags.c  			const char *flag = is_gpath ? dbop_getflag(dbop) : "";</span>
<span class='curline'><a href='../S/62.html#L391'>dbop</a>              391 gtags/gtags.c  				printf("%s\t%s\t%s\n", dbop-&gt;lastkey, dat, flag);</span>
<span class='curline'><a href='../S/62.html#L393'>dbop</a>              393 gtags/gtags.c  				printf("%s\t%s\n", dbop-&gt;lastkey, dat);</span>
<span class='curline'><a href='../S/62.html#L395'>dbop</a>              395 gtags/gtags.c  		dbop_close(dbop);</span>
<span class='curline'><a href='../S/144.html#L47'>dbop</a>               47 htags/path2url.c 	DBOP *dbop;</span>
<span class='curline'><a href='../S/144.html#L53'>dbop</a>               53 htags/path2url.c 	dbop = dbop_open(makepath(dbpath, dbname(GPATH), NULL), 0, 0, 0);</span>
<span class='curline'><a href='../S/144.html#L54'>dbop</a>               54 htags/path2url.c 	if (dbop == NULL)</span>
<span class='curline'><a href='../S/144.html#L56'>dbop</a>               56 htags/path2url.c 	for (path = dbop_first(dbop, "./", NULL, DBOP_PREFIX | DBOP_KEY); path; path = dbop_next(dbop)) {</span>
<span class='curline'><a href='../S/144.html#L57'>dbop</a>               57 htags/path2url.c 		const char *no = dbop_lastdat(dbop, NULL);</span>
<span class='curline'><a href='../S/144.html#L65'>dbop</a>               65 htags/path2url.c 	dbop_close(dbop);</span>
<span class='curline'><a href='../S/282.html#L103'>dbop</a>              103 libutil/dbop.c start_sort_process(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L107'>dbop</a>              107 libutil/dbop.c terminate_sort_process(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L127'>dbop</a>              127 libutil/dbop.c start_sort_process(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L151'>dbop</a>              151 libutil/dbop.c 	dbop-&gt;pid = fork();</span>
<span class='curline'><a href='../S/282.html#L152'>dbop</a>              152 libutil/dbop.c 	if (dbop-&gt;pid == 0) {</span>
<span class='curline'><a href='../S/282.html#L167'>dbop</a>              167 libutil/dbop.c 	} else if (dbop-&gt;pid &lt; 0)</span>
<span class='curline'><a href='../S/282.html#L174'>dbop</a>              174 libutil/dbop.c 	dbop-&gt;sortout = fdopen(opipe[1], "w");</span>
<span class='curline'><a href='../S/282.html#L175'>dbop</a>              175 libutil/dbop.c 	dbop-&gt;sortin = fdopen(ipipe[0], "r");</span>
<span class='curline'><a href='../S/282.html#L176'>dbop</a>              176 libutil/dbop.c 	if (dbop-&gt;sortout == NULL || dbop-&gt;sortin == NULL)</span>
<span class='curline'><a href='../S/282.html#L180'>dbop</a>              180 libutil/dbop.c terminate_sort_process(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L183'>dbop</a>              183 libutil/dbop.c 	while ((ret = waitpid(dbop-&gt;pid, &amp;status, 0)) &lt; 0 &amp;&amp; errno == EINTR)</span>
<span class='curline'><a href='../S/282.html#L228'>dbop</a>              228 libutil/dbop.c 	DBOP *dbop;</span>
<span class='curline'><a href='../S/282.html#L235'>dbop</a>              235 libutil/dbop.c 		dbop = dbop3_open(path, mode, perm, flags);</span>
<span class='curline'><a href='../S/282.html#L292'>dbop</a>              292 libutil/dbop.c 	dbop = (DBOP *)check_calloc(sizeof(DBOP), 1);</span>
<span class='curline'><a href='../S/282.html#L294'>dbop</a>              294 libutil/dbop.c 		dbop-&gt;dbname[0] = '\0';</span>
<span class='curline'><a href='../S/282.html#L296'>dbop</a>              296 libutil/dbop.c 		strlimcpy(dbop-&gt;dbname, path, sizeof(dbop-&gt;dbname));</span>
<span class='curline'><a href='../S/282.html#L297'>dbop</a>              297 libutil/dbop.c 	dbop-&gt;db	= db;</span>
<span class='curline'><a href='../S/282.html#L298'>dbop</a>              298 libutil/dbop.c 	dbop-&gt;openflags	= flags;</span>
<span class='curline'><a href='../S/282.html#L299'>dbop</a>              299 libutil/dbop.c 	dbop-&gt;perm	= (mode == 1) ? perm : 0;</span>
<span class='curline'><a href='../S/282.html#L300'>dbop</a>              300 libutil/dbop.c 	dbop-&gt;lastdat	= NULL;</span>
<span class='curline'><a href='../S/282.html#L301'>dbop</a>              301 libutil/dbop.c 	dbop-&gt;lastsize	= 0;</span>
<span class='curline'><a href='../S/282.html#L302'>dbop</a>              302 libutil/dbop.c 	dbop-&gt;sortout	= NULL;</span>
<span class='curline'><a href='../S/282.html#L303'>dbop</a>              303 libutil/dbop.c 	dbop-&gt;sortin	= NULL;</span>
<span class='curline'><a href='../S/282.html#L307'>dbop</a>              307 libutil/dbop.c 	if (mode != 0 &amp;&amp; dbop-&gt;openflags &amp; DBOP_SORTED_WRITE)</span>
<span class='curline'><a href='../S/282.html#L308'>dbop</a>              308 libutil/dbop.c 		start_sort_process(dbop);</span>
<span class='curline'><a href='../S/282.html#L312'>dbop</a>              312 libutil/dbop.c 	return dbop;</span>
<span class='curline'><a href='../S/282.html#L322'>dbop</a>              322 libutil/dbop.c dbop_get(DBOP *dbop, const char *name)</span>
<span class='curline'><a href='../S/282.html#L324'>dbop</a>              324 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L329'>dbop</a>              329 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3)</span>
<span class='curline'><a href='../S/282.html#L330'>dbop</a>              330 libutil/dbop.c 		return dbop3_get(dbop, name);</span>
<span class='curline'><a href='../S/282.html#L336'>dbop</a>              336 libutil/dbop.c 	dbop-&gt;lastdat = (char *)dat.data;</span>
<span class='curline'><a href='../S/282.html#L337'>dbop</a>              337 libutil/dbop.c 	dbop-&gt;lastsize = dat.size;</span>
<span class='curline'><a href='../S/282.html#L356'>dbop</a>              356 libutil/dbop.c dbop_put(DBOP *dbop, const char *name, const char *data)</span>
<span class='curline'><a href='../S/282.html#L358'>dbop</a>              358 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L364'>dbop</a>              364 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/282.html#L365'>dbop</a>              365 libutil/dbop.c 		dbop3_put(dbop, name, data, NULL);</span>
<span class='curline'><a href='../S/282.html#L374'>dbop</a>              374 libutil/dbop.c 	if (dbop-&gt;sortout != NULL) {</span>
<span class='curline'><a href='../S/282.html#L375'>dbop</a>              375 libutil/dbop.c 		fputs(name, dbop-&gt;sortout);</span>
<span class='curline'><a href='../S/282.html#L376'>dbop</a>              376 libutil/dbop.c 		putc(SORT_SEP, dbop-&gt;sortout);</span>
<span class='curline'><a href='../S/282.html#L377'>dbop</a>              377 libutil/dbop.c 		fputs(data, dbop-&gt;sortout);</span>
<span class='curline'><a href='../S/282.html#L378'>dbop</a>              378 libutil/dbop.c 		putc('\n', dbop-&gt;sortout);</span>
<span class='curline'><a href='../S/282.html#L392'>dbop</a>              392 libutil/dbop.c 		die("%s", dbop-&gt;put_errmsg ? dbop-&gt;put_errmsg : "dbop_put failed.");</span>
<span class='curline'><a href='../S/282.html#L403'>dbop</a>              403 libutil/dbop.c dbop_put_tag(DBOP *dbop, const char *name, const char *data)</span>
<span class='curline'><a href='../S/282.html#L406'>dbop</a>              406 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/282.html#L428'>dbop</a>              428 libutil/dbop.c 		dbop3_put(dbop, name, data, fid);</span>
<span class='curline'><a href='../S/282.html#L432'>dbop</a>              432 libutil/dbop.c 	dbop_put(dbop, name, data);</span>
<span class='curline'><a href='../S/282.html#L446'>dbop</a>              446 libutil/dbop.c dbop_put_path(DBOP *dbop, const char *name, const char *data, const char *flag)</span>
<span class='curline'><a href='../S/282.html#L449'>dbop</a>              449 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L455'>dbop</a>              455 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/282.html#L456'>dbop</a>              456 libutil/dbop.c 		dbop3_put(dbop, name, data, flag);</span>
<span class='curline'><a href='../S/282.html#L479'>dbop</a>              479 libutil/dbop.c 		die("%s", dbop-&gt;put_errmsg ? dbop-&gt;put_errmsg : "dbop_put_path failed.");</span>
<span class='curline'><a href='../S/282.html#L489'>dbop</a>              489 libutil/dbop.c dbop_delete(DBOP *dbop, const char *path)</span>
<span class='curline'><a href='../S/282.html#L491'>dbop</a>              491 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L496'>dbop</a>              496 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/282.html#L497'>dbop</a>              497 libutil/dbop.c 		dbop3_delete(dbop, path);</span>
<span class='curline'><a href='../S/282.html#L518'>dbop</a>              518 libutil/dbop.c dbop_update(DBOP *dbop, const char *key, const char *dat)</span>
<span class='curline'><a href='../S/282.html#L521'>dbop</a>              521 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3)</span>
<span class='curline'><a href='../S/282.html#L522'>dbop</a>              522 libutil/dbop.c 		return dbop3_update(dbop, key, dat);</span>
<span class='curline'><a href='../S/282.html#L524'>dbop</a>              524 libutil/dbop.c 	dbop_put(dbop, key, dat);</span>
<span class='curline'><a href='../S/282.html#L540'>dbop</a>              540 libutil/dbop.c dbop_first(DBOP *dbop, const char *name, regex_t *preg, int flags)</span>
<span class='curline'><a href='../S/282.html#L542'>dbop</a>              542 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L547'>dbop</a>              547 libutil/dbop.c 	dbop-&gt;preg = preg;</span>
<span class='curline'><a href='../S/282.html#L548'>dbop</a>              548 libutil/dbop.c 	dbop-&gt;ioflags = flags;</span>
<span class='curline'><a href='../S/282.html#L552'>dbop</a>              552 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3)</span>
<span class='curline'><a href='../S/282.html#L553'>dbop</a>              553 libutil/dbop.c 		return dbop3_first(dbop, name, preg, flags);</span>
<span class='curline'><a href='../S/282.html#L558'>dbop</a>              558 libutil/dbop.c 		strlimcpy(dbop-&gt;key, name, sizeof(dbop-&gt;key));</span>
<span class='curline'><a href='../S/282.html#L566'>dbop</a>              566 libutil/dbop.c 		dbop-&gt;keylen = key.size;</span>
<span class='curline'><a href='../S/282.html#L570'>dbop</a>              570 libutil/dbop.c 			dbop-&gt;readcount++;</span>
<span class='curline'><a href='../S/282.html#L572'>dbop</a>              572 libutil/dbop.c 				if (strncmp((char *)key.data, dbop-&gt;key, dbop-&gt;keylen))</span>
<span class='curline'><a href='../S/282.html#L575'>dbop</a>              575 libutil/dbop.c 				if (strcmp((char *)key.data, dbop-&gt;key))</span>
<span class='curline'><a href='../S/282.html#L583'>dbop</a>              583 libutil/dbop.c 		dbop-&gt;keylen = dbop-&gt;key[0] = 0;</span>
<span class='curline'><a href='../S/282.html#L587'>dbop</a>              587 libutil/dbop.c 			dbop-&gt;readcount++;</span>
<span class='curline'><a href='../S/282.html#L589'>dbop</a>              589 libutil/dbop.c 			if (ismeta(key.data) &amp;&amp; !(dbop-&gt;openflags &amp; DBOP_RAW))</span>
<span class='curline'><a href='../S/282.html#L596'>dbop</a>              596 libutil/dbop.c 	dbop-&gt;lastdat = (char *)dat.data;</span>
<span class='curline'><a href='../S/282.html#L597'>dbop</a>              597 libutil/dbop.c 	dbop-&gt;lastsize = dat.size;</span>
<span class='curline'><a href='../S/282.html#L598'>dbop</a>              598 libutil/dbop.c 	dbop-&gt;lastkey = (char *)key.data;</span>
<span class='curline'><a href='../S/282.html#L599'>dbop</a>              599 libutil/dbop.c 	dbop-&gt;lastkeysize = key.size;</span>
<span class='curline'><a href='../S/282.html#L609'>dbop</a>              609 libutil/dbop.c 		strlimcpy(dbop-&gt;prev, (char *)key.data, sizeof(dbop-&gt;prev));</span>
<span class='curline'><a href='../S/282.html#L623'>dbop</a>              623 libutil/dbop.c dbop_next(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L625'>dbop</a>              625 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L626'>dbop</a>              626 libutil/dbop.c 	int flags = dbop-&gt;ioflags;</span>
<span class='curline'><a href='../S/282.html#L630'>dbop</a>              630 libutil/dbop.c 	if (dbop-&gt;unread) {</span>
<span class='curline'><a href='../S/282.html#L631'>dbop</a>              631 libutil/dbop.c 		dbop-&gt;unread = 0;</span>
<span class='curline'><a href='../S/282.html#L632'>dbop</a>              632 libutil/dbop.c 		return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L635'>dbop</a>              635 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3)</span>
<span class='curline'><a href='../S/282.html#L636'>dbop</a>              636 libutil/dbop.c 		return dbop3_next(dbop);</span>
<span class='curline'><a href='../S/282.html#L639'>dbop</a>              639 libutil/dbop.c 		dbop-&gt;readcount++;</span>
<span class='curline'><a href='../S/282.html#L642'>dbop</a>              642 libutil/dbop.c 		if (!(dbop-&gt;openflags &amp; DBOP_RAW)) {</span>
<span class='curline'><a href='../S/282.html#L649'>dbop</a>              649 libutil/dbop.c 			if (!strcmp(dbop-&gt;prev, (char *)key.data))</span>
<span class='curline'><a href='../S/282.html#L653'>dbop</a>              653 libutil/dbop.c 			strlimcpy(dbop-&gt;prev, (char *)key.data, sizeof(dbop-&gt;prev));</span>
<span class='curline'><a href='../S/282.html#L655'>dbop</a>              655 libutil/dbop.c 		dbop-&gt;lastdat	= (char *)dat.data;</span>
<span class='curline'><a href='../S/282.html#L656'>dbop</a>              656 libutil/dbop.c 		dbop-&gt;lastsize	= dat.size;</span>
<span class='curline'><a href='../S/282.html#L657'>dbop</a>              657 libutil/dbop.c 		dbop-&gt;lastkey = (char *)key.data;</span>
<span class='curline'><a href='../S/282.html#L658'>dbop</a>              658 libutil/dbop.c 		dbop-&gt;lastkeysize = key.size;</span>
<span class='curline'><a href='../S/282.html#L660'>dbop</a>              660 libutil/dbop.c 			if (strncmp((char *)key.data, dbop-&gt;key, dbop-&gt;keylen))</span>
<span class='curline'><a href='../S/282.html#L662'>dbop</a>              662 libutil/dbop.c 		} else if (dbop-&gt;keylen) {</span>
<span class='curline'><a href='../S/282.html#L663'>dbop</a>              663 libutil/dbop.c 			if (strcmp((char *)key.data, dbop-&gt;key))</span>
<span class='curline'><a href='../S/282.html#L666'>dbop</a>              666 libutil/dbop.c 		if (dbop-&gt;preg &amp;&amp; regexec(dbop-&gt;preg, (char *)key.data, 0, 0, 0) != 0)</span>
<span class='curline'><a href='../S/282.html#L682'>dbop</a>              682 libutil/dbop.c dbop_unread(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L684'>dbop</a>              684 libutil/dbop.c 	dbop-&gt;unread = 1;</span>
<span class='curline'><a href='../S/282.html#L694'>dbop</a>              694 libutil/dbop.c dbop_lastdat(DBOP *dbop, int *size)</span>
<span class='curline'><a href='../S/282.html#L697'>dbop</a>              697 libutil/dbop.c 		*size = dbop-&gt;lastsize;</span>
<span class='curline'><a href='../S/282.html#L698'>dbop</a>              698 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L706'>dbop</a>              706 libutil/dbop.c dbop_getflag(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L709'>dbop</a>              709 libutil/dbop.c 	const char *dat = dbop_lastdat(dbop, &amp;size);</span>
<span class='curline'><a href='../S/282.html#L713'>dbop</a>              713 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3)</span>
<span class='curline'><a href='../S/282.html#L714'>dbop</a>              714 libutil/dbop.c 		return dbop3_getflag(dbop);</span>
<span class='curline'><a href='../S/282.html#L734'>dbop</a>              734 libutil/dbop.c dbop_getoption(DBOP *dbop, const char *key)</span>
<span class='curline'><a href='../S/282.html#L740'>dbop</a>              740 libutil/dbop.c 	if ((p = dbop_get(dbop, key)) == NULL)</span>
<span class='curline'><a href='../S/282.html#L743'>dbop</a>              743 libutil/dbop.c 	if (dbop-&gt;lastsize &lt; keysize)</span>
<span class='curline'><a href='../S/282.html#L754'>dbop</a>              754 libutil/dbop.c dbop_putoption(DBOP *dbop, const char *key, const char *string)</span>
<span class='curline'><a href='../S/282.html#L762'>dbop</a>              762 libutil/dbop.c 	dbop_put(dbop, key, buf);</span>
<span class='curline'><a href='../S/282.html#L768'>dbop</a>              768 libutil/dbop.c dbop_getversion(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L773'>dbop</a>              773 libutil/dbop.c 	if ((p = dbop_getoption(dbop, VERSIONKEY)) != NULL)</span>
<span class='curline'><a href='../S/282.html#L781'>dbop</a>              781 libutil/dbop.c dbop_putversion(DBOP *dbop, int version)</span>
<span class='curline'><a href='../S/282.html#L786'>dbop</a>              786 libutil/dbop.c 	dbop_putoption(dbop, VERSIONKEY, number);</span>
<span class='curline'><a href='../S/282.html#L794'>dbop</a>              794 libutil/dbop.c dbop_close(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L796'>dbop</a>              796 libutil/dbop.c 	DB *db = dbop-&gt;db;</span>
<span class='curline'><a href='../S/282.html#L801'>dbop</a>              801 libutil/dbop.c 	if (dbop-&gt;sortout != NULL) {</span>
<span class='curline'><a href='../S/282.html#L812'>dbop</a>              812 libutil/dbop.c 		fclose(dbop-&gt;sortout);</span>
<span class='curline'><a href='../S/282.html#L813'>dbop</a>              813 libutil/dbop.c 		dbop-&gt;sortout = NULL;</span>
<span class='curline'><a href='../S/282.html#L817'>dbop</a>              817 libutil/dbop.c 		while (strbuf_fgets(sb, dbop-&gt;sortin, STRBUF_NOCRLF)) {</span>
<span class='curline'><a href='../S/282.html#L823'>dbop</a>              823 libutil/dbop.c 			dbop_put(dbop, strbuf_value(sb), p);</span>
<span class='curline'><a href='../S/282.html#L825'>dbop</a>              825 libutil/dbop.c 		fclose(dbop-&gt;sortin);</span>
<span class='curline'><a href='../S/282.html#L827'>dbop</a>              827 libutil/dbop.c 		terminate_sort_process(dbop);</span>
<span class='curline'><a href='../S/282.html#L830'>dbop</a>              830 libutil/dbop.c 	if (dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/282.html#L831'>dbop</a>              831 libutil/dbop.c 		dbop3_close(dbop);</span>
<span class='curline'><a href='../S/282.html#L841'>dbop</a>              841 libutil/dbop.c 	(void)db-&gt;close(db, dbop-&gt;dbname[0] == '\0' ? 1 : 0);</span>
<span class='curline'><a href='../S/282.html#L843'>dbop</a>              843 libutil/dbop.c 	if (dbop-&gt;dbname[0] != '\0') {</span>
<span class='curline'><a href='../S/282.html#L844'>dbop</a>              844 libutil/dbop.c 		if (dbop-&gt;perm &amp;&amp; chmod(dbop-&gt;dbname, dbop-&gt;perm) &lt; 0)</span>
<span class='curline'><a href='../S/282.html#L847'>dbop</a>              847 libutil/dbop.c 	(void)free(dbop);</span>
<span class='curline'><a href='../S/282.html#L854'>dbop</a>              854 libutil/dbop.c 	DBOP *dbop;</span>
<span class='curline'><a href='../S/282.html#L905'>dbop</a>              905 libutil/dbop.c 	dbop = (DBOP *)check_calloc(sizeof(DBOP), 1);</span>
<span class='curline'><a href='../S/282.html#L906'>dbop</a>              906 libutil/dbop.c 	strlimcpy(dbop-&gt;dbname, path, sizeof(dbop-&gt;dbname));</span>
<span class='curline'><a href='../S/282.html#L907'>dbop</a>              907 libutil/dbop.c 	dbop-&gt;sb        = strbuf_open(0);</span>
<span class='curline'><a href='../S/282.html#L908'>dbop</a>              908 libutil/dbop.c 	dbop-&gt;db3       = db3;</span>
<span class='curline'><a href='../S/282.html#L909'>dbop</a>              909 libutil/dbop.c 	dbop-&gt;openflags	= flags;</span>
<span class='curline'><a href='../S/282.html#L910'>dbop</a>              910 libutil/dbop.c 	dbop-&gt;perm	= (mode == 1) ? perm : 0;</span>
<span class='curline'><a href='../S/282.html#L911'>dbop</a>              911 libutil/dbop.c 	dbop-&gt;mode      = mode;</span>
<span class='curline'><a href='../S/282.html#L912'>dbop</a>              912 libutil/dbop.c 	dbop-&gt;lastdat	= NULL;</span>
<span class='curline'><a href='../S/282.html#L913'>dbop</a>              913 libutil/dbop.c 	dbop-&gt;lastflag	= NULL;</span>
<span class='curline'><a href='../S/282.html#L914'>dbop</a>              914 libutil/dbop.c 	dbop-&gt;lastsize	= 0;</span>
<span class='curline'><a href='../S/282.html#L915'>dbop</a>              915 libutil/dbop.c 	dbop-&gt;sortout	= NULL;</span>
<span class='curline'><a href='../S/282.html#L916'>dbop</a>              916 libutil/dbop.c 	dbop-&gt;sortin	= NULL;</span>
<span class='curline'><a href='../S/282.html#L917'>dbop</a>              917 libutil/dbop.c 	dbop-&gt;stmt      = NULL;</span>
<span class='curline'><a href='../S/282.html#L918'>dbop</a>              918 libutil/dbop.c 	dbop-&gt;tblname   = check_strdup(tblname);</span>
<span class='curline'><a href='../S/282.html#L924'>dbop</a>              924 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, buf,  NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L934'>dbop</a>              934 libutil/dbop.c 		strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L935'>dbop</a>              935 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L942'>dbop</a>              942 libutil/dbop.c 		strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L947'>dbop</a>              947 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L967'>dbop</a>              967 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, buf,  NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L970'>dbop</a>              970 libutil/dbop.c 	sqlite3_exec(dbop-&gt;db3, "pragma journal_mode=memory", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L973'>dbop</a>              973 libutil/dbop.c 	sqlite3_exec(dbop-&gt;db3, "pragma synchronous=off", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L976'>dbop</a>              976 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, "begin transaction", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L980'>dbop</a>              980 libutil/dbop.c 	return dbop;</span>
<span class='curline'><a href='../S/282.html#L985'>dbop</a>              985 libutil/dbop.c 	DBOP *dbop = (DBOP *)v;</span>
<span class='curline'><a href='../S/282.html#L990'>dbop</a>              990 libutil/dbop.c 		dbop-&gt;lastsize = strbuf_getlen(sb);</span>
<span class='curline'><a href='../S/282.html#L995'>dbop</a>              995 libutil/dbop.c 		dbop-&gt;lastdat = strbuf_value(sb);</span>
<span class='curline'><a href='../S/282.html#L996'>dbop</a>              996 libutil/dbop.c 		dbop-&gt;lastflag = argv[1] ? dbop-&gt;lastdat + dbop-&gt;lastsize + 1 : NULL;</span>
<span class='curline'><a href='../S/282.html#L998'>dbop</a>              998 libutil/dbop.c 		dbop-&gt;lastdat = NULL;</span>
<span class='curline'><a href='../S/282.html#L999'>dbop</a>              999 libutil/dbop.c 		dbop-&gt;lastflag = NULL;</span>
<span class='curline'><a href='../S/282.html#L1000'>dbop</a>             1000 libutil/dbop.c 		dbop-&gt;lastsize = 0;</span>
<span class='curline'><a href='../S/282.html#L1005'>dbop</a>             1005 libutil/dbop.c dbop3_get(DBOP *dbop, const char *name) {</span>
<span class='curline'><a href='../S/282.html#L1011'>dbop</a>             1011 libutil/dbop.c 			dbop-&gt;tblname, name); </span>
<span class='curline'><a href='../S/282.html#L1012'>dbop</a>             1012 libutil/dbop.c 	dbop-&gt;lastdat = NULL;</span>
<span class='curline'><a href='../S/282.html#L1013'>dbop</a>             1013 libutil/dbop.c 	dbop-&gt;lastsize = 0;</span>
<span class='curline'><a href='../S/282.html#L1014'>dbop</a>             1014 libutil/dbop.c 	dbop-&gt;lastflag = NULL;</span>
<span class='curline'><a href='../S/282.html#L1015'>dbop</a>             1015 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), single_select_callback, dbop, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1017'>dbop</a>             1017 libutil/dbop.c 		sqlite3_close(dbop-&gt;db3);</span>
<span class='curline'><a href='../S/282.html#L1021'>dbop</a>             1021 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L1024'>dbop</a>             1024 libutil/dbop.c dbop3_getflag(DBOP *dbop)</span>
<span class='curline'><a href='../S/282.html#L1026'>dbop</a>             1026 libutil/dbop.c 	return dbop-&gt;lastflag ? dbop-&gt;lastflag : "";</span>
<span class='curline'><a href='../S/282.html#L1042'>dbop</a>             1042 libutil/dbop.c dbop3_put(DBOP *dbop, const char *p1, const char *p2, const char *p3) {</span>
<span class='curline'><a href='../S/282.html#L1051'>dbop</a>             1051 libutil/dbop.c 	if (dbop-&gt;stmt_put3 == NULL) {</span>
<span class='curline'><a href='../S/282.html#L1052'>dbop</a>             1052 libutil/dbop.c 		strbuf_sprintf(sql, "insert into %s values (?, ?, ?)", dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1053'>dbop</a>             1053 libutil/dbop.c 		rc = sqlite3_prepare_v2(dbop-&gt;db3, strbuf_value(sql), -1, &amp;dbop-&gt;stmt_put3, NULL);</span>
<span class='curline'><a href='../S/282.html#L1058'>dbop</a>             1058 libutil/dbop.c 	rc = sqlite3_bind_text(dbop-&gt;stmt_put3, 1, p1, -1, SQLITE_STATIC);</span>
<span class='curline'><a href='../S/282.html#L1062'>dbop</a>             1062 libutil/dbop.c 	rc = sqlite3_bind_text(dbop-&gt;stmt_put3, 2, p2, -1, SQLITE_STATIC);</span>
<span class='curline'><a href='../S/282.html#L1066'>dbop</a>             1066 libutil/dbop.c 	rc = sqlite3_bind_text(dbop-&gt;stmt_put3, 3, p3, -1, SQLITE_STATIC);</span>
<span class='curline'><a href='../S/282.html#L1070'>dbop</a>             1070 libutil/dbop.c 	rc = sqlite3_step(dbop-&gt;stmt_put3);</span>
<span class='curline'><a href='../S/282.html#L1074'>dbop</a>             1074 libutil/dbop.c 	rc = sqlite3_reset(dbop-&gt;stmt_put3);</span>
<span class='curline'><a href='../S/282.html#L1078'>dbop</a>             1078 libutil/dbop.c 	if (dbop-&gt;writecount++ &gt; DBOP_COMMIT_THRESHOLD) {</span>
<span class='curline'><a href='../S/282.html#L1079'>dbop</a>             1079 libutil/dbop.c 		dbop-&gt;writecount = 0;</span>
<span class='curline'><a href='../S/282.html#L1080'>dbop</a>             1080 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, "end transaction", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1083'>dbop</a>             1083 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, "begin transaction", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1090'>dbop</a>             1090 libutil/dbop.c dbop3_delete(DBOP *dbop, const char *path) {</span>
<span class='curline'><a href='../S/282.html#L1096'>dbop</a>             1096 libutil/dbop.c 	strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1109'>dbop</a>             1109 libutil/dbop.c 		strbuf_putn64(sql, dbop-&gt;lastrowid);</span>
<span class='curline'><a href='../S/282.html#L1111'>dbop</a>             1111 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1113'>dbop</a>             1113 libutil/dbop.c 		sqlite3_close(dbop-&gt;db3);</span>
<span class='curline'><a href='../S/282.html#L1119'>dbop</a>             1119 libutil/dbop.c dbop3_update(DBOP *dbop, const char *key, const char *dat) {</span>
<span class='curline'><a href='../S/282.html#L1125'>dbop</a>             1125 libutil/dbop.c 					dbop-&gt;tblname, dbop3_quote((char *)dat), key);</span>
<span class='curline'><a href='../S/282.html#L1126'>dbop</a>             1126 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1128'>dbop</a>             1128 libutil/dbop.c 		sqlite3_close(dbop-&gt;db3);</span>
<span class='curline'><a href='../S/282.html#L1131'>dbop</a>             1131 libutil/dbop.c 	if (sqlite3_changes(dbop-&gt;db3) == 0) {</span>
<span class='curline'><a href='../S/282.html#L1134'>dbop</a>             1134 libutil/dbop.c 					dbop-&gt;tblname, key, dbop3_quote((char *)dat));</span>
<span class='curline'><a href='../S/282.html#L1135'>dbop</a>             1135 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1137'>dbop</a>             1137 libutil/dbop.c 			sqlite3_close(dbop-&gt;db3);</span>
<span class='curline'><a href='../S/282.html#L1144'>dbop</a>             1144 libutil/dbop.c dbop3_first(DBOP *dbop, const char *name, regex_t *preg, int flags) {</span>
<span class='curline'><a href='../S/282.html#L1149'>dbop</a>             1149 libutil/dbop.c 	dbop-&gt;done = 0; 	/* This is turned on when it receives SQLITE_DONE. */</span>
<span class='curline'><a href='../S/282.html#L1151'>dbop</a>             1151 libutil/dbop.c 	strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1154'>dbop</a>             1154 libutil/dbop.c 		if (dbop-&gt;ioflags &amp; DBOP_PREFIX) {</span>
<span class='curline'><a href='../S/282.html#L1166'>dbop</a>             1166 libutil/dbop.c 		strlimcpy(dbop-&gt;key, name, sizeof(dbop-&gt;key));</span>
<span class='curline'><a href='../S/282.html#L1167'>dbop</a>             1167 libutil/dbop.c 		dbop-&gt;keylen = strlen(name);</span>
<span class='curline'><a href='../S/282.html#L1170'>dbop</a>             1170 libutil/dbop.c 	if (dbop-&gt;stmt) {</span>
<span class='curline'><a href='../S/282.html#L1171'>dbop</a>             1171 libutil/dbop.c 		rc = sqlite3_finalize(dbop-&gt;stmt);</span>
<span class='curline'><a href='../S/282.html#L1174'>dbop</a>             1174 libutil/dbop.c 		dbop-&gt;stmt = NULL;</span>
<span class='curline'><a href='../S/282.html#L1176'>dbop</a>             1176 libutil/dbop.c 	rc = sqlite3_prepare_v2(dbop-&gt;db3, strbuf_value(sql), -1, &amp;dbop-&gt;stmt, NULL);</span>
<span class='curline'><a href='../S/282.html#L1187'>dbop</a>             1187 libutil/dbop.c 		if (dbop-&gt;done)</span>
<span class='curline'><a href='../S/282.html#L1189'>dbop</a>             1189 libutil/dbop.c 		rc = sqlite3_step(dbop-&gt;stmt);</span>
<span class='curline'><a href='../S/282.html#L1193'>dbop</a>             1193 libutil/dbop.c 			dbop-&gt;readcount++;</span>
<span class='curline'><a href='../S/282.html#L1194'>dbop</a>             1194 libutil/dbop.c 			dbop-&gt;lastrowid = sqlite3_column_int64(dbop-&gt;stmt, 0);</span>
<span class='curline'><a href='../S/282.html#L1195'>dbop</a>             1195 libutil/dbop.c 			key = (char *)sqlite3_column_text(dbop-&gt;stmt, 1);</span>
<span class='curline'><a href='../S/282.html#L1197'>dbop</a>             1197 libutil/dbop.c 				if (dbop-&gt;ioflags &amp; DBOP_PREFIX) {</span>
<span class='curline'><a href='../S/282.html#L1198'>dbop</a>             1198 libutil/dbop.c 					if (strncmp(key, dbop-&gt;key, dbop-&gt;keylen))</span>
<span class='curline'><a href='../S/282.html#L1201'>dbop</a>             1201 libutil/dbop.c 					if (strcmp(key, dbop-&gt;key)) </span>
<span class='curline'><a href='../S/282.html#L1204'>dbop</a>             1204 libutil/dbop.c 				if (dbop-&gt;preg &amp;&amp; regexec(dbop-&gt;preg, key, 0, 0, 0) != 0)</span>
<span class='curline'><a href='../S/282.html#L1208'>dbop</a>             1208 libutil/dbop.c 				if (ismeta(key) &amp;&amp; !(dbop-&gt;openflags &amp; DBOP_RAW))</span>
<span class='curline'><a href='../S/282.html#L1210'>dbop</a>             1210 libutil/dbop.c 				if (dbop-&gt;preg &amp;&amp; regexec(dbop-&gt;preg, key, 0, 0, 0) != 0)</span>
<span class='curline'><a href='../S/282.html#L1218'>dbop</a>             1218 libutil/dbop.c 	strbuf_clear(dbop-&gt;sb);</span>
<span class='curline'><a href='../S/282.html#L1219'>dbop</a>             1219 libutil/dbop.c 	strbuf_puts0(dbop-&gt;sb, (char *)sqlite3_column_text(dbop-&gt;stmt, 2));</span>
<span class='curline'><a href='../S/282.html#L1220'>dbop</a>             1220 libutil/dbop.c 	dbop-&gt;lastsize = strbuf_getlen(dbop-&gt;sb) - 1;</span>
<span class='curline'><a href='../S/282.html#L1221'>dbop</a>             1221 libutil/dbop.c 	dbop-&gt;lastflag = (char *)sqlite3_column_text(dbop-&gt;stmt, 3);</span>
<span class='curline'><a href='../S/282.html#L1222'>dbop</a>             1222 libutil/dbop.c 	if (dbop-&gt;lastflag)</span>
<span class='curline'><a href='../S/282.html#L1223'>dbop</a>             1223 libutil/dbop.c 		strbuf_puts(dbop-&gt;sb, dbop-&gt;lastflag);</span>
<span class='curline'><a href='../S/282.html#L1224'>dbop</a>             1224 libutil/dbop.c 	dbop-&gt;lastdat = strbuf_value(dbop-&gt;sb);</span>
<span class='curline'><a href='../S/282.html#L1225'>dbop</a>             1225 libutil/dbop.c 	if (dbop-&gt;lastflag)</span>
<span class='curline'><a href='../S/282.html#L1226'>dbop</a>             1226 libutil/dbop.c 		dbop-&gt;lastflag = dbop-&gt;lastdat + dbop-&gt;lastsize + 1;</span>
<span class='curline'><a href='../S/282.html#L1227'>dbop</a>             1227 libutil/dbop.c 	dbop-&gt;lastkey = key;</span>
<span class='curline'><a href='../S/282.html#L1228'>dbop</a>             1228 libutil/dbop.c 	dbop-&gt;lastkeysize = strlen(dbop-&gt;lastkey);</span>
<span class='curline'><a href='../S/282.html#L1231'>dbop</a>             1231 libutil/dbop.c 		strlimcpy(dbop-&gt;prev, key, sizeof(dbop-&gt;prev));</span>
<span class='curline'><a href='../S/282.html#L1234'>dbop</a>             1234 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L1237'>dbop</a>             1237 libutil/dbop.c 	dbop-&gt;done = 1;</span>
<span class='curline'><a href='../S/282.html#L1238'>dbop</a>             1238 libutil/dbop.c 	dbop-&gt;lastdat = NULL;</span>
<span class='curline'><a href='../S/282.html#L1239'>dbop</a>             1239 libutil/dbop.c 	dbop-&gt;lastsize = 0;</span>
<span class='curline'><a href='../S/282.html#L1240'>dbop</a>             1240 libutil/dbop.c 	dbop-&gt;lastflag = NULL;</span>
<span class='curline'><a href='../S/282.html#L1241'>dbop</a>             1241 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L1244'>dbop</a>             1244 libutil/dbop.c dbop3_next(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L1256'>dbop</a>             1256 libutil/dbop.c 		if (dbop-&gt;done)</span>
<span class='curline'><a href='../S/282.html#L1258'>dbop</a>             1258 libutil/dbop.c 		rc = sqlite3_step(dbop-&gt;stmt);</span>
<span class='curline'><a href='../S/282.html#L1262'>dbop</a>             1262 libutil/dbop.c 			dbop-&gt;readcount++;</span>
<span class='curline'><a href='../S/282.html#L1263'>dbop</a>             1263 libutil/dbop.c 			dbop-&gt;lastrowid = sqlite3_column_int64(dbop-&gt;stmt, 0);</span>
<span class='curline'><a href='../S/282.html#L1264'>dbop</a>             1264 libutil/dbop.c 			key = (char *)sqlite3_column_text(dbop-&gt;stmt, 1);</span>
<span class='curline'><a href='../S/282.html#L1265'>dbop</a>             1265 libutil/dbop.c 			dat = (char *)sqlite3_column_text(dbop-&gt;stmt, 2);</span>
<span class='curline'><a href='../S/282.html#L1267'>dbop</a>             1267 libutil/dbop.c 			if (!(dbop-&gt;openflags &amp; DBOP_RAW)) {</span>
<span class='curline'><a href='../S/282.html#L1268'>dbop</a>             1268 libutil/dbop.c 				if (dbop-&gt;ioflags &amp; DBOP_KEY &amp;&amp; ismeta(key))</span>
<span class='curline'><a href='../S/282.html#L1273'>dbop</a>             1273 libutil/dbop.c 			if (dbop-&gt;ioflags &amp; DBOP_KEY) {</span>
<span class='curline'><a href='../S/282.html#L1274'>dbop</a>             1274 libutil/dbop.c 				if (!strcmp(dbop-&gt;prev, key))</span>
<span class='curline'><a href='../S/282.html#L1278'>dbop</a>             1278 libutil/dbop.c 				strlimcpy(dbop-&gt;prev, key, sizeof(dbop-&gt;prev));</span>
<span class='curline'><a href='../S/282.html#L1280'>dbop</a>             1280 libutil/dbop.c 			if (dbop-&gt;ioflags &amp; DBOP_PREFIX) {</span>
<span class='curline'><a href='../S/282.html#L1281'>dbop</a>             1281 libutil/dbop.c 				if (strncmp(key, dbop-&gt;key, dbop-&gt;keylen))</span>
<span class='curline'><a href='../S/282.html#L1283'>dbop</a>             1283 libutil/dbop.c 			} else if (dbop-&gt;keylen) {</span>
<span class='curline'><a href='../S/282.html#L1284'>dbop</a>             1284 libutil/dbop.c 				if (strcmp(key, dbop-&gt;key)) </span>
<span class='curline'><a href='../S/282.html#L1287'>dbop</a>             1287 libutil/dbop.c 			if (dbop-&gt;preg &amp;&amp; regexec(dbop-&gt;preg, key, 0, 0, 0) != 0)</span>
<span class='curline'><a href='../S/282.html#L1294'>dbop</a>             1294 libutil/dbop.c 	strbuf_clear(dbop-&gt;sb);</span>
<span class='curline'><a href='../S/282.html#L1295'>dbop</a>             1295 libutil/dbop.c 	strbuf_puts0(dbop-&gt;sb, (char *)sqlite3_column_text(dbop-&gt;stmt, 2));</span>
<span class='curline'><a href='../S/282.html#L1296'>dbop</a>             1296 libutil/dbop.c 	dbop-&gt;lastsize = strbuf_getlen(dbop-&gt;sb) - 1;</span>
<span class='curline'><a href='../S/282.html#L1297'>dbop</a>             1297 libutil/dbop.c 	dbop-&gt;lastflag = (char *)sqlite3_column_text(dbop-&gt;stmt, 3);</span>
<span class='curline'><a href='../S/282.html#L1298'>dbop</a>             1298 libutil/dbop.c 	if (dbop-&gt;lastflag)</span>
<span class='curline'><a href='../S/282.html#L1299'>dbop</a>             1299 libutil/dbop.c 		strbuf_puts(dbop-&gt;sb, dbop-&gt;lastflag);</span>
<span class='curline'><a href='../S/282.html#L1300'>dbop</a>             1300 libutil/dbop.c 	dbop-&gt;lastdat = strbuf_value(dbop-&gt;sb);</span>
<span class='curline'><a href='../S/282.html#L1301'>dbop</a>             1301 libutil/dbop.c 	if (dbop-&gt;lastflag)</span>
<span class='curline'><a href='../S/282.html#L1302'>dbop</a>             1302 libutil/dbop.c 		dbop-&gt;lastflag = dbop-&gt;lastdat + dbop-&gt;lastsize + 1;</span>
<span class='curline'><a href='../S/282.html#L1303'>dbop</a>             1303 libutil/dbop.c 	dbop-&gt;lastkey = key;</span>
<span class='curline'><a href='../S/282.html#L1304'>dbop</a>             1304 libutil/dbop.c 	dbop-&gt;lastkeysize = strlen(dbop-&gt;lastkey);</span>
<span class='curline'><a href='../S/282.html#L1305'>dbop</a>             1305 libutil/dbop.c 	if (dbop-&gt;ioflags &amp; DBOP_KEY) {</span>
<span class='curline'><a href='../S/282.html#L1306'>dbop</a>             1306 libutil/dbop.c 		strlimcpy(dbop-&gt;prev, key, sizeof(dbop-&gt;prev));</span>
<span class='curline'><a href='../S/282.html#L1309'>dbop</a>             1309 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L1311'>dbop</a>             1311 libutil/dbop.c 	dbop-&gt;done = 1;</span>
<span class='curline'><a href='../S/282.html#L1312'>dbop</a>             1312 libutil/dbop.c 	dbop-&gt;lastdat = NULL;</span>
<span class='curline'><a href='../S/282.html#L1313'>dbop</a>             1313 libutil/dbop.c 	dbop-&gt;lastsize = 0;</span>
<span class='curline'><a href='../S/282.html#L1314'>dbop</a>             1314 libutil/dbop.c 	return dbop-&gt;lastdat;</span>
<span class='curline'><a href='../S/282.html#L1317'>dbop</a>             1317 libutil/dbop.c dbop3_close(DBOP *dbop) {</span>
<span class='curline'><a href='../S/282.html#L1321'>dbop</a>             1321 libutil/dbop.c 	rc = sqlite3_exec(dbop-&gt;db3, "end transaction", NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1327'>dbop</a>             1327 libutil/dbop.c 	if (dbop-&gt;mode == 1 &amp;&amp; dbop-&gt;openflags &amp; DBOP_DUP) {</span>
<span class='curline'><a href='../S/282.html#L1332'>dbop</a>             1332 libutil/dbop.c 		strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1334'>dbop</a>             1334 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1339'>dbop</a>             1339 libutil/dbop.c 		strbuf_puts(sql, dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1341'>dbop</a>             1341 libutil/dbop.c 		rc = sqlite3_exec(dbop-&gt;db3, strbuf_value(sql), NULL, NULL, &amp;errmsg);</span>
<span class='curline'><a href='../S/282.html#L1345'>dbop</a>             1345 libutil/dbop.c 	if (dbop-&gt;stmt) {</span>
<span class='curline'><a href='../S/282.html#L1346'>dbop</a>             1346 libutil/dbop.c 		rc = sqlite3_finalize(dbop-&gt;stmt);</span>
<span class='curline'><a href='../S/282.html#L1349'>dbop</a>             1349 libutil/dbop.c 		dbop-&gt;stmt = NULL;</span>
<span class='curline'><a href='../S/282.html#L1351'>dbop</a>             1351 libutil/dbop.c 	if (dbop-&gt;stmt_put3) {</span>
<span class='curline'><a href='../S/282.html#L1352'>dbop</a>             1352 libutil/dbop.c 		rc = sqlite3_finalize(dbop-&gt;stmt_put3);</span>
<span class='curline'><a href='../S/282.html#L1355'>dbop</a>             1355 libutil/dbop.c 		dbop-&gt;stmt_put3 = NULL;</span>
<span class='curline'><a href='../S/282.html#L1357'>dbop</a>             1357 libutil/dbop.c 	rc = sqlite3_close(dbop-&gt;db3);</span>
<span class='curline'><a href='../S/282.html#L1360'>dbop</a>             1360 libutil/dbop.c 	dbop-&gt;db3 = NULL;</span>
<span class='curline'><a href='../S/282.html#L1361'>dbop</a>             1361 libutil/dbop.c 	if (dbop-&gt;tblname)</span>
<span class='curline'><a href='../S/282.html#L1362'>dbop</a>             1362 libutil/dbop.c 		free((void *)dbop-&gt;tblname);</span>
<span class='curline'><a href='../S/282.html#L1363'>dbop</a>             1363 libutil/dbop.c 	strbuf_close(dbop-&gt;sb);</span>
<span class='curline'><a href='../S/282.html#L1364'>dbop</a>             1364 libutil/dbop.c 	free(dbop);</span>
<span class='curline'><a href='../S/284.html#L33'>dbop</a>               33 libutil/defined.c static DBOP *dbop = NULL;</span>
<span class='curline'><a href='../S/284.html#L42'>dbop</a>               42 libutil/defined.c 	if (dbop == NULL) {</span>
<span class='curline'><a href='../S/284.html#L50'>dbop</a>               50 libutil/defined.c 		dbop = dbop_open(makepath(dbpath, "GTAGS", NULL), 0, 0, 0);</span>
<span class='curline'><a href='../S/284.html#L51'>dbop</a>               51 libutil/defined.c 		if (dbop == NULL)</span>
<span class='curline'><a href='../S/284.html#L54'>dbop</a>               54 libutil/defined.c 	if (dbop_get(dbop, name))</span>
<span class='curline'><a href='../S/301.html#L45'>dbop</a>               45 libutil/gpathop.c static DBOP *dbop;</span>
<span class='curline'><a href='../S/301.html#L132'>dbop</a>              132 libutil/gpathop.c 	dbop = dbop_open(makepath(dbpath, dbname(GPATH), NULL), mode, 0644, openflags);</span>
<span class='curline'><a href='../S/301.html#L133'>dbop</a>              133 libutil/gpathop.c 	if (dbop == NULL)</span>
<span class='curline'><a href='../S/301.html#L136'>dbop</a>              136 libutil/gpathop.c 		dbop_putversion(dbop, create_version);</span>
<span class='curline'><a href='../S/301.html#L140'>dbop</a>              140 libutil/gpathop.c 		const char *path = dbop_get(dbop, NEXTKEY);</span>
<span class='curline'><a href='../S/301.html#L145'>dbop</a>              145 libutil/gpathop.c 		format_version = dbop_getversion(dbop);</span>
<span class='curline'><a href='../S/301.html#L171'>dbop</a>              171 libutil/gpathop.c 	if (dbop_get(dbop, path) != NULL)</span>
<span class='curline'><a href='../S/301.html#L182'>dbop</a>              182 libutil/gpathop.c 	dbop_put_path(dbop, path, strbuf_value(sb), type == GPATH_OTHER ? "o" : NULL);</span>
<span class='curline'><a href='../S/301.html#L188'>dbop</a>              188 libutil/gpathop.c 	dbop_put_path(dbop, sfid, strbuf_value(sb), type == GPATH_OTHER ? "o" : NULL);</span>
<span class='curline'><a href='../S/301.html#L203'>dbop</a>              203 libutil/gpathop.c 	const char *fid = dbop_get(dbop, path);</span>
<span class='curline'><a href='../S/301.html#L206'>dbop</a>              206 libutil/gpathop.c 		const char *flag = dbop_getflag(dbop);</span>
<span class='curline'><a href='../S/301.html#L224'>dbop</a>              224 libutil/gpathop.c 	const char *path = dbop_get(dbop, fid);</span>
<span class='curline'><a href='../S/301.html#L227'>dbop</a>              227 libutil/gpathop.c 		const char *flag = dbop_getflag(dbop);</span>
<span class='curline'><a href='../S/301.html#L276'>dbop</a>              276 libutil/gpathop.c 	fid = dbop_get(dbop, path);</span>
<span class='curline'><a href='../S/301.html#L279'>dbop</a>              279 libutil/gpathop.c 	dbop_delete(dbop, fid);</span>
<span class='curline'><a href='../S/301.html#L280'>dbop</a>              280 libutil/gpathop.c 	dbop_delete(dbop, path);</span>
<span class='curline'><a href='../S/301.html#L309'>dbop</a>              309 libutil/gpathop.c 	for (path = dbop_first(dbop, "./", NULL, DBOP_PREFIX); path != NULL; path = dbop_next(dbop)) {</span>
<span class='curline'><a href='../S/301.html#L310'>dbop</a>              310 libutil/gpathop.c 		const char *flag = dbop_getflag(dbop);</span>
<span class='curline'><a href='../S/301.html#L343'>dbop</a>              343 libutil/gpathop.c 		dbop_close(dbop);</span>
<span class='curline'><a href='../S/301.html#L349'>dbop</a>              349 libutil/gpathop.c 			dbop_update(dbop, NEXTKEY, fid);</span>
<span class='curline'><a href='../S/301.html#L352'>dbop</a>              352 libutil/gpathop.c 	dbop_close(dbop);</span>
<span class='curline'><a href='../S/301.html#L384'>dbop</a>              384 libutil/gpathop.c 	gfind-&gt;dbop = dbop_open(makepath(dbpath, dbname(GPATH), NULL), 0, 0, 0);</span>
<span class='curline'><a href='../S/301.html#L385'>dbop</a>              385 libutil/gpathop.c 	if (gfind-&gt;dbop == NULL)</span>
<span class='curline'><a href='../S/301.html#L395'>dbop</a>              395 libutil/gpathop.c 	gfind-&gt;version = dbop_getversion(gfind-&gt;dbop);</span>
<span class='curline'><a href='../S/301.html#L446'>dbop</a>              446 libutil/gpathop.c 			gfind-&gt;path = dbop_first(gfind-&gt;dbop, gfind-&gt;prefix, NULL, DBOP_KEY | DBOP_PREFIX);</span>
<span class='curline'><a href='../S/301.html#L448'>dbop</a>              448 libutil/gpathop.c 			gfind-&gt;path = dbop_next(gfind-&gt;dbop);</span>
<span class='curline'><a href='../S/301.html#L458'>dbop</a>              458 libutil/gpathop.c 		flag = dbop_getflag(gfind-&gt;dbop);</span>
<span class='curline'><a href='../S/301.html#L473'>dbop</a>              473 libutil/gpathop.c 	dbop_close(gfind-&gt;dbop);</span>
<span class='curline'><a href='../S/302.html#L45'>dbop</a>               45 libutil/gpathop.h 	DBOP *dbop;</span>
<span class='curline'><a href='../S/304.html#L282'>dbop</a>              282 libutil/gtagsop.c 		int defined = is_defined_in_GTAGS(gtop, gtop-&gt;dbop-&gt;lastkey);		\</span>
<span class='curline'><a href='../S/304.html#L380'>dbop</a>              380 libutil/gtagsop.c 	gtop-&gt;dbop = dbop_open(tagfile, dbmode, 0644, dbop_flags);</span>
<span class='curline'><a href='../S/304.html#L381'>dbop</a>              381 libutil/gtagsop.c 	if (gtop-&gt;dbop == NULL) {</span>
<span class='curline'><a href='../S/304.html#L396'>dbop</a>              396 libutil/gtagsop.c 		format_version = dbop_getversion(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L421'>dbop</a>              421 libutil/gtagsop.c 			dbop_putoption(gtop-&gt;dbop, COMPACTKEY, NULL);</span>
<span class='curline'><a href='../S/304.html#L423'>dbop</a>              423 libutil/gtagsop.c 			dbop_putoption(gtop-&gt;dbop, COMPRESSKEY, DEFAULT_ABBREVIATION);</span>
<span class='curline'><a href='../S/304.html#L427'>dbop</a>              427 libutil/gtagsop.c 			dbop_putoption(gtop-&gt;dbop, COMPLINEKEY, NULL);</span>
<span class='curline'><a href='../S/304.html#L429'>dbop</a>              429 libutil/gtagsop.c 			dbop_putoption(gtop-&gt;dbop, COMPNAMEKEY, NULL);</span>
<span class='curline'><a href='../S/304.html#L430'>dbop</a>              430 libutil/gtagsop.c 		dbop_putversion(gtop-&gt;dbop, gtop-&gt;format_version); </span>
<span class='curline'><a href='../S/304.html#L442'>dbop</a>              442 libutil/gtagsop.c 		gtop-&gt;format_version = dbop_getversion(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L448'>dbop</a>              448 libutil/gtagsop.c 		if (dbop_getoption(gtop-&gt;dbop, COMPACTKEY) != NULL)</span>
<span class='curline'><a href='../S/304.html#L450'>dbop</a>              450 libutil/gtagsop.c 		if ((p = dbop_getoption(gtop-&gt;dbop, COMPRESSKEY)) != NULL) {</span>
<span class='curline'><a href='../S/304.html#L454'>dbop</a>              454 libutil/gtagsop.c 		if (dbop_getoption(gtop-&gt;dbop, COMPLINEKEY) != NULL)</span>
<span class='curline'><a href='../S/304.html#L456'>dbop</a>              456 libutil/gtagsop.c 		if (dbop_getoption(gtop-&gt;dbop, COMPNAMEKEY) != NULL)</span>
<span class='curline'><a href='../S/304.html#L539'>dbop</a>              539 libutil/gtagsop.c 	dbop_put_tag(gtop-&gt;dbop, key, strbuf_value(gtop-&gt;sb));</span>
<span class='curline'><a href='../S/304.html#L568'>dbop</a>              568 libutil/gtagsop.c 	if (gtop-&gt;dbop-&gt;openflags &amp; DBOP_SQLITE3) {</span>
<span class='curline'><a href='../S/304.html#L579'>dbop</a>              579 libutil/gtagsop.c 		dbop_delete(gtop-&gt;dbop, strbuf_value(where));</span>
<span class='curline'><a href='../S/304.html#L583'>dbop</a>              583 libutil/gtagsop.c 	for (tagline = dbop_first(gtop-&gt;dbop, NULL, NULL, 0); tagline; tagline = dbop_next(gtop-&gt;dbop)) {</span>
<span class='curline'><a href='../S/304.html#L592'>dbop</a>              592 libutil/gtagsop.c 			dbop_delete(gtop-&gt;dbop, NULL);</span>
<span class='curline'><a href='../S/304.html#L808'>dbop</a>              808 libutil/gtagsop.c 		for (tagline = dbop_first(gtop-&gt;dbop, gtop-&gt;key, gtop-&gt;preg, gtop-&gt;dbflags);</span>
<span class='curline'><a href='../S/304.html#L810'>dbop</a>              810 libutil/gtagsop.c 		     tagline = dbop_next(gtop-&gt;dbop))</span>
<span class='curline'><a href='../S/304.html#L856'>dbop</a>              856 libutil/gtagsop.c 		for (gtop-&gt;gtp.tag = dbop_first(gtop-&gt;dbop, gtop-&gt;key, gtop-&gt;preg, gtop-&gt;dbflags);</span>
<span class='curline'><a href='../S/304.html#L858'>dbop</a>              858 libutil/gtagsop.c 		     gtop-&gt;gtp.tag = dbop_next(gtop-&gt;dbop))</span>
<span class='curline'><a href='../S/304.html#L882'>dbop</a>              882 libutil/gtagsop.c 		for (tagline = dbop_first(gtop-&gt;dbop, gtop-&gt;key, gtop-&gt;preg, gtop-&gt;dbflags);</span>
<span class='curline'><a href='../S/304.html#L884'>dbop</a>              884 libutil/gtagsop.c 			tagline = dbop_next(gtop-&gt;dbop))</span>
<span class='curline'><a href='../S/304.html#L897'>dbop</a>              897 libutil/gtagsop.c 		dbop_unread(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L922'>dbop</a>              922 libutil/gtagsop.c 		gtop-&gt;gtp.tag = dbop_next(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L924'>dbop</a>              924 libutil/gtagsop.c 		for (; gtop-&gt;gtp.tag != NULL; gtop-&gt;gtp.tag = dbop_next(gtop-&gt;dbop))</span>
<span class='curline'><a href='../S/304.html#L931'>dbop</a>              931 libutil/gtagsop.c 				gtop-&gt;gtp.tag = dbop_first(gtop-&gt;dbop, gtop-&gt;key, gtop-&gt;preg, gtop-&gt;dbflags);</span>
<span class='curline'><a href='../S/304.html#L949'>dbop</a>              949 libutil/gtagsop.c 				gtop-&gt;gtp.tag = dbop_first(gtop-&gt;dbop, gtop-&gt;key, gtop-&gt;preg, gtop-&gt;dbflags);</span>
<span class='curline'><a href='../S/304.html#L952'>dbop</a>              952 libutil/gtagsop.c 				dbop_unread(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L964'>dbop</a>              964 libutil/gtagsop.c 	fprintf(stderr, "Numbers of dbop  (%s): %d\n", dbname(gtop-&gt;db), gtop-&gt;dbop-&gt;readcount);</span>
<span class='curline'><a href='../S/304.html#L989'>dbop</a>              989 libutil/gtagsop.c 	dbop_close(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/304.html#L1087'>dbop</a>             1087 libutil/gtagsop.c 						dbop_put_tag(gtop-&gt;dbop, key, strbuf_value(gtop-&gt;sb));</span>
<span class='curline'><a href='../S/304.html#L1111'>dbop</a>             1111 libutil/gtagsop.c 					dbop_put_tag(gtop-&gt;dbop, key, strbuf_value(gtop-&gt;sb));</span>
<span class='curline'><a href='../S/304.html#L1118'>dbop</a>             1118 libutil/gtagsop.c 			dbop_put_tag(gtop-&gt;dbop, key, strbuf_value(gtop-&gt;sb));</span>
<span class='curline'><a href='../S/304.html#L1155'>dbop</a>             1155 libutil/gtagsop.c 	while ((tagline = dbop_next(gtop-&gt;dbop)) != NULL) {</span>
<span class='curline'><a href='../S/304.html#L1163'>dbop</a>             1163 libutil/gtagsop.c 			strlimcpy(gtop-&gt;cur_tagname, gtop-&gt;dbop-&gt;lastkey, sizeof(gtop-&gt;cur_tagname));</span>
<span class='curline'><a href='../S/304.html#L1164'>dbop</a>             1164 libutil/gtagsop.c 		} else if (strcmp(gtop-&gt;cur_tagname, gtop-&gt;dbop-&gt;lastkey) != 0) {</span>
<span class='curline'><a href='../S/304.html#L1168'>dbop</a>             1168 libutil/gtagsop.c 			dbop_unread(gtop-&gt;dbop);</span>
<span class='curline'><a href='../S/305.html#L101'>dbop</a>              101 libutil/gtagsop.h 	DBOP *dbop;			/**&lt; descripter of DBOP */</span>
</pre>
</body>
</html>
