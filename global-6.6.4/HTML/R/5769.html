<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>sqlite3GlobalConfig</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.4' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/185.html#L14666'>sqlite3GlobalConfig</a> 14666 libdb/sqlite3.c           nByte += sqlite3GlobalConfig.m.xRoundup(sizeof(HashElem)) * (</span>
<span class='curline'><a href='../S/185.html#L15204'>sqlite3GlobalConfig</a> 15204 libdb/sqlite3.c   if( sqlite3GlobalConfig.bLocaltimeFault ) pX = 0;</span>
<span class='curline'><a href='../S/185.html#L15211'>sqlite3GlobalConfig</a> 15211 libdb/sqlite3.c   if( sqlite3GlobalConfig.bLocaltimeFault ) return 1;</span>
<span class='curline'><a href='../S/185.html#L16570'>sqlite3GlobalConfig</a> 16570 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L16583'>sqlite3GlobalConfig</a> 16583 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L16639'>sqlite3GlobalConfig</a> 16639 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L16655'>sqlite3GlobalConfig</a> 16655 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L16928'>sqlite3GlobalConfig</a> 16928 libdb/sqlite3.c   if( !sqlite3GlobalConfig.bMemstat ){</span>
<span class='curline'><a href='../S/185.html#L17042'>sqlite3GlobalConfig</a> 17042 libdb/sqlite3.c   assert( sqlite3GlobalConfig.bMemstat || sqlite3GlobalConfig.bCoreMutex==0 </span>
<span class='curline'><a href='../S/185.html#L17119'>sqlite3GlobalConfig</a> 17119 libdb/sqlite3.c   if( p &amp;&amp; sqlite3GlobalConfig.m.xMalloc==sqlite3MemMalloc ){</span>
<span class='curline'><a href='../S/185.html#L17138'>sqlite3GlobalConfig</a> 17138 libdb/sqlite3.c   if( p &amp;&amp; sqlite3GlobalConfig.m.xMalloc==sqlite3MemMalloc ){</span>
<span class='curline'><a href='../S/185.html#L17160'>sqlite3GlobalConfig</a> 17160 libdb/sqlite3.c   if( p &amp;&amp; sqlite3GlobalConfig.m.xMalloc==sqlite3MemMalloc ){</span>
<span class='curline'><a href='../S/185.html#L17490'>sqlite3GlobalConfig</a> 17490 libdb/sqlite3.c   if( sqlite3GlobalConfig.bMemstat==0 &amp;&amp; mem3.mutex==0 ){</span>
<span class='curline'><a href='../S/185.html#L17821'>sqlite3GlobalConfig</a> 17821 libdb/sqlite3.c   if( !sqlite3GlobalConfig.pHeap ){</span>
<span class='curline'><a href='../S/185.html#L17827'>sqlite3GlobalConfig</a> 17827 libdb/sqlite3.c   mem3.aPool = (Mem3Block *)sqlite3GlobalConfig.pHeap;</span>
<span class='curline'><a href='../S/185.html#L17828'>sqlite3GlobalConfig</a> 17828 libdb/sqlite3.c   mem3.nPool = (sqlite3GlobalConfig.nHeap / sizeof(Mem3Block)) - 2;</span>
<span class='curline'><a href='../S/185.html#L18209'>sqlite3GlobalConfig</a> 18209 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L18423'>sqlite3GlobalConfig</a> 18423 libdb/sqlite3.c   nByte = sqlite3GlobalConfig.nHeap;</span>
<span class='curline'><a href='../S/185.html#L18424'>sqlite3GlobalConfig</a> 18424 libdb/sqlite3.c   zByte = (u8*)sqlite3GlobalConfig.pHeap;</span>
<span class='curline'><a href='../S/185.html#L18428'>sqlite3GlobalConfig</a> 18428 libdb/sqlite3.c   nMinLog = memsys5Log(sqlite3GlobalConfig.mnReq);</span>
<span class='curline'><a href='../S/185.html#L18454'>sqlite3GlobalConfig</a> 18454 libdb/sqlite3.c   if( sqlite3GlobalConfig.bMemstat==0 ){</span>
<span class='curline'><a href='../S/185.html#L18568'>sqlite3GlobalConfig</a> 18568 libdb/sqlite3.c   if( !sqlite3GlobalConfig.mutex.xMutexAlloc ){</span>
<span class='curline'><a href='../S/185.html#L18575'>sqlite3GlobalConfig</a> 18575 libdb/sqlite3.c     sqlite3_mutex_methods *pTo = &amp;sqlite3GlobalConfig.mutex;</span>
<span class='curline'><a href='../S/185.html#L18577'>sqlite3GlobalConfig</a> 18577 libdb/sqlite3.c     if( sqlite3GlobalConfig.bCoreMutex ){</span>
<span class='curline'><a href='../S/185.html#L18587'>sqlite3GlobalConfig</a> 18587 libdb/sqlite3.c   rc = sqlite3GlobalConfig.mutex.xMutexInit();</span>
<span class='curline'><a href='../S/185.html#L18602'>sqlite3GlobalConfig</a> 18602 libdb/sqlite3.c   if( sqlite3GlobalConfig.mutex.xMutexEnd ){</span>
<span class='curline'><a href='../S/185.html#L18603'>sqlite3GlobalConfig</a> 18603 libdb/sqlite3.c     rc = sqlite3GlobalConfig.mutex.xMutexEnd();</span>
<span class='curline'><a href='../S/185.html#L18620'>sqlite3GlobalConfig</a> 18620 libdb/sqlite3.c   return sqlite3GlobalConfig.mutex.xMutexAlloc(id);</span>
<span class='curline'><a href='../S/185.html#L18624'>sqlite3GlobalConfig</a> 18624 libdb/sqlite3.c   if( !sqlite3GlobalConfig.bCoreMutex ){</span>
<span class='curline'><a href='../S/185.html#L18628'>sqlite3GlobalConfig</a> 18628 libdb/sqlite3.c   return sqlite3GlobalConfig.mutex.xMutexAlloc(id);</span>
<span class='curline'><a href='../S/185.html#L18636'>sqlite3GlobalConfig</a> 18636 libdb/sqlite3.c     sqlite3GlobalConfig.mutex.xMutexFree(p);</span>
<span class='curline'><a href='../S/185.html#L18646'>sqlite3GlobalConfig</a> 18646 libdb/sqlite3.c     sqlite3GlobalConfig.mutex.xMutexEnter(p);</span>
<span class='curline'><a href='../S/185.html#L18657'>sqlite3GlobalConfig</a> 18657 libdb/sqlite3.c     return sqlite3GlobalConfig.mutex.xMutexTry(p);</span>
<span class='curline'><a href='../S/185.html#L18670'>sqlite3GlobalConfig</a> 18670 libdb/sqlite3.c     sqlite3GlobalConfig.mutex.xMutexLeave(p);</span>
<span class='curline'><a href='../S/185.html#L18680'>sqlite3GlobalConfig</a> 18680 libdb/sqlite3.c   return p==0 || sqlite3GlobalConfig.mutex.xMutexHeld(p);</span>
<span class='curline'><a href='../S/185.html#L18683'>sqlite3GlobalConfig</a> 18683 libdb/sqlite3.c   return p==0 || sqlite3GlobalConfig.mutex.xMutexNotheld(p);</span>
<span class='curline'><a href='../S/185.html#L20076'>sqlite3GlobalConfig</a> 20076 libdb/sqlite3.c   if( sqlite3GlobalConfig.m.xMalloc==0 ){</span>
<span class='curline'><a href='../S/185.html#L20080'>sqlite3GlobalConfig</a> 20080 libdb/sqlite3.c   if( sqlite3GlobalConfig.bCoreMutex ){</span>
<span class='curline'><a href='../S/185.html#L20083'>sqlite3GlobalConfig</a> 20083 libdb/sqlite3.c   if( sqlite3GlobalConfig.pScratch &amp;&amp; sqlite3GlobalConfig.szScratch&gt;=100</span>
<span class='curline'><a href='../S/185.html#L20084'>sqlite3GlobalConfig</a> 20084 libdb/sqlite3.c       &amp;&amp; sqlite3GlobalConfig.nScratch&gt;0 ){</span>
<span class='curline'><a href='../S/185.html#L20087'>sqlite3GlobalConfig</a> 20087 libdb/sqlite3.c     sz = ROUNDDOWN8(sqlite3GlobalConfig.szScratch);</span>
<span class='curline'><a href='../S/185.html#L20088'>sqlite3GlobalConfig</a> 20088 libdb/sqlite3.c     sqlite3GlobalConfig.szScratch = sz;</span>
<span class='curline'><a href='../S/185.html#L20089'>sqlite3GlobalConfig</a> 20089 libdb/sqlite3.c     pSlot = (ScratchFreeslot*)sqlite3GlobalConfig.pScratch;</span>
<span class='curline'><a href='../S/185.html#L20090'>sqlite3GlobalConfig</a> 20090 libdb/sqlite3.c     n = sqlite3GlobalConfig.nScratch;</span>
<span class='curline'><a href='../S/185.html#L20101'>sqlite3GlobalConfig</a> 20101 libdb/sqlite3.c     sqlite3GlobalConfig.pScratch = 0;</span>
<span class='curline'><a href='../S/185.html#L20102'>sqlite3GlobalConfig</a> 20102 libdb/sqlite3.c     sqlite3GlobalConfig.szScratch = 0;</span>
<span class='curline'><a href='../S/185.html#L20103'>sqlite3GlobalConfig</a> 20103 libdb/sqlite3.c     sqlite3GlobalConfig.nScratch = 0;</span>
<span class='curline'><a href='../S/185.html#L20105'>sqlite3GlobalConfig</a> 20105 libdb/sqlite3.c   if( sqlite3GlobalConfig.pPage==0 || sqlite3GlobalConfig.szPage&lt;512</span>
<span class='curline'><a href='../S/185.html#L20106'>sqlite3GlobalConfig</a> 20106 libdb/sqlite3.c       || sqlite3GlobalConfig.nPage&lt;1 ){</span>
<span class='curline'><a href='../S/185.html#L20107'>sqlite3GlobalConfig</a> 20107 libdb/sqlite3.c     sqlite3GlobalConfig.pPage = 0;</span>
<span class='curline'><a href='../S/185.html#L20108'>sqlite3GlobalConfig</a> 20108 libdb/sqlite3.c     sqlite3GlobalConfig.szPage = 0;</span>
<span class='curline'><a href='../S/185.html#L20109'>sqlite3GlobalConfig</a> 20109 libdb/sqlite3.c     sqlite3GlobalConfig.nPage = 0;</span>
<span class='curline'><a href='../S/185.html#L20111'>sqlite3GlobalConfig</a> 20111 libdb/sqlite3.c   return sqlite3GlobalConfig.m.xInit(sqlite3GlobalConfig.m.pAppData);</span>
<span class='curline'><a href='../S/185.html#L20127'>sqlite3GlobalConfig</a> 20127 libdb/sqlite3.c   if( sqlite3GlobalConfig.m.xShutdown ){</span>
<span class='curline'><a href='../S/185.html#L20128'>sqlite3GlobalConfig</a> 20128 libdb/sqlite3.c     sqlite3GlobalConfig.m.xShutdown(sqlite3GlobalConfig.m.pAppData);</span>
<span class='curline'><a href='../S/185.html#L20184'>sqlite3GlobalConfig</a> 20184 libdb/sqlite3.c   nFull = sqlite3GlobalConfig.m.xRoundup(n);</span>
<span class='curline'><a href='../S/185.html#L20195'>sqlite3GlobalConfig</a> 20195 libdb/sqlite3.c   p = sqlite3GlobalConfig.m.xMalloc(nFull);</span>
<span class='curline'><a href='../S/185.html#L20199'>sqlite3GlobalConfig</a> 20199 libdb/sqlite3.c     p = sqlite3GlobalConfig.m.xMalloc(nFull);</span>
<span class='curline'><a href='../S/185.html#L20224'>sqlite3GlobalConfig</a> 20224 libdb/sqlite3.c   }else if( sqlite3GlobalConfig.bMemstat ){</span>
<span class='curline'><a href='../S/185.html#L20229'>sqlite3GlobalConfig</a> 20229 libdb/sqlite3.c     p = sqlite3GlobalConfig.m.xMalloc((int)n);</span>
<span class='curline'><a href='../S/185.html#L20278'>sqlite3GlobalConfig</a> 20278 libdb/sqlite3.c   if( mem0.nScratchFree &amp;&amp; sqlite3GlobalConfig.szScratch&gt;=n ){</span>
<span class='curline'><a href='../S/185.html#L20287'>sqlite3GlobalConfig</a> 20287 libdb/sqlite3.c     if( sqlite3GlobalConfig.bMemstat &amp;&amp; p ){</span>
<span class='curline'><a href='../S/185.html#L20320'>sqlite3GlobalConfig</a> 20320 libdb/sqlite3.c     if( p&gt;=sqlite3GlobalConfig.pScratch &amp;&amp; p&lt;mem0.pScratchEnd ){</span>
<span class='curline'><a href='../S/185.html#L20328'>sqlite3GlobalConfig</a> 20328 libdb/sqlite3.c       assert( mem0.nScratchFree &lt;= (u32)sqlite3GlobalConfig.nScratch );</span>
<span class='curline'><a href='../S/185.html#L20336'>sqlite3GlobalConfig</a> 20336 libdb/sqlite3.c       if( sqlite3GlobalConfig.bMemstat ){</span>
<span class='curline'><a href='../S/185.html#L20342'>sqlite3GlobalConfig</a> 20342 libdb/sqlite3.c         sqlite3GlobalConfig.m.xFree(p);</span>
<span class='curline'><a href='../S/185.html#L20345'>sqlite3GlobalConfig</a> 20345 libdb/sqlite3.c         sqlite3GlobalConfig.m.xFree(p);</span>
<span class='curline'><a href='../S/185.html#L20368'>sqlite3GlobalConfig</a> 20368 libdb/sqlite3.c   return sqlite3GlobalConfig.m.xSize(p);</span>
<span class='curline'><a href='../S/185.html#L20382'>sqlite3GlobalConfig</a> 20382 libdb/sqlite3.c       return sqlite3GlobalConfig.m.xSize(p);</span>
<span class='curline'><a href='../S/185.html#L20389'>sqlite3GlobalConfig</a> 20389 libdb/sqlite3.c   return (sqlite3_uint64)sqlite3GlobalConfig.m.xSize(p);</span>
<span class='curline'><a href='../S/185.html#L20399'>sqlite3GlobalConfig</a> 20399 libdb/sqlite3.c   if( sqlite3GlobalConfig.bMemstat ){</span>
<span class='curline'><a href='../S/185.html#L20403'>sqlite3GlobalConfig</a> 20403 libdb/sqlite3.c     sqlite3GlobalConfig.m.xFree(p);</span>
<span class='curline'><a href='../S/185.html#L20406'>sqlite3GlobalConfig</a> 20406 libdb/sqlite3.c     sqlite3GlobalConfig.m.xFree(p);</span>
<span class='curline'><a href='../S/185.html#L20472'>sqlite3GlobalConfig</a> 20472 libdb/sqlite3.c   nNew = sqlite3GlobalConfig.m.xRoundup((int)nBytes);</span>
<span class='curline'><a href='../S/185.html#L20475'>sqlite3GlobalConfig</a> 20475 libdb/sqlite3.c   }else if( sqlite3GlobalConfig.bMemstat ){</span>
<span class='curline'><a href='../S/185.html#L20483'>sqlite3GlobalConfig</a> 20483 libdb/sqlite3.c     pNew = sqlite3GlobalConfig.m.xRealloc(pOld, nNew);</span>
<span class='curline'><a href='../S/185.html#L20486'>sqlite3GlobalConfig</a> 20486 libdb/sqlite3.c       pNew = sqlite3GlobalConfig.m.xRealloc(pOld, nNew);</span>
<span class='curline'><a href='../S/185.html#L20494'>sqlite3GlobalConfig</a> 20494 libdb/sqlite3.c     pNew = sqlite3GlobalConfig.m.xRealloc(pOld, nNew);</span>
<span class='curline'><a href='../S/185.html#L21753'>sqlite3GlobalConfig</a> 21753 libdb/sqlite3.c   sqlite3GlobalConfig.xLog(sqlite3GlobalConfig.pLogArg, iErrCode,</span>
<span class='curline'><a href='../S/185.html#L21762'>sqlite3GlobalConfig</a> 21762 libdb/sqlite3.c   if( sqlite3GlobalConfig.xLog ){</span>
<span class='curline'><a href='../S/185.html#L22050'>sqlite3GlobalConfig</a> 22050 libdb/sqlite3.c   assert( sqlite3GlobalConfig.bCoreMutex!=0 );</span>
<span class='curline'><a href='../S/185.html#L22142'>sqlite3GlobalConfig</a> 22142 libdb/sqlite3.c   if( sqlite3GlobalConfig.bCoreMutex==0 ){</span>
<span class='curline'><a href='../S/185.html#L22833'>sqlite3GlobalConfig</a> 22833 libdb/sqlite3.c   int (*xCallback)(int) = sqlite3GlobalConfig.xTestCallback;</span>
<span class='curline'><a href='../S/185.html#L23944'>sqlite3GlobalConfig</a> 23944 libdb/sqlite3.c       testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L23958'>sqlite3GlobalConfig</a> 23958 libdb/sqlite3.c     testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L28626'>sqlite3GlobalConfig</a> 28626 libdb/sqlite3.c       if( newLimit&gt;sqlite3GlobalConfig.mxMmap ){</span>
<span class='curline'><a href='../S/185.html#L28627'>sqlite3GlobalConfig</a> 28627 libdb/sqlite3.c         newLimit = sqlite3GlobalConfig.mxMmap;</span>
<span class='curline'><a href='../S/185.html#L30052'>sqlite3GlobalConfig</a> 30052 libdb/sqlite3.c   pNew-&gt;mmapSizeMax = sqlite3GlobalConfig.szMmap;</span>
<span class='curline'><a href='../S/185.html#L34022'>sqlite3GlobalConfig</a> 34022 libdb/sqlite3.c     DWORD dwMaximumSize = (DWORD)sqlite3GlobalConfig.nHeap;</span>
<span class='curline'><a href='../S/185.html#L35792'>sqlite3GlobalConfig</a> 35792 libdb/sqlite3.c       if( newLimit&gt;sqlite3GlobalConfig.mxMmap ){</span>
<span class='curline'><a href='../S/185.html#L35793'>sqlite3GlobalConfig</a> 35793 libdb/sqlite3.c         newLimit = sqlite3GlobalConfig.mxMmap;</span>
<span class='curline'><a href='../S/185.html#L37340'>sqlite3GlobalConfig</a> 37340 libdb/sqlite3.c   pFile-&gt;mmapSizeMax = sqlite3GlobalConfig.szMmap;</span>
<span class='curline'><a href='../S/185.html#L38626'>sqlite3GlobalConfig</a> 38626 libdb/sqlite3.c     sqlite3GlobalConfig.pcache2.xUnpin(p-&gt;pCache-&gt;pCache, p-&gt;pPage, 0);</span>
<span class='curline'><a href='../S/185.html#L38647'>sqlite3GlobalConfig</a> 38647 libdb/sqlite3.c   if( sqlite3GlobalConfig.pcache2.xInit==0 ){</span>
<span class='curline'><a href='../S/185.html#L38653'>sqlite3GlobalConfig</a> 38653 libdb/sqlite3.c   return sqlite3GlobalConfig.pcache2.xInit(sqlite3GlobalConfig.pcache2.pArg);</span>
<span class='curline'><a href='../S/185.html#L38656'>sqlite3GlobalConfig</a> 38656 libdb/sqlite3.c   if( sqlite3GlobalConfig.pcache2.xShutdown ){</span>
<span class='curline'><a href='../S/185.html#L38658'>sqlite3GlobalConfig</a> 38658 libdb/sqlite3.c     sqlite3GlobalConfig.pcache2.xShutdown(sqlite3GlobalConfig.pcache2.pArg);</span>
<span class='curline'><a href='../S/185.html#L38700'>sqlite3GlobalConfig</a> 38700 libdb/sqlite3.c     pNew = sqlite3GlobalConfig.pcache2.xCreate(</span>
<span class='curline'><a href='../S/185.html#L38704'>sqlite3GlobalConfig</a> 38704 libdb/sqlite3.c     sqlite3GlobalConfig.pcache2.xCachesize(pNew, numberOfCachePages(pCache));</span>
<span class='curline'><a href='../S/185.html#L38706'>sqlite3GlobalConfig</a> 38706 libdb/sqlite3.c       sqlite3GlobalConfig.pcache2.xDestroy(pCache-&gt;pCache);</span>
<span class='curline'><a href='../S/185.html#L38762'>sqlite3GlobalConfig</a> 38762 libdb/sqlite3.c   return sqlite3GlobalConfig.pcache2.xFetch(pCache-&gt;pCache, pgno, eCreate);</span>
<span class='curline'><a href='../S/185.html#L38804'>sqlite3GlobalConfig</a> 38804 libdb/sqlite3.c                 sqlite3GlobalConfig.pcache.xPagecount(pCache-&gt;pCache),</span>
<span class='curline'><a href='../S/185.html#L38812'>sqlite3GlobalConfig</a> 38812 libdb/sqlite3.c   *ppPage = sqlite3GlobalConfig.pcache2.xFetch(pCache-&gt;pCache, pgno, 2);</span>
<span class='curline'><a href='../S/185.html#L38913'>sqlite3GlobalConfig</a> 38913 libdb/sqlite3.c   sqlite3GlobalConfig.pcache2.xUnpin(p-&gt;pCache-&gt;pCache, p-&gt;pPage, 1);</span>
<span class='curline'><a href='../S/185.html#L38971'>sqlite3GlobalConfig</a> 38971 libdb/sqlite3.c   sqlite3GlobalConfig.pcache2.xRekey(pCache-&gt;pCache, p-&gt;pPage, p-&gt;pgno,newPgno);</span>
<span class='curline'><a href='../S/185.html#L39007'>sqlite3GlobalConfig</a> 39007 libdb/sqlite3.c     sqlite3GlobalConfig.pcache2.xTruncate(pCache-&gt;pCache, pgno+1);</span>
<span class='curline'><a href='../S/185.html#L39016'>sqlite3GlobalConfig</a> 39016 libdb/sqlite3.c   sqlite3GlobalConfig.pcache2.xDestroy(pCache-&gt;pCache);</span>
<span class='curline'><a href='../S/185.html#L39126'>sqlite3GlobalConfig</a> 39126 libdb/sqlite3.c   return sqlite3GlobalConfig.pcache2.xPagecount(pCache-&gt;pCache);</span>
<span class='curline'><a href='../S/185.html#L39144'>sqlite3GlobalConfig</a> 39144 libdb/sqlite3.c   sqlite3GlobalConfig.pcache2.xCachesize(pCache-&gt;pCache,</span>
<span class='curline'><a href='../S/185.html#L39153'>sqlite3GlobalConfig</a> 39153 libdb/sqlite3.c   sqlite3GlobalConfig.pcache2.xShrink(pCache-&gt;pCache);</span>
<span class='curline'><a href='../S/185.html#L39702'>sqlite3GlobalConfig</a> 39702 libdb/sqlite3.c   if( sqlite3GlobalConfig.bCoreMutex ){</span>
<span class='curline'><a href='../S/185.html#L39750'>sqlite3GlobalConfig</a> 39750 libdb/sqlite3.c   int separateCache = sqlite3GlobalConfig.bCoreMutex&gt;0;</span>
<span class='curline'><a href='../S/185.html#L52274'>sqlite3GlobalConfig</a> 52274 libdb/sqlite3.c   sqlite3GlobalConfig.sharedCacheEnabled = enable;</span>
<span class='curline'><a href='../S/185.html#L54180'>sqlite3GlobalConfig</a> 54180 libdb/sqlite3.c       if( SQLITE_THREADSAFE &amp;&amp; sqlite3GlobalConfig.bCoreMutex ){</span>
<span class='curline'><a href='../S/185.html#L65701'>sqlite3GlobalConfig</a> 65701 libdb/sqlite3.c   if( sqlite3GlobalConfig.xSqllog &amp;&amp; v-&gt;rc==SQLITE_OK &amp;&amp; v-&gt;zSql &amp;&amp; v-&gt;pc&gt;=0 ){</span>
<span class='curline'><a href='../S/185.html#L65705'>sqlite3GlobalConfig</a> 65705 libdb/sqlite3.c       sqlite3GlobalConfig.xSqllog(</span>
<span class='curline'><a href='../S/185.html#L65706'>sqlite3GlobalConfig</a> 65706 libdb/sqlite3.c           sqlite3GlobalConfig.pSqllogArg, v-&gt;db, zExpanded, 1</span>
<span class='curline'><a href='../S/185.html#L69054'>sqlite3GlobalConfig</a> 69054 libdb/sqlite3.c       if( sqlite3GlobalConfig.xVdbeBranch==0 ) return;  /*NO_TEST*/</span>
<span class='curline'><a href='../S/185.html#L69055'>sqlite3GlobalConfig</a> 69055 libdb/sqlite3.c       sqlite3GlobalConfig.xVdbeBranch(sqlite3GlobalConfig.pVdbeBranchArg,</span>
<span class='curline'><a href='../S/185.html#L75416'>sqlite3GlobalConfig</a> 75416 libdb/sqlite3.c   testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L76748'>sqlite3GlobalConfig</a> 76748 libdb/sqlite3.c   if( sqlite3TempInMemory(db) || sqlite3GlobalConfig.bCoreMutex==0 ){</span>
<span class='curline'><a href='../S/185.html#L76797'>sqlite3GlobalConfig</a> 76797 libdb/sqlite3.c       if( sqlite3GlobalConfig.pScratch==0 ){</span>
<span class='curline'><a href='../S/185.html#L101920'>sqlite3GlobalConfig</a> 101920 libdb/sqlite3.c       if( sz&lt;0 ) sz = sqlite3GlobalConfig.szMmap;</span>
<span class='curline'><a href='../S/185.html#L118362'>sqlite3GlobalConfig</a> 118362 libdb/sqlite3.c          &amp;&amp; sqlite3GlobalConfig.bUseCis</span>
<span class='curline'><a href='../S/185.html#L125047'>sqlite3GlobalConfig</a> 125047 libdb/sqlite3.c   if( sqlite3GlobalConfig.isInit ) return SQLITE_OK;</span>
<span class='curline'><a href='../S/185.html#L125068'>sqlite3GlobalConfig</a> 125068 libdb/sqlite3.c   sqlite3GlobalConfig.isMutexInit = 1;</span>
<span class='curline'><a href='../S/185.html#L125069'>sqlite3GlobalConfig</a> 125069 libdb/sqlite3.c   if( !sqlite3GlobalConfig.isMallocInit ){</span>
<span class='curline'><a href='../S/185.html#L125073'>sqlite3GlobalConfig</a> 125073 libdb/sqlite3.c     sqlite3GlobalConfig.isMallocInit = 1;</span>
<span class='curline'><a href='../S/185.html#L125074'>sqlite3GlobalConfig</a> 125074 libdb/sqlite3.c     if( !sqlite3GlobalConfig.pInitMutex ){</span>
<span class='curline'><a href='../S/185.html#L125075'>sqlite3GlobalConfig</a> 125075 libdb/sqlite3.c       sqlite3GlobalConfig.pInitMutex =</span>
<span class='curline'><a href='../S/185.html#L125077'>sqlite3GlobalConfig</a> 125077 libdb/sqlite3.c       if( sqlite3GlobalConfig.bCoreMutex &amp;&amp; !sqlite3GlobalConfig.pInitMutex ){</span>
<span class='curline'><a href='../S/185.html#L125083'>sqlite3GlobalConfig</a> 125083 libdb/sqlite3.c     sqlite3GlobalConfig.nRefInitMutex++;</span>
<span class='curline'><a href='../S/185.html#L125107'>sqlite3GlobalConfig</a> 125107 libdb/sqlite3.c   sqlite3_mutex_enter(sqlite3GlobalConfig.pInitMutex);</span>
<span class='curline'><a href='../S/185.html#L125108'>sqlite3GlobalConfig</a> 125108 libdb/sqlite3.c   if( sqlite3GlobalConfig.isInit==0 &amp;&amp; sqlite3GlobalConfig.inProgress==0 ){</span>
<span class='curline'><a href='../S/185.html#L125110'>sqlite3GlobalConfig</a> 125110 libdb/sqlite3.c     sqlite3GlobalConfig.inProgress = 1;</span>
<span class='curline'><a href='../S/185.html#L125113'>sqlite3GlobalConfig</a> 125113 libdb/sqlite3.c     if( sqlite3GlobalConfig.isPCacheInit==0 ){</span>
<span class='curline'><a href='../S/185.html#L125117'>sqlite3GlobalConfig</a> 125117 libdb/sqlite3.c       sqlite3GlobalConfig.isPCacheInit = 1;</span>
<span class='curline'><a href='../S/185.html#L125121'>sqlite3GlobalConfig</a> 125121 libdb/sqlite3.c       sqlite3PCacheBufferSetup( sqlite3GlobalConfig.pPage, </span>
<span class='curline'><a href='../S/185.html#L125122'>sqlite3GlobalConfig</a> 125122 libdb/sqlite3.c           sqlite3GlobalConfig.szPage, sqlite3GlobalConfig.nPage);</span>
<span class='curline'><a href='../S/185.html#L125123'>sqlite3GlobalConfig</a> 125123 libdb/sqlite3.c       sqlite3GlobalConfig.isInit = 1;</span>
<span class='curline'><a href='../S/185.html#L125128'>sqlite3GlobalConfig</a> 125128 libdb/sqlite3.c     sqlite3GlobalConfig.inProgress = 0;</span>
<span class='curline'><a href='../S/185.html#L125130'>sqlite3GlobalConfig</a> 125130 libdb/sqlite3.c   sqlite3_mutex_leave(sqlite3GlobalConfig.pInitMutex);</span>
<span class='curline'><a href='../S/185.html#L125136'>sqlite3GlobalConfig</a> 125136 libdb/sqlite3.c   sqlite3GlobalConfig.nRefInitMutex--;</span>
<span class='curline'><a href='../S/185.html#L125137'>sqlite3GlobalConfig</a> 125137 libdb/sqlite3.c   if( sqlite3GlobalConfig.nRefInitMutex&lt;=0 ){</span>
<span class='curline'><a href='../S/185.html#L125138'>sqlite3GlobalConfig</a> 125138 libdb/sqlite3.c     assert( sqlite3GlobalConfig.nRefInitMutex==0 );</span>
<span class='curline'><a href='../S/185.html#L125139'>sqlite3GlobalConfig</a> 125139 libdb/sqlite3.c     sqlite3_mutex_free(sqlite3GlobalConfig.pInitMutex);</span>
<span class='curline'><a href='../S/185.html#L125140'>sqlite3GlobalConfig</a> 125140 libdb/sqlite3.c     sqlite3GlobalConfig.pInitMutex = 0;</span>
<span class='curline'><a href='../S/185.html#L125185'>sqlite3GlobalConfig</a> 125185 libdb/sqlite3.c   if( sqlite3GlobalConfig.isInit ){</span>
<span class='curline'><a href='../S/185.html#L125192'>sqlite3GlobalConfig</a> 125192 libdb/sqlite3.c     sqlite3GlobalConfig.isInit = 0;</span>
<span class='curline'><a href='../S/185.html#L125194'>sqlite3GlobalConfig</a> 125194 libdb/sqlite3.c   if( sqlite3GlobalConfig.isPCacheInit ){</span>
<span class='curline'><a href='../S/185.html#L125196'>sqlite3GlobalConfig</a> 125196 libdb/sqlite3.c     sqlite3GlobalConfig.isPCacheInit = 0;</span>
<span class='curline'><a href='../S/185.html#L125198'>sqlite3GlobalConfig</a> 125198 libdb/sqlite3.c   if( sqlite3GlobalConfig.isMallocInit ){</span>
<span class='curline'><a href='../S/185.html#L125200'>sqlite3GlobalConfig</a> 125200 libdb/sqlite3.c     sqlite3GlobalConfig.isMallocInit = 0;</span>
<span class='curline'><a href='../S/185.html#L125214'>sqlite3GlobalConfig</a> 125214 libdb/sqlite3.c   if( sqlite3GlobalConfig.isMutexInit ){</span>
<span class='curline'><a href='../S/185.html#L125216'>sqlite3GlobalConfig</a> 125216 libdb/sqlite3.c     sqlite3GlobalConfig.isMutexInit = 0;</span>
<span class='curline'><a href='../S/185.html#L125237'>sqlite3GlobalConfig</a> 125237 libdb/sqlite3.c   if( sqlite3GlobalConfig.isInit ) return SQLITE_MISUSE_BKPT;</span>
<span class='curline'><a href='../S/185.html#L125248'>sqlite3GlobalConfig</a> 125248 libdb/sqlite3.c       sqlite3GlobalConfig.bCoreMutex = 0;</span>
<span class='curline'><a href='../S/185.html#L125249'>sqlite3GlobalConfig</a> 125249 libdb/sqlite3.c       sqlite3GlobalConfig.bFullMutex = 0;</span>
<span class='curline'><a href='../S/185.html#L125255'>sqlite3GlobalConfig</a> 125255 libdb/sqlite3.c       sqlite3GlobalConfig.bCoreMutex = 1;</span>
<span class='curline'><a href='../S/185.html#L125256'>sqlite3GlobalConfig</a> 125256 libdb/sqlite3.c       sqlite3GlobalConfig.bFullMutex = 0;</span>
<span class='curline'><a href='../S/185.html#L125261'>sqlite3GlobalConfig</a> 125261 libdb/sqlite3.c       sqlite3GlobalConfig.bCoreMutex = 1;</span>
<span class='curline'><a href='../S/185.html#L125262'>sqlite3GlobalConfig</a> 125262 libdb/sqlite3.c       sqlite3GlobalConfig.bFullMutex = 1;</span>
<span class='curline'><a href='../S/185.html#L125267'>sqlite3GlobalConfig</a> 125267 libdb/sqlite3.c       sqlite3GlobalConfig.mutex = *va_arg(ap, sqlite3_mutex_methods*);</span>
<span class='curline'><a href='../S/185.html#L125272'>sqlite3GlobalConfig</a> 125272 libdb/sqlite3.c       *va_arg(ap, sqlite3_mutex_methods*) = sqlite3GlobalConfig.mutex;</span>
<span class='curline'><a href='../S/185.html#L125280'>sqlite3GlobalConfig</a> 125280 libdb/sqlite3.c       sqlite3GlobalConfig.m = *va_arg(ap, sqlite3_mem_methods*);</span>
<span class='curline'><a href='../S/185.html#L125285'>sqlite3GlobalConfig</a> 125285 libdb/sqlite3.c       if( sqlite3GlobalConfig.m.xMalloc==0 ) sqlite3MemSetDefault();</span>
<span class='curline'><a href='../S/185.html#L125286'>sqlite3GlobalConfig</a> 125286 libdb/sqlite3.c       *va_arg(ap, sqlite3_mem_methods*) = sqlite3GlobalConfig.m;</span>
<span class='curline'><a href='../S/185.html#L125291'>sqlite3GlobalConfig</a> 125291 libdb/sqlite3.c       sqlite3GlobalConfig.bMemstat = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125296'>sqlite3GlobalConfig</a> 125296 libdb/sqlite3.c       sqlite3GlobalConfig.pScratch = va_arg(ap, void*);</span>
<span class='curline'><a href='../S/185.html#L125297'>sqlite3GlobalConfig</a> 125297 libdb/sqlite3.c       sqlite3GlobalConfig.szScratch = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125298'>sqlite3GlobalConfig</a> 125298 libdb/sqlite3.c       sqlite3GlobalConfig.nScratch = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125303'>sqlite3GlobalConfig</a> 125303 libdb/sqlite3.c       sqlite3GlobalConfig.pPage = va_arg(ap, void*);</span>
<span class='curline'><a href='../S/185.html#L125304'>sqlite3GlobalConfig</a> 125304 libdb/sqlite3.c       sqlite3GlobalConfig.szPage = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125305'>sqlite3GlobalConfig</a> 125305 libdb/sqlite3.c       sqlite3GlobalConfig.nPage = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125321'>sqlite3GlobalConfig</a> 125321 libdb/sqlite3.c       sqlite3GlobalConfig.pcache2 = *va_arg(ap, sqlite3_pcache_methods2*);</span>
<span class='curline'><a href='../S/185.html#L125325'>sqlite3GlobalConfig</a> 125325 libdb/sqlite3.c       if( sqlite3GlobalConfig.pcache2.xInit==0 ){</span>
<span class='curline'><a href='../S/185.html#L125328'>sqlite3GlobalConfig</a> 125328 libdb/sqlite3.c       *va_arg(ap, sqlite3_pcache_methods2*) = sqlite3GlobalConfig.pcache2;</span>
<span class='curline'><a href='../S/185.html#L125335'>sqlite3GlobalConfig</a> 125335 libdb/sqlite3.c       sqlite3GlobalConfig.pHeap = va_arg(ap, void*);</span>
<span class='curline'><a href='../S/185.html#L125336'>sqlite3GlobalConfig</a> 125336 libdb/sqlite3.c       sqlite3GlobalConfig.nHeap = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125337'>sqlite3GlobalConfig</a> 125337 libdb/sqlite3.c       sqlite3GlobalConfig.mnReq = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125339'>sqlite3GlobalConfig</a> 125339 libdb/sqlite3.c       if( sqlite3GlobalConfig.mnReq&lt;1 ){</span>
<span class='curline'><a href='../S/185.html#L125340'>sqlite3GlobalConfig</a> 125340 libdb/sqlite3.c         sqlite3GlobalConfig.mnReq = 1;</span>
<span class='curline'><a href='../S/185.html#L125341'>sqlite3GlobalConfig</a> 125341 libdb/sqlite3.c       }else if( sqlite3GlobalConfig.mnReq&gt;(1&lt;&lt;12) ){</span>
<span class='curline'><a href='../S/185.html#L125343'>sqlite3GlobalConfig</a> 125343 libdb/sqlite3.c         sqlite3GlobalConfig.mnReq = (1&lt;&lt;12);</span>
<span class='curline'><a href='../S/185.html#L125346'>sqlite3GlobalConfig</a> 125346 libdb/sqlite3.c       if( sqlite3GlobalConfig.pHeap==0 ){</span>
<span class='curline'><a href='../S/185.html#L125352'>sqlite3GlobalConfig</a> 125352 libdb/sqlite3.c         memset(&amp;sqlite3GlobalConfig.m, 0, sizeof(sqlite3GlobalConfig.m));</span>
<span class='curline'><a href='../S/185.html#L125359'>sqlite3GlobalConfig</a> 125359 libdb/sqlite3.c         sqlite3GlobalConfig.m = *sqlite3MemGetMemsys3();</span>
<span class='curline'><a href='../S/185.html#L125362'>sqlite3GlobalConfig</a> 125362 libdb/sqlite3.c         sqlite3GlobalConfig.m = *sqlite3MemGetMemsys5();</span>
<span class='curline'><a href='../S/185.html#L125370'>sqlite3GlobalConfig</a> 125370 libdb/sqlite3.c       sqlite3GlobalConfig.szLookaside = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125371'>sqlite3GlobalConfig</a> 125371 libdb/sqlite3.c       sqlite3GlobalConfig.nLookaside = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125385'>sqlite3GlobalConfig</a> 125385 libdb/sqlite3.c       sqlite3GlobalConfig.xLog = va_arg(ap, LOGFUNC_t);</span>
<span class='curline'><a href='../S/185.html#L125386'>sqlite3GlobalConfig</a> 125386 libdb/sqlite3.c       sqlite3GlobalConfig.pLogArg = va_arg(ap, void*);</span>
<span class='curline'><a href='../S/185.html#L125396'>sqlite3GlobalConfig</a> 125396 libdb/sqlite3.c       sqlite3GlobalConfig.bOpenUri = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125401'>sqlite3GlobalConfig</a> 125401 libdb/sqlite3.c       sqlite3GlobalConfig.bUseCis = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125408'>sqlite3GlobalConfig</a> 125408 libdb/sqlite3.c       sqlite3GlobalConfig.xSqllog = va_arg(ap, SQLLOGFUNC_t);</span>
<span class='curline'><a href='../S/185.html#L125409'>sqlite3GlobalConfig</a> 125409 libdb/sqlite3.c       sqlite3GlobalConfig.pSqllogArg = va_arg(ap, void *);</span>
<span class='curline'><a href='../S/185.html#L125420'>sqlite3GlobalConfig</a> 125420 libdb/sqlite3.c       sqlite3GlobalConfig.mxMmap = mxMmap;</span>
<span class='curline'><a href='../S/185.html#L125423'>sqlite3GlobalConfig</a> 125423 libdb/sqlite3.c       sqlite3GlobalConfig.szMmap = szMmap;</span>
<span class='curline'><a href='../S/185.html#L125429'>sqlite3GlobalConfig</a> 125429 libdb/sqlite3.c       sqlite3GlobalConfig.nHeap = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L125778'>sqlite3GlobalConfig</a> 125778 libdb/sqlite3.c   if( sqlite3GlobalConfig.xSqllog ){</span>
<span class='curline'><a href='../S/185.html#L125780'>sqlite3GlobalConfig</a> 125780 libdb/sqlite3.c     sqlite3GlobalConfig.xSqllog(sqlite3GlobalConfig.pSqllogArg, db, 0, 2);</span>
<span class='curline'><a href='../S/185.html#L127131'>sqlite3GlobalConfig</a> 127131 libdb/sqlite3.c   if( ((flags &amp; SQLITE_OPEN_URI) || sqlite3GlobalConfig.bOpenUri) </span>
<span class='curline'><a href='../S/185.html#L127366'>sqlite3GlobalConfig</a> 127366 libdb/sqlite3.c   if( sqlite3GlobalConfig.bCoreMutex==0 ){</span>
<span class='curline'><a href='../S/185.html#L127373'>sqlite3GlobalConfig</a> 127373 libdb/sqlite3.c     isThreadsafe = sqlite3GlobalConfig.bFullMutex;</span>
<span class='curline'><a href='../S/185.html#L127377'>sqlite3GlobalConfig</a> 127377 libdb/sqlite3.c   }else if( sqlite3GlobalConfig.sharedCacheEnabled ){</span>
<span class='curline'><a href='../S/185.html#L127426'>sqlite3GlobalConfig</a> 127426 libdb/sqlite3.c   db-&gt;szMmap = sqlite3GlobalConfig.szMmap;</span>
<span class='curline'><a href='../S/185.html#L127568'>sqlite3GlobalConfig</a> 127568 libdb/sqlite3.c   setupLookaside(db, 0, sqlite3GlobalConfig.szLookaside,</span>
<span class='curline'><a href='../S/185.html#L127569'>sqlite3GlobalConfig</a> 127569 libdb/sqlite3.c                         sqlite3GlobalConfig.nLookaside);</span>
<span class='curline'><a href='../S/185.html#L127576'>sqlite3GlobalConfig</a> 127576 libdb/sqlite3.c     assert( db-&gt;mutex!=0 || isThreadsafe==0 || sqlite3GlobalConfig.bFullMutex==0 );</span>
<span class='curline'><a href='../S/185.html#L127589'>sqlite3GlobalConfig</a> 127589 libdb/sqlite3.c   if( sqlite3GlobalConfig.xSqllog ){</span>
<span class='curline'><a href='../S/185.html#L127591'>sqlite3GlobalConfig</a> 127591 libdb/sqlite3.c     void *pArg = sqlite3GlobalConfig.pSqllogArg;</span>
<span class='curline'><a href='../S/185.html#L127592'>sqlite3GlobalConfig</a> 127592 libdb/sqlite3.c     sqlite3GlobalConfig.xSqllog(pArg, db, zFilename, 0);</span>
<span class='curline'><a href='../S/185.html#L127788'>sqlite3GlobalConfig</a> 127788 libdb/sqlite3.c   testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L127795'>sqlite3GlobalConfig</a> 127795 libdb/sqlite3.c   testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L127802'>sqlite3GlobalConfig</a> 127802 libdb/sqlite3.c   testcase( sqlite3GlobalConfig.xLog!=0 );</span>
<span class='curline'><a href='../S/185.html#L128062'>sqlite3GlobalConfig</a> 128062 libdb/sqlite3.c       sqlite3GlobalConfig.xTestCallback = va_arg(ap, TESTCALLBACKFUNC_t);</span>
<span class='curline'><a href='../S/185.html#L128244'>sqlite3GlobalConfig</a> 128244 libdb/sqlite3.c       sqlite3GlobalConfig.bLocaltimeFault = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L128257'>sqlite3GlobalConfig</a> 128257 libdb/sqlite3.c       sqlite3GlobalConfig.neverCorrupt = va_arg(ap, int);</span>
<span class='curline'><a href='../S/185.html#L128270'>sqlite3GlobalConfig</a> 128270 libdb/sqlite3.c       sqlite3GlobalConfig.xVdbeBranch = va_arg(ap,branch_callback);</span>
<span class='curline'><a href='../S/185.html#L128271'>sqlite3GlobalConfig</a> 128271 libdb/sqlite3.c       sqlite3GlobalConfig.pVdbeBranchArg = va_arg(ap,void*);</span>
<span class='curline'><a href='../S/185.html#L128289'>sqlite3GlobalConfig</a> 128289 libdb/sqlite3.c       if( sqlite3GlobalConfig.isInit==0 ) rc = SQLITE_ERROR;</span>
</pre>
</body>
</html>
